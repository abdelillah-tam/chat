import{$ as $t,$a as md,$b as is,A as Ko,Aa as fi,Ab as yd,B as Me,Ba as ea,Bb as Jr,C as Ge,Ca as cd,Cb as Xr,D as bt,Da as Te,Db as oa,E as Ku,Ea as Br,Eb as Zr,F as Yo,Fa as le,Fb as aa,G as He,Ga as ld,Gb as bd,H as Yu,Ha as $r,Hb as ca,I as Qu,Ia as ud,Ib as Ht,J as Ju,Ja as lt,Jb as wd,K as Xu,Ka as ta,Kb as Ed,L as Lr,La as pi,Lb as It,M as Bt,Ma as dd,Mb as dt,N as wt,Na as mi,Nb as ht,O as Qo,Oa as L,Ob as An,P as Jo,Pa as E,Pb as Cd,Q as Zu,Qa as na,Qb as Id,R as ed,Ra as hd,Rb as te,S as td,Sa as Wr,Sb as _i,T as jr,Ta as Et,Tb as la,U as nd,Ua as ia,Ub as es,V as Vr,Va as ue,Vb as ts,W as Ne,Wa as fd,Wb as ns,X as Ur,Xa as Ct,Xb as Sd,Y as ce,Ya as qe,Yb as Ue,Z as id,Za as zr,Zb as Td,_ as $,_a as pd,_b as Ad,a as m,aa as I,ab as Ae,ac as rs,b as P,ba as re,bb as Gt,ca as rd,cb as G,d as Q,da as y,db as Sn,dc as qt,e as Bu,ea as Xo,eb as ge,ec as Kt,f as $u,fa as w,fb as Gr,g as je,ga as _,gb as Hr,gc as Re,h as Go,ha as Zo,hb as v,hc as ua,i as Ho,ia as Wt,ib as b,ic as Rd,j as fe,ja as di,jb as N,jc as St,k as pe,ka as Z,kb as gi,kc as Dd,l as Wu,la as se,lb as U,lc as xd,m as yt,ma as Y,mb as we,mc as Md,n as zu,na as Oe,nb as gd,o as me,oa as sd,ob as ra,p as T,pa as En,pb as sa,q as li,qa as Ve,qb as D,r as Gu,ra as od,rb as qr,s as Hu,sa as ot,sb as Tn,t as A,ta as Cn,tb as Kr,u as ui,ua as In,ub as Yr,v as ye,va as at,vb as Qr,w as qo,wa as zt,wb as ut,x as Pr,xa as ct,xb as ee,y as Fr,ya as ad,yb as _d,z as qu,za as hi,zb as vd}from"./chunk-O3S5FAVI.js";var yi=class{},os=class{},oe=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),s=r.toLowerCase(),o=n.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var ha=class{encodeKey(e){return Nd(e)}encodeValue(e){return Nd(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function s_(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=n.get(o)||[];l.push(a),n.set(o,l)}),n}var o_=/%(\d[a-f0-9])/gi,a_={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Nd(t){return encodeURIComponent(t).replace(o_,(e,n)=>a_[n]??e)}function ss(t){return`${t}`}var At=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new ha,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=s_(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(ss):[ss(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{n.push({param:i,value:s,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(ss(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(ss(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var fa=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function c_(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Od(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function kd(t){return typeof Blob<"u"&&t instanceof Blob}function Pd(t){return typeof FormData<"u"&&t instanceof FormData}function l_(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var vi=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(c_(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new oe,this.context??=new fa,!this.params)this.params=new At,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Od(this.body)||kd(this.body)||Pd(this.body)||l_(this.body)?this.body:this.body instanceof At?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Pd(this.body)?null:kd(this.body)?this.body.type||null:Od(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof At?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new t(n,i,o,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:s})}},Rt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Rt||{}),bi=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new oe,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},as=class t extends bi{constructor(e={}){super(e),this.type=Rt.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},wi=class t extends bi{constructor(e={}){super(e),this.type=Rt.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tt=class extends bi{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},Vd=200,u_=204;function da(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var _a=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof vi)o=i;else{let c;s.headers instanceof oe?c=s.headers:c=new oe(s.headers);let u;s.params&&(s.params instanceof At?u=s.params:u=new At({fromObject:s.params})),o=new vi(i,r,s.body!==void 0?s.body:null,{headers:c,context:s.context,params:u,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=T(o).pipe(bt(c=>this.handler.handle(c)));if(i instanceof vi||s.observe==="events")return a;let l=a.pipe(Me(c=>c instanceof wi));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(A(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(A(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(A(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(A(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new At().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,da(s,r))}post(i,r,s={}){return this.request("POST",i,da(s,r))}put(i,r,s={}){return this.request("PUT",i,da(s,r))}};e.\u0275fac=function(r){return new(r||e)(w(yi))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),d_=/^\)\]\}',?\n/,h_="X-Request-URL";function Fd(t){if(t.url)return t.url;let e=h_.toLocaleLowerCase();return t.headers.get(e)}var f_=(()=>{let e=class e{constructor(){this.fetchImpl=_(pa,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=_(ue)}handle(i){return new je(r=>{let s=new AbortController;return this.doRequest(i,s.signal,r).then(ma,o=>r.error(new Tt({error:o}))),()=>s.abort()})}doRequest(i,r,s){return Q(this,null,function*(){let o=this.createRequestInit(i),a;try{let p=this.ngZone.runOutsideAngular(()=>this.fetchImpl(i.urlWithParams,m({signal:r},o)));p_(p),s.next({type:Rt.Sent}),a=yield p}catch(p){s.error(new Tt({error:p,status:p.status??0,statusText:p.statusText,url:i.urlWithParams,headers:p.headers}));return}let l=new oe(a.headers),c=a.statusText,u=Fd(a)??i.urlWithParams,d=a.status,h=null;if(i.reportProgress&&s.next(new as({headers:l,status:d,statusText:c,url:u})),a.body){let p=a.headers.get("content-length"),S=[],C=a.body.getReader(),M=0,K,ie,X=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Q(this,null,function*(){for(;;){let{done:Ut,value:ci}=yield C.read();if(Ut)break;if(S.push(ci),M+=ci.length,i.reportProgress){ie=i.responseType==="text"?(ie??"")+(K??=new TextDecoder).decode(ci,{stream:!0}):void 0;let Uu=()=>s.next({type:Rt.DownloadProgress,total:p?+p:void 0,loaded:M,partialText:ie});X?X.run(Uu):Uu()}}}));let ai=this.concatChunks(S,M);try{let Ut=a.headers.get("Content-Type")??"";h=this.parseBody(i,ai,Ut)}catch(Ut){s.error(new Tt({error:Ut,headers:new oe(a.headers),status:a.status,statusText:a.statusText,url:Fd(a)??i.urlWithParams}));return}}d===0&&(d=h?Vd:0),d>=200&&d<300?(s.next(new wi({body:h,headers:l,status:d,statusText:c,url:u})),s.complete()):s.error(new Tt({error:h,headers:l,status:d,statusText:c,url:u}))})}parseBody(i,r,s){switch(i.responseType){case"json":let o=new TextDecoder().decode(r).replace(d_,"");return o===""?null:JSON.parse(o);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:s});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},s=i.withCredentials?"include":void 0;if(i.headers.forEach((o,a)=>r[o]=a.join(",")),i.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!i.headers.has("Content-Type")){let o=i.detectContentTypeHeader();o!==null&&(r["Content-Type"]=o)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:s}}concatChunks(i,r){let s=new Uint8Array(r),o=0;for(let a of i)s.set(a,o),o+=a.length;return s}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),pa=class{};function ma(){}function p_(t){t.then(ma,ma)}function m_(t,e){return e(t)}function g_(t,e,n){return(i,r)=>Ve(n,()=>e(i,s=>t(s,r)))}var Ud=new y(""),__=new y(""),v_=new y("",{providedIn:"root",factory:()=>!0});var Ld=(()=>{let e=class e extends yi{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=_(Br),this.contributeToStability=_(v_)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ud),...this.injector.get(__,[])]));this.chain=r.reduceRight((s,o)=>g_(s,o,this.injector),m_)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,s=>this.backend.handle(s)).pipe(Bt(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(w(os),w(En))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();var y_=/^\)\]\}',?\n/;function b_(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var jd=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new $(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?me(r.\u0275loadImpl()):T(null)).pipe(Ne(()=>new je(o=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((C,M)=>a.setRequestHeader(C,M.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let C=i.detectContentTypeHeader();C!==null&&a.setRequestHeader("Content-Type",C)}if(i.responseType){let C=i.responseType.toLowerCase();a.responseType=C!=="json"?C:"text"}let l=i.serializeBody(),c=null,u=()=>{if(c!==null)return c;let C=a.statusText||"OK",M=new oe(a.getAllResponseHeaders()),K=b_(a)||i.url;return c=new as({headers:M,status:a.status,statusText:C,url:K}),c},d=()=>{let{headers:C,status:M,statusText:K,url:ie}=u(),X=null;M!==u_&&(X=typeof a.response>"u"?a.responseText:a.response),M===0&&(M=X?Vd:0);let ai=M>=200&&M<300;if(i.responseType==="json"&&typeof X=="string"){let Ut=X;X=X.replace(y_,"");try{X=X!==""?JSON.parse(X):null}catch(ci){X=Ut,ai&&(ai=!1,X={error:ci,text:X})}}ai?(o.next(new wi({body:X,headers:C,status:M,statusText:K,url:ie||void 0})),o.complete()):o.error(new Tt({error:X,headers:C,status:M,statusText:K,url:ie||void 0}))},h=C=>{let{url:M}=u(),K=new Tt({error:C,status:a.status||0,statusText:a.statusText||"Unknown Error",url:M||void 0});o.error(K)},f=!1,p=C=>{f||(o.next(u()),f=!0);let M={type:Rt.DownloadProgress,loaded:C.loaded};C.lengthComputable&&(M.total=C.total),i.responseType==="text"&&a.responseText&&(M.partialText=a.responseText),o.next(M)},S=C=>{let M={type:Rt.UploadProgress,loaded:C.loaded};C.lengthComputable&&(M.total=C.total),o.next(M)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",p),l!==null&&a.upload&&a.upload.addEventListener("progress",S)),a.send(l),o.next({type:Rt.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",p),l!==null&&a.upload&&a.upload.removeEventListener("progress",S)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(w(rs))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Bd=new y(""),w_="XSRF-TOKEN",E_=new y("",{providedIn:"root",factory:()=>w_}),C_="X-XSRF-TOKEN",I_=new y("",{providedIn:"root",factory:()=>C_}),cs=class{},S_=(()=>{let e=class e{constructor(i,r,s){this.doc=i,this.platform=r,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=ts(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(w(te),w(lt),w(E_))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function T_(t,e){let n=t.url.toLowerCase();if(!_(Bd)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=_(cs).getToken(),r=_(I_);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}function $d(...t){let e=[_a,jd,Ld,{provide:yi,useExisting:Ld},{provide:os,useFactory:()=>_(f_,{optional:!0})??_(jd)},{provide:Ud,useValue:T_,multi:!0},{provide:Bd,useValue:!0},{provide:cs,useClass:S_}];for(let n of t)e.push(...n.\u0275providers);return Oe(e)}var ba=class extends Id{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wa=class t extends ba{static makeCurrent(){Cd(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=D_();return n==null?null:x_(n)}resetBaseElement(){Ei=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ts(document.cookie,e)}},Ei=null;function D_(){return Ei=Ei||document.querySelector("base"),Ei?Ei.getAttribute("href"):null}function x_(t){return new URL(t,document.baseURI).pathname}var M_=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),ls=new y(""),Gd=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(w(ls),w(ue))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ci=class{constructor(e){this._doc=e}},va="ng-app-id",Hd=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=is(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${va}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(va),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(va,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(w(te),w($r),w(pi,8),w(lt))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),ya={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Ia=/%COMP%/g,qd="%COMP%",N_=`_nghost-${qd}`,O_=`_ngcontent-${qd}`,k_=!0,P_=new y("",{providedIn:"root",factory:()=>k_});function F_(t){return O_.replace(Ia,t)}function L_(t){return N_.replace(Ia,t)}function Kd(t,e){return e.map(n=>n.replace(Ia,t))}var us=(()=>{let e=class e{constructor(i,r,s,o,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=is(l),this.defaultRenderer=new Ii(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===di.ShadowDom&&(r=P(m({},r),{encapsulation:di.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof ds?s.applyToHost(i):s instanceof Si&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case di.Emulated:o=new ds(c,u,r,this.appId,d,a,l,h);break;case di.ShadowDom:return new Ea(c,u,i,r,a,l,this.nonce,h);default:o=new Si(c,u,r,d,a,l,h);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(w(Gd),w(Hd),w($r),w(P_),w(te),w(lt),w(ue),w(pi))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Ii=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(ya[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(Wd(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(Wd(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new $(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=ya[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=ya[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(mi.DashCase|mi.Important)?e.style.setProperty(n,i,r&mi.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&mi.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=An().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function Wd(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ea=class extends Ii{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Kd(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Si=class extends Ii{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?Kd(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ds=class extends Si{constructor(e,n,i,r,s,o,a,l){let c=r+"-"+i.id;super(e,n,i,s,o,a,l,c),this.contentAttr=F_(c),this.hostAttr=L_(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},j_=(()=>{let e=class e extends Ci{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(w(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),V_=(()=>{let e=class e extends Ci{constructor(i){super(i),this.delegate=_(Ed,{optional:!0})}supports(i){return this.delegate?this.delegate.supports(i):!1}addEventListener(i,r,s){return this.delegate.addEventListener(i,r,s)}removeEventListener(i,r,s){return this.delegate.removeEventListener(i,r,s)}};e.\u0275fac=function(r){return new(r||e)(w(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),zd=["alt","control","meta","shift"],U_={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},B_={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},$_=(()=>{let e=class e extends Ci{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>An().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),zd.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let s=U_[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),zd.forEach(a=>{if(a!==s){let l=B_[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(w(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function Yd(t,e){return wd(m({rootComponent:t},W_(e)))}function W_(t){return{appProviders:[...K_,...t?.providers??[]],platformProviders:q_}}function z_(){wa.makeCurrent()}function G_(){return new fi}function H_(){return ld(document),document}var q_=[{provide:lt,useValue:Td},{provide:ud,useValue:z_,multi:!0},{provide:te,useFactory:H_,deps:[]}];var K_=[{provide:sd,useValue:"root"},{provide:fi,useFactory:G_,deps:[]},{provide:ls,useClass:j_,multi:!0,deps:[te,ue,lt]},{provide:ls,useClass:$_,multi:!0,deps:[te]},{provide:ls,useClass:V_,multi:!0},us,Hd,Gd,{provide:Wr,useExisting:us},{provide:rs,useClass:M_,deps:[]},[]];var Qd=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(w(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var x="primary",Bi=Symbol("RouteTitle"),Da=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function On(t){return new Da(t)}function J_(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o[0]===":")r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function X_(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ke(t[n],e[n]))return!1;return!0}function Ke(t,e){let n=t?xa(t):void 0,i=e?xa(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!rh(t[r],e[r]))return!1;return!0}function xa(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function rh(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function sh(t){return t.length>0?t[t.length-1]:null}function Dt(t){return Gu(t)?t:Xr(t)?me(Promise.resolve(t)):T(t)}var Z_={exact:ah,subset:ch},oh={exact:ev,subset:tv,ignored:()=>!0};function Jd(t,e,n){return Z_[n.paths](t.root,e.root,n.matrixParams)&&oh[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function ev(t,e){return Ke(t,e)}function ah(t,e,n){if(!Qt(t.segments,e.segments)||!ps(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!ah(t.children[i],e.children[i],n))return!1;return!0}function tv(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>rh(t[n],e[n]))}function ch(t,e,n){return lh(t,e,e.segments,n)}function lh(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Qt(r,n)||e.hasChildren()||!ps(r,n,i))}else if(t.segments.length===n.length){if(!Qt(t.segments,n)||!ps(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!ch(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Qt(t.segments,r)||!ps(t.segments,r,i)||!t.children[x]?!1:lh(t.children[x],e,s,i)}}function ps(t,e,n){return e.every((i,r)=>oh[n](t[r].parameters,i.parameters))}var pt=class{constructor(e=new V([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=On(this.queryParams),this._queryParamMap}toString(){return rv.serialize(this)}},V=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ms(this)}},Yt=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=On(this.parameters),this._parameterMap}toString(){return dh(this)}};function nv(t,e){return Qt(t,e)&&t.every((n,i)=>Ke(n.parameters,e[i].parameters))}function Qt(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function iv(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===x&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==x&&(n=n.concat(e(r,i)))}),n}var nc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:()=>new Ni,providedIn:"root"});let t=e;return t})(),Ni=class{parse(e){let n=new Na(e);return new pt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ti(e.root,!0)}`,i=av(e.queryParams),r=typeof e.fragment=="string"?`#${sv(e.fragment)}`:"";return`${n}${i}${r}`}},rv=new Ni;function ms(t){return t.segments.map(e=>dh(e)).join("/")}function Ti(t,e){if(!t.hasChildren())return ms(t);if(e){let n=t.children[x]?Ti(t.children[x],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==x&&i.push(`${r}:${Ti(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=iv(t,(i,r)=>r===x?[Ti(t.children[x],!1)]:[`${r}:${Ti(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[x]!=null?`${ms(t)}/${n[0]}`:`${ms(t)}/(${n.join("//")})`}}function uh(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hs(t){return uh(t).replace(/%3B/gi,";")}function sv(t){return encodeURI(t)}function Ma(t){return uh(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gs(t){return decodeURIComponent(t)}function Xd(t){return gs(t.replace(/\+/g,"%20"))}function dh(t){return`${Ma(t.path)}${ov(t.parameters)}`}function ov(t){return Object.entries(t).map(([e,n])=>`;${Ma(e)}=${Ma(n)}`).join("")}function av(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${hs(n)}=${hs(r)}`).join("&"):`${hs(n)}=${hs(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var cv=/^[^\/()?;#]+/;function Sa(t){let e=t.match(cv);return e?e[0]:""}var lv=/^[^\/()?;=#]+/;function uv(t){let e=t.match(lv);return e?e[0]:""}var dv=/^[^=?&#]+/;function hv(t){let e=t.match(dv);return e?e[0]:""}var fv=/^[^&#]+/;function pv(t){let e=t.match(fv);return e?e[0]:""}var Na=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new V([],{}):new V([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[x]=new V(e,n)),i}parseSegment(){let e=Sa(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Yt(gs(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=uv(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Sa(this.remaining);r&&(i=r,this.capture(i))}e[gs(n)]=gs(i)}parseQueryParam(e){let n=hv(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=pv(this.remaining);o&&(i=o,this.capture(i))}let r=Xd(n),s=Xd(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Sa(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new $(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=x);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[x]:new V([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function hh(t){return t.segments.length>0?new V([],{[x]:t}):t}function fh(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=fh(r);if(i===x&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new V(t.segments,e);return mv(n)}function mv(t){if(t.numberOfChildren===1&&t.children[x]){let e=t.children[x];return new V(t.segments.concat(e.segments),e.children)}return t}function Jt(t){return t instanceof pt}function gv(t,e,n=null,i=null){let r=ph(t);return mh(r,e,n,i)}function ph(t){let e;function n(s){let o={};for(let l of s.children){let c=n(l);o[l.outlet]=c}let a=new V(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=hh(i);return e??r}function mh(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Ta(r,r,r,n,i);let s=_v(e);if(s.toRoot())return Ta(r,r,new V([],{}),n,i);let o=vv(s,r,t),a=o.processChildren?Di(o.segmentGroup,o.index,s.commands):_h(o.segmentGroup,o.index,s.commands);return Ta(r,o.segmentGroup,a,n,i)}function _s(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Oi(t){return typeof t=="object"&&t!=null&&t.outlets}function Ta(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;t===e?o=n:o=gh(t,e,n);let a=hh(fh(o));return new pt(a,s,r)}function gh(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=gh(s,e,n)}),new V(t.segments,i)}var vs=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&_s(i[0]))throw new $(4003,!1);let r=i.find(Oi);if(r&&r!==sh(i))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function _v(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new vs(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new vs(n,e,i)}var xn=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function vv(t,e,n){if(t.isAbsolute)return new xn(e,!0,0);if(!n)return new xn(e,!1,NaN);if(n.parent===null)return new xn(n,!0,0);let i=_s(t.commands[0])?0:1,r=n.segments.length-1+i;return yv(n,r,t.numberOfDoubleDots)}function yv(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new $(4005,!1);r=i.segments.length}return new xn(i,!1,r-s)}function bv(t){return Oi(t[0])?t[0].outlets:{[x]:t}}function _h(t,e,n){if(t??=new V([],{}),t.segments.length===0&&t.hasChildren())return Di(t,e,n);let i=wv(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new V(t.segments.slice(0,i.pathIndex),{});return s.children[x]=new V(t.segments.slice(i.pathIndex),t.children),Di(s,0,r)}else return i.match&&r.length===0?new V(t.segments,{}):i.match&&!t.hasChildren()?Oa(t,e,n):i.match?Di(t,0,r):Oa(t,e,n)}function Di(t,e,n){if(n.length===0)return new V(t.segments,{});{let i=bv(n),r={};if(Object.keys(i).some(s=>s!==x)&&t.children[x]&&t.numberOfChildren===1&&t.children[x].segments.length===0){let s=Di(t.children[x],e,n);return new V(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=_h(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new V(t.segments,r)}}function wv(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Oi(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!eh(l,c,o))return s;i+=2}else{if(!eh(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Oa(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Oi(s)){let l=Ev(s.outlets);return new V(i,l)}if(r===0&&_s(n[0])){let l=t.segments[e];i.push(new Yt(l.path,Zd(n[0]))),r++;continue}let o=Oi(s)?s.outlets[x]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&_s(a)?(i.push(new Yt(o,Zd(a))),r+=2):(i.push(new Yt(o,{})),r++)}return new V(i,{})}function Ev(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Oa(new V([],{}),0,i))}),e}function Zd(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function eh(t,e,n){return t==n.path&&Ke(e,n.parameters)}var xi="imperative",de=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(de||{}),ke=class{constructor(e,n){this.id=e,this.url=n}},ki=class extends ke{constructor(e,n,i="imperative",r=null){super(e,n),this.type=de.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},mt=class extends ke{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=de.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xe=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(xe||{}),ka=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(ka||{}),ft=class extends ke{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=de.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xt=class extends ke{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=de.NavigationSkipped}},Pi=class extends ke{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=de.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ys=class extends ke{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=de.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Pa=class extends ke{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=de.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fa=class extends ke{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=de.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},La=class extends ke{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=de.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ja=class extends ke{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=de.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Va=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ua=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ba=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$a=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wa=class{constructor(e){this.snapshot=e,this.type=de.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},za=class{constructor(e){this.snapshot=e,this.type=de.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Fi=class{},kn=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function Cv(t,e){return t.providers&&!t._injector&&(t._injector=md(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Be(t){return t.outlet||x}function Iv(t,e){let n=t.filter(i=>Be(i)===e);return n.push(...t.filter(i=>Be(i)!==e)),n}function $i(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Ga=class{get injector(){return $i(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ts(this.rootInjector),this.attachRef=null}},Ts=(()=>{let e=class e{constructor(i){this.rootInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Ga(this.rootInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(w(En))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bs=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Ha(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=Ha(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=qa(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return qa(e,this._root).map(n=>n.value)}};function Ha(t,e){if(t===e.value)return e;for(let n of e.children){let i=Ha(t,n);if(i)return i}return null}function qa(t,e){if(t===e.value)return[e];for(let n of e.children){let i=qa(t,n);if(i.length)return i.unshift(e),i}return[]}var De=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Dn(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var ws=class extends bs{constructor(e,n){super(e),this.snapshot=n,ic(this,e)}toString(){return this.snapshot.toString()}};function vh(t){let e=Sv(t),n=new pe([new Yt("",{})]),i=new pe({}),r=new pe({}),s=new pe({}),o=new pe(""),a=new Zt(n,i,s,o,r,x,t,e.root);return a.snapshot=e.root,new ws(new De(a,[]),e)}function Sv(t){let e={},n={},i={},r="",s=new Mn([],e,i,r,n,x,t,null,{});return new Cs("",new De(s,[]))}var Zt=class{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(A(c=>c[Bi]))??T(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(A(e=>On(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(A(e=>On(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Es(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:m(m({},e.params),t.params),data:m(m({},e.data),t.data),resolve:m(m(m(m({},t.data),e.data),r?.data),t._resolvedData)}:i={params:m({},t.params),data:m({},t.data),resolve:m(m({},t.data),t._resolvedData??{})},r&&bh(r)&&(i.resolve[Bi]=r.title),i}var Mn=class{get title(){return this.data?.[Bi]}constructor(e,n,i,r,s,o,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=On(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=On(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Cs=class extends bs{constructor(e,n){super(n),this.url=e,ic(this,n)}toString(){return yh(this._root)}};function ic(t,e){e.value._routerState=t,e.children.forEach(n=>ic(t,n))}function yh(t){let e=t.children.length>0?` { ${t.children.map(yh).join(", ")} } `:"";return`${t.value}${e}`}function Aa(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ke(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Ke(e.params,n.params)||t.paramsSubject.next(n.params),X_(e.url,n.url)||t.urlSubject.next(n.url),Ke(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Ka(t,e){let n=Ke(t.params,e.params)&&nv(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||Ka(t.parent,e.parent))}function bh(t){return typeof t.title=="string"||t.title===null}var rc=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=x,this.activateEvents=new le,this.deactivateEvents=new le,this.attachEvents=new le,this.detachEvents=new le,this.parentContexts=_(Ts),this.location=_(fd),this.changeDetector=_(Ht),this.inputBinder=_(sc,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new Ya(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ot]});let t=e;return t})(),Ya=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Zt?this.route:e===Ts?this.childContexts:this.parent.get(e,n)}},sc=new y("");function Tv(t,e,n){let i=Li(t,e._root,n?n._root:void 0);return new ws(i,e)}function Li(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=Av(t,e,n);return new De(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Li(t,a)),o}}let i=Rv(e.value),r=e.children.map(s=>Li(t,s));return new De(i,r)}}function Av(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Li(t,i,r);return Li(t,i)})}function Rv(t){return new Zt(new pe(t.url),new pe(t.params),new pe(t.queryParams),new pe(t.fragment),new pe(t.data),t.outlet,t.component,t)}var ji=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},wh="ngNavigationCancelingError";function Is(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Jt(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Eh(!1,xe.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function Eh(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[wh]=!0,n.cancellationCode=e,n}function Dv(t){return Ch(t)&&Jt(t.url)}function Ch(t){return!!t&&t[wh]}var xv=(t,e,n,i)=>A(r=>(new Qa(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),Qa=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Aa(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=Dn(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Dn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=Dn(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=Dn(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new za(s.value.snapshot))}),e.children.length&&this.forwardEvent(new $a(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(Aa(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Aa(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=r,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,i)}},Ss=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Nn=class{constructor(e,n){this.component=e,this.route=n}};function Mv(t,e,n){let i=t._root,r=e?e._root:null;return Ai(i,r,n,[i.value])}function Nv(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function Ln(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!rd(t)?t:e.get(t):i}function Ai(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Dn(e);return t.children.forEach(o=>{Ov(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Mi(a,n.getContext(o),r)),r}function Ov(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=kv(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ss(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ai(t,e,a?a.children:null,i,r):Ai(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Nn(a.outlet.component,o))}else o&&Mi(e,a,r),r.canActivateChecks.push(new Ss(i)),s.component?Ai(t,null,a?a.children:null,i,r):Ai(t,null,n,i,r);return r}function kv(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Qt(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Qt(t.url,e.url)||!Ke(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ka(t,e)||!Ke(t.queryParams,e.queryParams);case"paramsChange":default:return!Ka(t,e)}}function Mi(t,e,n){let i=Dn(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Mi(o,e.children.getContext(s),n):Mi(o,null,n):Mi(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Nn(e.outlet.component,r)):n.canDeactivateChecks.push(new Nn(null,r)):n.canDeactivateChecks.push(new Nn(null,r))}function Wi(t){return typeof t=="function"}function Pv(t){return typeof t=="boolean"}function Fv(t){return t&&Wi(t.canLoad)}function Lv(t){return t&&Wi(t.canActivate)}function jv(t){return t&&Wi(t.canActivateChild)}function Vv(t){return t&&Wi(t.canDeactivate)}function Uv(t){return t&&Wi(t.canMatch)}function Ih(t){return t instanceof Hu||t?.name==="EmptyError"}var fs=Symbol("INITIAL_VALUE");function Pn(){return Ne(t=>ui(t.map(e=>e.pipe(He(1),Vr(fs)))).pipe(A(e=>{for(let n of e)if(n!==!0){if(n===fs)return fs;if(n===!1||Bv(n))return n}return!0}),Me(e=>e!==fs),He(1)))}function Bv(t){return Jt(t)||t instanceof ji}function $v(t,e){return ye(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?T(P(m({},n),{guardsResult:!0})):Wv(o,i,r,t).pipe(ye(a=>a&&Pv(a)?zv(i,s,t,e):T(a)),A(a=>P(m({},n),{guardsResult:a})))})}function Wv(t,e,n,i){return me(t).pipe(ye(r=>Yv(r.component,r.route,n,e,i)),wt(r=>r!==!0,!0))}function zv(t,e,n,i){return me(e).pipe(bt(r=>Pr(Hv(r.route.parent,i),Gv(r.route,i),Kv(t,r.path,n),qv(t,r.route,n))),wt(r=>r!==!0,!0))}function Gv(t,e){return t!==null&&e&&e(new Wa(t)),T(!0)}function Hv(t,e){return t!==null&&e&&e(new Ba(t)),T(!0)}function qv(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return T(!0);let r=i.map(s=>Fr(()=>{let o=$i(e)??n,a=Ln(s,o),l=Lv(a)?a.canActivate(e,t):Ve(o,()=>a(e,t));return Dt(l).pipe(wt())}));return T(r).pipe(Pn())}function Kv(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Nv(o)).filter(o=>o!==null).map(o=>Fr(()=>{let a=o.guards.map(l=>{let c=$i(o.node)??n,u=Ln(l,c),d=jv(u)?u.canActivateChild(i,t):Ve(c,()=>u(i,t));return Dt(d).pipe(wt())});return T(a).pipe(Pn())}));return T(s).pipe(Pn())}function Yv(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return T(!0);let o=s.map(a=>{let l=$i(e)??r,c=Ln(a,l),u=Vv(c)?c.canDeactivate(t,e,n,i):Ve(l,()=>c(t,e,n,i));return Dt(u).pipe(wt())});return T(o).pipe(Pn())}function Qv(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return T(!0);let s=r.map(o=>{let a=Ln(o,t),l=Fv(a)?a.canLoad(e,n):Ve(t,()=>a(e,n));return Dt(l)});return T(s).pipe(Pn(),Sh(i))}function Sh(t){return $u(ce(e=>{if(typeof e!="boolean")throw Is(t,e)}),A(e=>e===!0))}function Jv(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return T(!0);let s=r.map(o=>{let a=Ln(o,t),l=Uv(a)?a.canMatch(e,n):Ve(t,()=>a(e,n));return Dt(l)});return T(s).pipe(Pn(),Sh(i))}var Vi=class{constructor(e){this.segmentGroup=e||null}},Ui=class extends Error{constructor(e){super(),this.urlTree=e}};function Rn(t){return li(new Vi(t))}function Xv(t){return li(new $(4e3,!1))}function Zv(t){return li(Eh(!1,xe.GuardRejected))}var Ja=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return T(i);if(r.numberOfChildren>1||!r.children[x])return Xv(`${e.redirectTo}`);r=r.children[x]}}applyRedirectCommands(e,n,i,r,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:S}=r,C=Ve(s,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:S}));if(C instanceof pt)throw new Ui(C);n=C}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n[0]==="/")throw new Ui(o);return o}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new pt(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new V(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new $(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},Xa={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ey(t,e,n,i,r){let s=oc(t,e,n);return s.matched?(i=Cv(e,i),Jv(i,e,n,r).pipe(A(o=>o===!0?s:m({},Xa)))):T(s)}function oc(t,e,n){if(e.path==="**")return ty(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?m({},Xa):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||J_)(n,t,e);if(!r)return m({},Xa);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?m(m({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function ty(t){return{matched:!0,parameters:t.length>0?sh(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function th(t,e,n,i){return n.length>0&&ry(t,n,i)?{segmentGroup:new V(e,iy(i,new V(n,t.children))),slicedSegments:[]}:n.length===0&&sy(t,n,i)?{segmentGroup:new V(t.segments,ny(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new V(t.segments,t.children),slicedSegments:n}}function ny(t,e,n,i){let r={};for(let s of n)if(As(t,e,s)&&!i[Be(s)]){let o=new V([],{});r[Be(s)]=o}return m(m({},i),r)}function iy(t,e){let n={};n[x]=e;for(let i of t)if(i.path===""&&Be(i)!==x){let r=new V([],{});n[Be(i)]=r}return n}function ry(t,e,n){return n.some(i=>As(t,e,i)&&Be(i)!==x)}function sy(t,e,n){return n.some(i=>As(t,e,i))}function As(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function oy(t,e,n,i){return Be(t)!==i&&(i===x||!As(e,n,t))?!1:oc(e,t,n).matched}function ay(t,e,n){return e.length===0&&!t.children[n]}var Za=class{};function cy(t,e,n,i,r,s,o="emptyOnly"){return new ec(t,e,n,i,r,o,s).recognize()}var ly=31,ec=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Ja(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=th(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(A(({children:n,rootSnapshot:i})=>{let r=new De(i,n),s=new Cs("",r),o=gv(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new Mn([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),x,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,x,n).pipe(A(i=>({children:i,rootSnapshot:n})),Ge(i=>{if(i instanceof Ui)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Vi?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,s){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,s):this.processSegment(e,n,i,i.segments,r,!0,s).pipe(A(o=>o instanceof De?[o]:[]))}processChildren(e,n,i,r){let s=[];for(let o of Object.keys(i.children))o==="primary"?s.unshift(o):s.push(o);return me(s).pipe(bt(o=>{let a=i.children[o],l=Iv(n,o);return this.processSegmentGroup(e,l,a,o,r)}),jr((o,a)=>(o.push(...a),o)),Yo(null),Zu(),ye(o=>{if(o===null)return Rn(i);let a=Th(o);return uy(a),T(a)}))}processSegment(e,n,i,r,s,o,a){return me(n).pipe(bt(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,i,r,s,o,a).pipe(Ge(c=>{if(c instanceof Vi)return T(null);throw c}))),wt(l=>!!l),Ge(l=>{if(Ih(l))return ay(i,r,s)?T(new Za):Rn(i);throw l}))}processSegmentAgainstRoute(e,n,i,r,s,o,a,l){return oy(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o,l):Rn(r):Rn(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=oc(n,r,s);if(!l)return Rn(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>ly&&(this.allowRedirects=!1));let f=new Mn(s,c,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,nh(r),Be(r),r.component??r._loadedComponent??null,r,ih(r)),p=Es(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let S=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,S).pipe(ye(C=>this.processSegment(e,i,n,C.concat(h),o,!1,a)))}matchSegmentAgainstRoute(e,n,i,r,s,o){let a=ey(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(Ne(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Ne(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new Mn(h,d,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,nh(i),Be(i),i.component??i._loadedComponent??null,i,ih(i)),S=Es(p,o,this.paramsInheritanceStrategy);p.params=Object.freeze(S.params),p.data=Object.freeze(S.data);let{segmentGroup:C,slicedSegments:M}=th(n,h,f,c);if(M.length===0&&C.hasChildren())return this.processChildren(u,c,C,p).pipe(A(ie=>new De(p,ie)));if(c.length===0&&M.length===0)return T(new De(p,[]));let K=Be(i)===s;return this.processSegment(u,c,C,M,K?x:s,!0,p).pipe(A(ie=>new De(p,ie instanceof De?[ie]:[])))}))):Rn(n)))}getChildConfig(e,n,i){return n.children?T({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?T({routes:n._loadedRoutes,injector:n._loadedInjector}):Qv(e,n,i,this.urlSerializer).pipe(ye(r=>r?this.configLoader.loadChildren(e,n).pipe(ce(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Zv(n))):T({routes:[],injector:e})}};function uy(t){t.sort((e,n)=>e.value.outlet===x?-1:n.value.outlet===x?1:e.value.outlet.localeCompare(n.value.outlet))}function dy(t){let e=t.value.routeConfig;return e&&e.path===""}function Th(t){let e=[],n=new Set;for(let i of t){if(!dy(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=Th(i.children);e.push(new De(i.value,r))}return e.filter(i=>!n.has(i))}function nh(t){return t.data||{}}function ih(t){return t.resolve||{}}function hy(t,e,n,i,r,s){return ye(o=>cy(t,e,n,i,o.extractedUrl,r,s).pipe(A(({state:a,tree:l})=>P(m({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function fy(t,e){return ye(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return T(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of Ah(l))o.add(c);let a=0;return me(o).pipe(bt(l=>s.has(l)?py(l,i,t,e):(l.data=Es(l,l.parent,t).resolve,T(void 0))),ce(()=>a++),Jo(1),ye(l=>a===o.size?T(n):yt))})}function Ah(t){let e=t.children.map(n=>Ah(n)).flat();return[t,...e]}function py(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!bh(r)&&(s[Bi]=r.title),my(s,t,e,i).pipe(A(o=>(t._resolvedData=o,t.data=Es(t,t.parent,n).resolve,null)))}function my(t,e,n,i){let r=xa(t);if(r.length===0)return T({});let s={};return me(r).pipe(ye(o=>gy(t[o],e,n,i).pipe(wt(),ce(a=>{if(a instanceof ji)throw Is(new Ni,a);s[o]=a}))),Jo(1),Qu(s),Ge(o=>Ih(o)?yt:li(o)))}function gy(t,e,n,i){let r=$i(e)??i,s=Ln(t,r),o=s.resolve?s.resolve(e,n):Ve(r,()=>s(e,n));return Dt(o)}function Ra(t){return Ne(e=>{let n=t(e);return n?me(n).pipe(A(()=>e)):T(e)})}var Rh=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===x);return r}getResolvedTitleForRoute(i){return i.data[Bi]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:()=>_(_y),providedIn:"root"});let t=e;return t})(),_y=(()=>{let e=class e extends Rh{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(w(Qd))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ac=new y("",{providedIn:"root",factory:()=>({})}),vy=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Z({type:e,selectors:[["ng-component"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(r,s){r&1&&N(0,"router-outlet")},dependencies:[rc],encapsulation:2});let t=e;return t})();function cc(t){let e=t.children&&t.children.map(cc),n=e?P(m({},t),{children:e}):m({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==x&&(n.component=vy),n}var lc=new y(""),yy=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=_(aa)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return T(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Dt(i.loadComponent()).pipe(A(Dh),ce(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Bt(()=>{this.componentLoaders.delete(i)})),s=new Ho(r,()=>new fe).pipe(Go());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return T({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=by(r,this.compiler,i,this.onLoadEndListener).pipe(Bt(()=>{this.childrenLoaders.delete(r)})),a=new Ho(o,()=>new fe).pipe(Go());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function by(t,e,n,i){return Dt(t.loadChildren()).pipe(A(Dh),ye(r=>r instanceof pd||Array.isArray(r)?T(r):me(e.compileModuleAsync(r))),A(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(lc,[],{optional:!0,self:!0}).flat()),{routes:o.map(cc),injector:s}}))}function wy(t){return t&&typeof t=="object"&&"default"in t}function Dh(t){return wy(t)?t.default:t}var uc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:()=>_(Ey),providedIn:"root"});let t=e;return t})(),Ey=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cy=new y("");var Iy=new y(""),Sy=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fe,this.transitionAbortSubject=new fe,this.configLoader=_(yy),this.environmentInjector=_(En),this.urlSerializer=_(nc),this.rootContexts=_(Ts),this.location=_(es),this.inputBindingEnabled=_(sc,{optional:!0})!==null,this.titleStrategy=_(Rh),this.options=_(ac,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=_(uc),this.createViewTransition=_(Cy,{optional:!0}),this.navigationErrorHandler=_(Iy,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>T(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Va(s)),r=s=>this.events.next(new Ua(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(P(m(m({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new pe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Me(o=>o.id!==0),A(o=>P(m({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ne(o=>{let a=!1,l=!1;return T(o).pipe(Ne(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",xe.SupersededByNewNavigation),yt;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?P(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Xt(c.id,this.urlSerializer.serialize(c.rawUrl),h,ka.IgnoredSameUrlNavigation)),c.resolve(!1),yt}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return T(c).pipe(Ne(h=>{let f=this.transitions?.getValue();return this.events.next(new ki(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?yt:Promise.resolve(h)}),hy(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),ce(h=>{o.targetSnapshot=h.targetSnapshot,o.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=P(m({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new ys(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:S,extras:C}=c,M=new ki(h,this.urlSerializer.serialize(f),p,S);this.events.next(M);let K=vh(this.rootComponentType).snapshot;return this.currentTransition=o=P(m({},c),{targetSnapshot:K,urlAfterRedirects:f,extras:P(m({},C),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,T(o)}else{let h="";return this.events.next(new Xt(c.id,this.urlSerializer.serialize(c.extractedUrl),h,ka.IgnoredByUrlHandlingStrategy)),c.resolve(!1),yt}}),ce(c=>{let u=new Pa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),A(c=>(this.currentTransition=o=P(m({},c),{guards:Mv(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),$v(this.environmentInjector,c=>this.events.next(c)),ce(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Is(this.urlSerializer,c.guardsResult);let u=new Fa(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Me(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",xe.GuardRejected),!1)),Ra(c=>{if(c.guards.canActivateChecks.length)return T(c).pipe(ce(u=>{let d=new La(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Ne(u=>{let d=!1;return T(u).pipe(fy(this.paramsInheritanceStrategy,this.environmentInjector),ce({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",xe.NoDataFromResolver)}}))}),ce(u=>{let d=new ja(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),Ra(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(ce(f=>{d.component=f}),A(()=>{})));for(let f of d.children)h.push(...u(f));return h};return ui(u(c.targetSnapshot.root)).pipe(Yo(null),He(1))}),Ra(()=>this.afterPreactivation()),Ne(()=>{let{currentSnapshot:c,targetSnapshot:u}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?me(d).pipe(A(()=>o)):T(o)}),A(c=>{let u=Tv(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=P(m({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,o}),ce(()=>{this.events.next(new Fi)}),xv(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),He(1),ce({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new mt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Ur(this.transitionAbortSubject.pipe(ce(c=>{throw c}))),Bt(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",xe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ge(c=>{if(l=!0,Ch(c))this.events.next(new ft(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),Dv(c)?this.events.next(new kn(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let u=new Pi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let d=Ve(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof ji){let{message:h,cancellationCode:f}=Is(this.urlSerializer,d);this.events.next(new ft(o.id,this.urlSerializer.serialize(o.extractedUrl),h,f)),this.events.next(new kn(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=i.errorHandler(c);o.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return yt}))}))}cancelNavigationTransition(i,r,s){let o=new ft(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let i=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return i.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ty(t){return t!==xi}var Ay=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:()=>_(Ry),providedIn:"root"});let t=e;return t})(),tc=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Ry=(()=>{let e=class e extends tc{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),xh=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:()=>_(Dy),providedIn:"root"});let t=e;return t})(),Dy=(()=>{let e=class e extends xh{constructor(){super(...arguments),this.location=_(es),this.urlSerializer=_(nc),this.options=_(ac,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=_(uc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pt,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=vh(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ki)this.stateMemento=this.createStateMemento();else if(i instanceof Xt)this.rawUrlTree=r.initialUrl;else if(i instanceof ys){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??s,r)}}else i instanceof Fi?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):i instanceof ft&&(i.code===xe.GuardRejected||i.code===xe.NoDataFromResolver)?this.restoreHistory(r):i instanceof Pi?this.restoreHistory(r,!0):i instanceof mt&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=i instanceof pt?this.urlSerializer.serialize(i):i;if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=m(m({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=m(m({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ri=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ri||{});function xy(t,e){t.events.pipe(Me(n=>n instanceof mt||n instanceof ft||n instanceof Pi||n instanceof Xt),A(n=>n instanceof mt||n instanceof Xt?Ri.COMPLETE:(n instanceof ft?n.code===xe.Redirect||n.code===xe.SupersededByNewNavigation:!1)?Ri.REDIRECTING:Ri.FAILED),Me(n=>n!==Ri.REDIRECTING),He(1)).subscribe(()=>{e()})}function My(t){throw t}var Ny={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Oy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ye=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=_(Jr),this.stateManager=_(xh),this.options=_(ac,{optional:!0})||{},this.pendingTasks=_(Br),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=_(Sy),this.urlSerializer=_(nc),this.location=_(es),this.urlHandlingStrategy=_(uc),this._events=new fe,this.errorHandler=this.options.errorHandler||My,this.navigated=!1,this.routeReuseStrategy=_(Ay),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=_(lc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!_(sc,{optional:!0}),this.eventsSubscription=new Bu,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ft&&r.code!==xe.Redirect&&r.code!==xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof mt)this.navigated=!0;else if(r instanceof kn){let a=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c=m({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ty(s.source)},a);this.scheduleNavigation(l,xi,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Py(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=m({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(cc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=m(m({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=s?s.snapshot:this.routerState.snapshot.root;h=ph(f)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),h=this.currentUrlTree.root}return mh(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Jt(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,xi,null,r)}navigate(i,r={skipLocationChange:!1}){return ky(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=m({},Ny):r===!1?s=m({},Oy):s=r,Jt(i))return Jd(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Jd(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});let d=this.pendingTasks.add();return xy(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ky(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function Py(t){return!(t instanceof Fi)&&!(t instanceof kn)}var Fn=(()=>{let e=class e{constructor(i,r,s,o,a,l){this.router=i,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new fe,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=i.events.subscribe(u=>{u instanceof mt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(i){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",i)}ngOnChanges(i){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(i){i==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Jt(i)?this.routerLinkInput=i:this.routerLinkInput=Array.isArray(i)?i:[i],this.setTabIndexIfNotOnNativeEl("0"))}onClick(i,r,s,o,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(i!==0||r||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let i=this.urlTree;this.href=i!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(i)):null;let r=this.href===null?null:dd(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(i,r){let s=this.renderer,o=this.el.nativeElement;r!==null?s.setAttribute(o,i,r):s.removeAttribute(o,i)}get urlTree(){return this.routerLinkInput===null?null:Jt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(E(Ye),E(Zt),ad("tabindex"),E(Et),E(Te),E(_i))},e.\u0275dir=Y({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,s){r&1&&U("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Gt("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",It],skipLocationChange:[2,"skipLocationChange","skipLocationChange",It],replaceUrl:[2,"replaceUrl","replaceUrl",It],routerLink:"routerLink"},standalone:!0,features:[zr,ot]});let t=e;return t})(),Rs=(()=>{let e=class e{get isActive(){return this._isActive}constructor(i,r,s,o,a){this.router=i,this.element=r,this.renderer=s,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new le,this.routerEventsSubscription=i.events.subscribe(l=>{l instanceof mt&&this.update()})}ngAfterContentInit(){T(this.links.changes,T(null)).pipe(qo()).subscribe(i=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let i=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=me(i).pipe(qo()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(i){let r=Array.isArray(i)?i:i.split(" ");this.classes=r.filter(s=>!!s)}ngOnChanges(i){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let i=this.hasActiveLinks();this.classes.forEach(r=>{i?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),i&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==i&&(this._isActive=i,this.cdr.markForCheck(),this.isActiveChange.emit(i))})}isLinkActive(i){let r=Fy(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return s=>{let o=s.urlTree;return o?i.isActive(o,r):!1}}hasActiveLinks(){let i=this.isLinkActive(this.router);return this.link&&i(this.link)||this.links.some(i)}};e.\u0275fac=function(r){return new(r||e)(E(Ye),E(Te),E(Et),E(Ht),E(Fn,8))},e.\u0275dir=Y({type:e,selectors:[["","routerLinkActive",""]],contentQueries:function(r,s,o){if(r&1&&gd(o,Fn,5),r&2){let a;ra(a=sa())&&(s.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[ot]});let t=e;return t})();function Fy(t){return!!t.paths}var Ly=new y("");function Mh(t,...e){return Oe([{provide:lc,multi:!0,useValue:t},[],{provide:Zt,useFactory:jy,deps:[Ye]},{provide:oa,multi:!0,useFactory:Vy},e.map(n=>n.\u0275providers)])}function jy(t){return t.routerState.root}function Vy(){let t=_(hi);return e=>{let n=t.get(Zr);if(e!==n.components[0])return;let i=t.get(Ye),r=t.get(Uy);t.get(By)===1&&i.initialNavigation(),t.get($y,null,Xo.Optional)?.setUpPreloading(),t.get(Ly,null,Xo.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Uy=new y("",{factory:()=>new fe}),By=new y("",{providedIn:"root",factory:()=>1});var $y=new y("");var Uh=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(E(Et),E(Te))},e.\u0275dir=Y({type:e});let t=e;return t})(),gc=(()=>{let e=class e extends Uh{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275dir=Y({type:e,features:[qe]});let t=e;return t})(),Ki=new y("");var Wy={provide:Ki,useExisting:$t(()=>Pe),multi:!0};function zy(){let t=An()?An().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var Gy=new y(""),Pe=(()=>{let e=class e extends Uh{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zy())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(E(Et),E(Te),E(Gy,8))},e.\u0275dir=Y({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&U("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ut([Wy]),qe]});let t=e;return t})();function xt(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function Bh(t){return t!=null&&typeof t.length=="number"}var _c=new y(""),vc=new y(""),Hy=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,he=class{static min(e){return qy(e)}static max(e){return Ky(e)}static required(e){return Yy(e)}static requiredTrue(e){return Qy(e)}static email(e){return Jy(e)}static minLength(e){return Xy(e)}static maxLength(e){return Zy(e)}static pattern(e){return eb(e)}static nullValidator(e){return $h(e)}static compose(e){return Kh(e)}static composeAsync(e){return Qh(e)}};function qy(t){return e=>{if(xt(e.value)||xt(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function Ky(t){return e=>{if(xt(e.value)||xt(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Yy(t){return xt(t.value)?{required:!0}:null}function Qy(t){return t.value===!0?null:{required:!0}}function Jy(t){return xt(t.value)||Hy.test(t.value)?null:{email:!0}}function Xy(t){return e=>xt(e.value)||!Bh(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Zy(t){return e=>Bh(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function eb(t){if(!t)return $h;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),i=>{if(xt(i.value))return null;let r=i.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function $h(t){return null}function Wh(t){return t!=null}function zh(t){return Xr(t)?me(t):t}function Gh(t){let e={};return t.forEach(n=>{e=n!=null?m(m({},e),n):e}),Object.keys(e).length===0?null:e}function Hh(t,e){return e.map(n=>n(t))}function tb(t){return!t.validate}function qh(t){return t.map(e=>tb(e)?e:n=>e.validate(n))}function Kh(t){if(!t)return null;let e=t.filter(Wh);return e.length==0?null:function(n){return Gh(Hh(n,e))}}function Yh(t){return t!=null?Kh(qh(t)):null}function Qh(t){if(!t)return null;let e=t.filter(Wh);return e.length==0?null:function(n){let i=Hh(n,e).map(zh);return qu(i).pipe(A(Gh))}}function Jh(t){return t!=null?Qh(qh(t)):null}function Nh(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Xh(t){return t._rawValidators}function Zh(t){return t._rawAsyncValidators}function hc(t){return t?Array.isArray(t)?t:[t]:[]}function xs(t,e){return Array.isArray(t)?t.includes(e):t===e}function Oh(t,e){let n=hc(e);return hc(t).forEach(r=>{xs(n,r)||n.push(r)}),n}function kh(t,e){return hc(e).filter(n=>!xs(t,n))}var Ms=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Yh(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Jh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},en=class extends Ms{get formDirective(){return null}get path(){return null}},tn=class extends Ms{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ns=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},nb={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},JT=P(m({},nb),{"[class.ng-submitted]":"isSubmitted"}),Qe=(()=>{let e=class e extends Ns{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(E(tn,2))},e.\u0275dir=Y({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Sn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[qe]});let t=e;return t})(),Un=(()=>{let e=class e extends Ns{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(E(en,10))},e.\u0275dir=Y({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Sn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[qe]});let t=e;return t})();var zi="VALID",Ds="INVALID",jn="PENDING",Gi="DISABLED",Mt=class{},Os=class extends Mt{constructor(e,n){super(),this.value=e,this.source=n}},Hi=class extends Mt{constructor(e,n){super(),this.pristine=e,this.source=n}},qi=class extends Mt{constructor(e,n){super(),this.touched=e,this.source=n}},Vn=class extends Mt{constructor(e,n){super(),this.status=e,this.source=n}},fc=class extends Mt{constructor(e){super(),this.source=e}},pc=class extends Mt{constructor(e){super(),this.source=e}};function ef(t){return(Ls(t)?t.validators:t)||null}function ib(t){return Array.isArray(t)?Yh(t):t||null}function tf(t,e){return(Ls(e)?e.asyncValidators:t)||null}function rb(t){return Array.isArray(t)?Jh(t):t||null}function Ls(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function sb(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new $(1e3,"");if(!i[n])throw new $(1001,"")}function ob(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new $(1002,"")})}var ks=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=dt(()=>this.statusReactive()),this.statusReactive=Ct(void 0),this._pristine=dt(()=>this.pristineReactive()),this.pristineReactive=Ct(!0),this._touched=dt(()=>this.touchedReactive()),this.touchedReactive=Ct(!1),this._events=new fe,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ht(this.statusReactive)}set status(e){ht(()=>this.statusReactive.set(e))}get valid(){return this.status===zi}get invalid(){return this.status===Ds}get pending(){return this.status==jn}get disabled(){return this.status===Gi}get enabled(){return this.status!==Gi}get pristine(){return ht(this.pristineReactive)}set pristine(e){ht(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ht(this.touchedReactive)}set touched(e){ht(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Oh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Oh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(kh(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(kh(e,this._rawAsyncValidators))}hasValidator(e){return xs(this._rawValidators,e)}hasAsyncValidator(e){return xs(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(P(m({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new qi(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new qi(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(P(m({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new Hi(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new Hi(!0,i))}markAsPending(e={}){this.status=jn;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Vn(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(P(m({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Gi,this.errors=null,this._forEachChild(r=>{r.disable(P(m({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Os(this.value,i)),this._events.next(new Vn(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(m({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=zi,this._forEachChild(i=>{i.enable(P(m({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(P(m({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===zi||this.status===jn)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Os(this.value,n)),this._events.next(new Vn(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(P(m({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Gi:zi}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=jn,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=zh(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Vn(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Gi:this.errors?Ds:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jn)?jn:this._anyControlsHaveStatus(Ds)?Ds:zi}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new Hi(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new qi(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ls(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=ib(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=rb(this._rawAsyncValidators)}},Nt=class extends ks{constructor(e,n,i){super(ef(n),tf(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){ob(this,!0,e),Object.keys(e).forEach(i=>{sb(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var js=new y("CallSetDisabledState",{providedIn:"root",factory:()=>Vs}),Vs="always";function nf(t,e){return[...e.path,t]}function mc(t,e,n=Vs){yc(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),cb(t,e),ub(t,e),lb(t,e),ab(t,e)}function Ph(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),Fs(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Ps(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function ab(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function yc(t,e){let n=Xh(t);e.validator!==null?t.setValidators(Nh(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=Zh(t);e.asyncValidator!==null?t.setAsyncValidators(Nh(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Ps(e._rawValidators,r),Ps(e._rawAsyncValidators,r)}function Fs(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=Xh(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let r=Zh(t);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,t.setAsyncValidators(s))}}}let i=()=>{};return Ps(e._rawValidators,i),Ps(e._rawAsyncValidators,i),n}function cb(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&rf(t,e)})}function lb(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&rf(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function rf(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function ub(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function db(t,e){t==null,yc(t,e)}function hb(t,e){return Fs(t,e)}function sf(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fb(t){return Object.getPrototypeOf(t.constructor)===gc}function pb(t,e){t._syncPendingControls(),e.forEach(n=>{let i=n.control;i.updateOn==="submit"&&i._pendingChange&&(n.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function of(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===Pe?n=s:fb(s)?i=s:r=s}),r||i||n||null}function mb(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Fh(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function Lh(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var _e=class extends ks{constructor(e=null,n,i){super(ef(n),tf(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ls(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Lh(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Fh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Fh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Lh(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var gb=t=>t instanceof _e;var _b={provide:tn,useExisting:$t(()=>Yi)},jh=Promise.resolve(),Yi=(()=>{let e=class e extends tn{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new _e,this._registered=!1,this.name="",this.update=new le,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=of(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),sf(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mc(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){jh.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&It(r);jh.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?nf(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(E(en,9),E(_c,10),E(vc,10),E(Ki,10),E(Ht,8),E(js,8))},e.\u0275dir=Y({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ut([_b]),qe,ot]});let t=e;return t})(),Bn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Y({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})();var af=new y("");var vb={provide:en,useExisting:$t(()=>nn)},nn=(()=>{let e=class e extends en{get submitted(){return ht(this._submittedReactive)}set submitted(i){this._submittedReactive.set(i)}constructor(i,r,s){super(),this.callSetDisabledState=s,this._submitted=dt(()=>this._submittedReactive()),this._submittedReactive=Ct(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new le,this._setValidators(i),this._setAsyncValidators(r)}ngOnChanges(i){this._checkFormPresent(),i.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fs(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(i){let r=this.form.get(i.path);return mc(r,i,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(i),r}getControl(i){return this.form.get(i.path)}removeControl(i){Ph(i.control||null,i,!1),mb(this.directives,i)}addFormGroup(i){this._setUpFormContainer(i)}removeFormGroup(i){this._cleanUpFormContainer(i)}getFormGroup(i){return this.form.get(i.path)}addFormArray(i){this._setUpFormContainer(i)}removeFormArray(i){this._cleanUpFormContainer(i)}getFormArray(i){return this.form.get(i.path)}updateModel(i,r){this.form.get(i.path).setValue(r)}onSubmit(i){return this._submittedReactive.set(!0),pb(this.form,this.directives),this.ngSubmit.emit(i),this.form._events.next(new fc(this.control)),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this._submittedReactive.set(!1),this.form._events.next(new pc(this.form))}_updateDomValue(){this.directives.forEach(i=>{let r=i.control,s=this.form.get(i.path);r!==s&&(Ph(r||null,i),gb(s)&&(mc(s,i,this.callSetDisabledState),i.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(i){let r=this.form.get(i.path);db(r,i),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(i){if(this.form){let r=this.form.get(i.path);r&&hb(r,i)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){yc(this.form,this),this._oldForm&&Fs(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(E(_c,10),E(vc,10),E(js,8))},e.\u0275dir=Y({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,s){r&1&&U("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ut([vb]),qe,ot]});let t=e;return t})();var yb={provide:tn,useExisting:$t(()=>rn)},rn=(()=>{let e=class e extends tn{set isDisabled(i){}constructor(i,r,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new le,this._ngModelWarningSent=!1,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=of(this,o)}ngOnChanges(i){this._added||this._setUpControl(),sf(i,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}get path(){return nf(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(E(en,13),E(_c,10),E(vc,10),E(Ki,10),E(af,8))},e.\u0275dir=Y({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ut([yb]),qe,ot]});let t=e;return t})(),bb={provide:Ki,useExisting:$t(()=>Us),multi:!0};function cf(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function wb(t){return t.split(":")[0]}var Us=(()=>{let e=class e extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=cf(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=wb(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275dir=Y({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&U("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ut([bb]),qe]});let t=e;return t})(),lf=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(cf(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(E(Te),E(Et),E(Us,9))},e.\u0275dir=Y({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),Eb={provide:Ki,useExisting:$t(()=>uf),multi:!0};function Vh(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function Cb(t){return t.split(":")[0]}var uf=(()=>{let e=class e extends gc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);s.push(u)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);s.push(u)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=Cb(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275dir=Y({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&U("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ut([Eb]),qe]});let t=e;return t})(),df=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Vh(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Vh(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(E(Te),E(Et),E(uf,9))},e.\u0275dir=Y({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var hf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=se({type:e}),e.\u0275inj=re({});let t=e;return t})();var Bs=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:js,useValue:i.callSetDisabledState??Vs}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=se({type:e}),e.\u0275inj=re({imports:[hf]});let t=e;return t})(),$n=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:af,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:js,useValue:i.callSetDisabledState??Vs}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=se({type:e}),e.\u0275inj=re({imports:[hf]});let t=e;return t})();function $s(t){return t!=null&&`${t}`!="false"}function bc(t){return Array.isArray(t)?t:[t]}function wc(t){return t instanceof Te?t.nativeElement:t}var Ec;try{Ec=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Ec=!1}var Xi=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?Ad(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Ec)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(w(lt))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ji;function Ib(){if(Ji==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ji=!0}))}finally{Ji=Ji||!1}return Ji}function Cc(t){return Ib()?t:!!t.capture}function ff(t){return t.composedPath?t.composedPath()[0]:t.target}function pf(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}var gf=new Set,sn,Sb=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Ab}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&Tb(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(w(Xi),w(pi,8))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Tb(t,e){if(!gf.has(t))try{sn||(sn=document.createElement("style"),e&&sn.setAttribute("nonce",e),sn.setAttribute("type","text/css"),document.head.appendChild(sn)),sn.sheet&&(sn.sheet.insertRule(`@media ${t} {body{ }}`,0),gf.add(t))}catch(n){console.error(n)}}function Ab(t){return{matches:t==="all"||t==="",media:t,addListener:()=>{},removeListener:()=>{}}}var vf=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new fe}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return _f(bc(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=_f(bc(i)).map(a=>this._registerQuery(a).observable),o=ui(s);return o=Pr(o.pipe(He(1)),o.pipe(nd(1),Ku(0))),o.pipe(A(a=>{let l={matches:!1,breakpoints:{}};return a.forEach(({matches:c,query:u})=>{l.matches=l.matches||c,l.breakpoints[u]=c}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new je(a=>{let l=c=>this._zone.run(()=>a.next(c));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Vr(r),A(({matches:a})=>({query:i,matches:a})),Ur(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(w(Sb),w(ue))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _f(t){return t.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}function wf(t){return t.buttons===0||t.detail===0}function Ef(t){let e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var on=function(t){return t[t.NONE=0]="NONE",t[t.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",t[t.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",t}(on||{}),yf="cdk-high-contrast-black-on-white",bf="cdk-high-contrast-white-on-black",Ic="cdk-high-contrast-active",Cf=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=_(vf).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return on.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return on.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return on.BLACK_ON_WHITE}return on.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Ic,yf,bf),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===on.BLACK_ON_WHITE?i.add(Ic,yf):r===on.WHITE_ON_BLACK&&i.add(Ic,bf)}}};e.\u0275fac=function(r){return new(r||e)(w(Xi),w(te))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Sc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=se({type:e}),e.\u0275inj=re({});let t=e;return t})();function xb(){return!0}var Mb=new y("mat-sanity-checks",{providedIn:"root",factory:xb}),Rc=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return pf()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(w(Cf),w(Mb,8),w(te))},e.\u0275mod=se({type:e}),e.\u0275inj=re({imports:[Sc,Sc]});let t=e;return t})();var Fe=function(t){return t[t.FADING_IN=0]="FADING_IN",t[t.VISIBLE=1]="VISIBLE",t[t.FADING_OUT=2]="FADING_OUT",t[t.HIDDEN=3]="HIDDEN",t}(Fe||{}),Tc=class{constructor(e,n,i,r=!1){this._renderer=e,this.element=n,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=Fe.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},If=Cc({passive:!0,capture:!0}),Ac=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let n=ff(e);n&&this._events.get(e.type)?.forEach((i,r)=>{(r===n||r.contains(n))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,i,r){let s=this._events.get(n);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(n,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,If)})}removeHandler(e,n,i){let r=this._events.get(e);if(!r)return;let s=r.get(n);s&&(s.delete(i),s.size===0&&r.delete(n),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,If)))}},Sf={enterDuration:225,exitDuration:150},Nb=800,Tf=Cc({passive:!0,capture:!0}),Af=["mousedown","touchstart"],Rf=["mouseup","mouseleave","touchend","touchcancel"],Zi=class Zi{constructor(e,n,i,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=wc(i))}fadeInRipple(e,n,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=m(m({},Sf),i.animation);i.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);let o=i.radius||Ob(e,n,r),a=e-r.left,l=n-r.top,c=s.enterDuration,u=document.createElement("div");u.classList.add("mat-ripple-element"),u.style.left=`${a-o}px`,u.style.top=`${l-o}px`,u.style.height=`${o*2}px`,u.style.width=`${o*2}px`,i.color!=null&&(u.style.backgroundColor=i.color),u.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(u);let d=window.getComputedStyle(u),h=d.transitionProperty,f=d.transitionDuration,p=h==="none"||f==="0s"||f==="0s, 0s"||r.width===0&&r.height===0,S=new Tc(this,u,i,p);u.style.transform="scale3d(1, 1, 1)",S.state=Fe.FADING_IN,i.persistent||(this._mostRecentTransientRipple=S);let C=null;return!p&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let M=()=>{C&&(C.fallbackTimer=null),clearTimeout(ie),this._finishRippleTransition(S)},K=()=>this._destroyRipple(S),ie=setTimeout(K,c+100);u.addEventListener("transitionend",M),u.addEventListener("transitioncancel",K),C={onTransitionEnd:M,onTransitionCancel:K,fallbackTimer:ie}}),this._activeRipples.set(S,C),(p||!c)&&this._finishRippleTransition(S),S}fadeOutRipple(e){if(e.state===Fe.FADING_OUT||e.state===Fe.HIDDEN)return;let n=e.element,i=m(m({},Sf),e.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",e.state=Fe.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let n=wc(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,Af.forEach(i=>{Zi._eventManager.addHandler(this._ngZone,i,n,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{Rf.forEach(n=>{this._triggerElement.addEventListener(n,this,Tf)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===Fe.FADING_IN?this._startFadeOutTransition(e):e.state===Fe.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let n=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=Fe.VISIBLE,!i&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=Fe.HIDDEN,n!==null&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel),n.fallbackTimer!==null&&clearTimeout(n.fallbackTimer)),e.element.remove()}_onMousedown(e){let n=wf(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+Nb;!this._target.rippleDisabled&&!n&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Ef(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let n=e.changedTouches;if(n)for(let i=0;i<n.length;i++)this.fadeInRipple(n[i].clientX,n[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let n=e.state===Fe.VISIBLE||e.config.terminateOnPointerUp&&e.state===Fe.FADING_IN;!e.config.persistent&&n&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(Af.forEach(n=>Zi._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&(Rf.forEach(n=>e.removeEventListener(n,this,Tf)),this._pointerUpEventsRegistered=!1))}};Zi._eventManager=new Ac;var Df=Zi;function Ob(t,e,n){let i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}var xf=(()=>{let e=class e{constructor(){this._vertical=!1,this._inset=!1}get vertical(){return this._vertical}set vertical(i){this._vertical=$s(i)}get inset(){return this._inset}set inset(i){this._inset=$s(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Z({type:e,selectors:[["mat-divider"]],hostAttrs:["role","separator",1,"mat-divider"],hostVars:7,hostBindings:function(r,s){r&2&&(Gt("aria-orientation",s.vertical?"vertical":"horizontal"),Sn("mat-divider-vertical",s.vertical)("mat-divider-horizontal",!s.vertical)("mat-divider-inset",s.inset))},inputs:{vertical:"vertical",inset:"inset"},standalone:!0,features:[ee],decls:0,vars:0,template:function(r,s){},styles:[".mat-divider{display:block;margin:0;border-top-style:solid;border-top-color:var(--mat-divider-color);border-top-width:var(--mat-divider-width)}.mat-divider.mat-divider-vertical{border-top:0;border-right-style:solid;border-right-color:var(--mat-divider-color);border-right-width:var(--mat-divider-width)}.mat-divider.mat-divider-inset{margin-left:80px}[dir=rtl] .mat-divider.mat-divider-inset{margin-left:auto;margin-right:80px}"],encapsulation:2,changeDetection:0});let t=e;return t})(),Mf=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=se({type:e}),e.\u0275inj=re({imports:[Rc,Rc]});let t=e;return t})();var Pb=new TextEncoder,Ws=new TextDecoder,iR=2**32;var Fb=t=>{let e=atob(t),n=new Uint8Array(e.length);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Nf=t=>{let e=t;e instanceof Uint8Array&&(e=Ws.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return Fb(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}};var Dc=class extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(e){super(e),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}};var Je=class extends Dc{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}};function Vb(t){return typeof t=="object"&&t!==null}function xc(t){if(!Vb(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}var Of=Nf;function Mc(t){if(typeof t!="string")throw new Je("JWTs must use Compact JWS serialization, JWT must be a string");let{1:e,length:n}=t.split(".");if(n===5)throw new Je("Only JWTs using Compact JWS serialization can be decoded");if(n!==3)throw new Je("Invalid JWT");if(!e)throw new Je("JWTs must contain a payload");let i;try{i=Of(e)}catch{throw new Je("Failed to base64url decode the payload")}let r;try{r=JSON.parse(Ws.decode(i))}catch{throw new Je("Failed to parse the decoded payload as JSON")}if(!xc(r))throw new Je("Invalid JWT Claims Set");return r}var Xe=class{firstName;lastName;email;sex;objectId;provider;constructor(e,n,i,r,s,o){this.firstName=e,this.lastName=n,this.email=i,this.sex=r,this.objectId=s,this.provider=o}getFirstName(){return this.firstName}getLastName(){return this.lastName}getEmail(){return this.email}getSex(){return this.sex}};function Nc(t,e){let n=!e?.manualCleanup;n&&!e?.injector&&od(Nc);let i=n?e?.injector?.get(ea)??_(ea):null,r=$b(e?.equal),s;e?.requireSync?s=Ct({kind:0},{equal:r}):s=Ct({kind:1,value:e?.initialValue},{equal:r});let o=t.subscribe({next:a=>s.set({kind:1,value:a}),error:a=>{if(e?.rejectErrors)throw a;s.set({kind:2,error:a})}});return i?.onDestroy(o.unsubscribe.bind(o)),dt(()=>{let a=s();switch(a.kind){case 1:return a.value;case 2:throw a.error;case 0:throw new $(601,"`toSignal()` called with `requireSync` but `Observable` did not emit synchronously.")}},{equal:e?.equal})}function $b(t=Object.is){return(e,n)=>e.kind===1&&n.kind===1&&t(e.value,n.value)}var Fc={};function an(t,e){if(Fc[t]=(Fc[t]||0)+1,typeof e=="function")return Oc(t,(...i)=>P(m({},e(...i)),{type:t}));switch(e?e._as:"empty"){case"empty":return Oc(t,()=>({type:t}));case"props":return Oc(t,i=>P(m({},i),{type:t}));default:throw new Error("Unexpected config.")}}function Ys(){return{_as:"props",_p:void 0}}function Oc(t,e){return Object.defineProperty(e,"type",{value:t,writable:!1})}var Yf="@ngrx/store/init",Wn=(()=>{let e=class e extends pe{constructor(){super({type:Yf})}next(i){if(typeof i=="function")throw new TypeError(`
        Dispatch expected an object, instead it received a function.
        If you're using the createAction function, make sure to invoke the function
        before dispatching the action. For example, someAction should be someAction().`);if(typeof i>"u")throw new TypeError("Actions must be objects");if(typeof i.type>"u")throw new TypeError("Actions must have a type property");super.next(i)}complete(){}ngOnDestroy(){super.complete()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Wb=[Wn],Qf=new y("@ngrx/store Internal Root Guard"),kf=new y("@ngrx/store Internal Initial State"),Uc=new y("@ngrx/store Initial State"),Jf=new y("@ngrx/store Reducer Factory"),Pf=new y("@ngrx/store Internal Reducer Factory Provider"),Xf=new y("@ngrx/store Initial Reducers"),kc=new y("@ngrx/store Internal Initial Reducers"),Ff=new y("@ngrx/store Store Features"),Lf=new y("@ngrx/store Internal Store Reducers"),Pc=new y("@ngrx/store Internal Feature Reducers"),jf=new y("@ngrx/store Internal Feature Configs"),Zf=new y("@ngrx/store Internal Store Features"),Vf=new y("@ngrx/store Internal Feature Reducers Token"),ep=new y("@ngrx/store Feature Reducers"),Uf=new y("@ngrx/store User Provided Meta Reducers"),zs=new y("@ngrx/store Meta Reducers"),Bf=new y("@ngrx/store Internal Resolved Meta Reducers"),$f=new y("@ngrx/store User Runtime Checks Config"),Wf=new y("@ngrx/store Internal User Runtime Checks Config"),er=new y("@ngrx/store Internal Runtime Checks"),Bc=new y("@ngrx/store Check if Action types are unique"),tr=new y("@ngrx/store Root Store Provider"),Gs=new y("@ngrx/store Feature State Provider");function $c(t,e={}){let n=Object.keys(t),i={};for(let s=0;s<n.length;s++){let o=n[s];typeof t[o]=="function"&&(i[o]=t[o])}let r=Object.keys(i);return function(o,a){o=o===void 0?e:o;let l=!1,c={};for(let u=0;u<r.length;u++){let d=r[u],h=i[d],f=o[d],p=h(f,a);c[d]=p,l=l||p!==f}return l?c:o}}function zb(t,e){return Object.keys(t).filter(n=>n!==e).reduce((n,i)=>Object.assign(n,{[i]:t[i]}),{})}function tp(...t){return function(e){if(t.length===0)return e;let n=t[t.length-1];return t.slice(0,-1).reduceRight((r,s)=>s(r),n(e))}}function np(t,e){return Array.isArray(e)&&e.length>0&&(t=tp.apply(null,[...e,t])),(n,i)=>{let r=t(n);return(s,o)=>(s=s===void 0?i:s,r(s,o))}}function Gb(t){let e=Array.isArray(t)&&t.length>0?tp(...t):n=>n;return(n,i)=>(n=e(n),(r,s)=>(r=r===void 0?i:r,n(r,s)))}var nr=class extends je{},Hs=class extends Wn{},Hb="@ngrx/store/update-reducers",qs=(()=>{let e=class e extends pe{get currentReducers(){return this.reducers}constructor(i,r,s,o){super(o(s,r)),this.dispatcher=i,this.initialState=r,this.reducers=s,this.reducerFactory=o}addFeature(i){this.addFeatures([i])}addFeatures(i){let r=i.reduce((s,{reducers:o,reducerFactory:a,metaReducers:l,initialState:c,key:u})=>{let d=typeof o=="function"?Gb(l)(o,c):np(a,l)(o,c);return s[u]=d,s},{});this.addReducers(r)}removeFeature(i){this.removeFeatures([i])}removeFeatures(i){this.removeReducers(i.map(r=>r.key))}addReducer(i,r){this.addReducers({[i]:r})}addReducers(i){this.reducers=m(m({},this.reducers),i),this.updateReducers(Object.keys(i))}removeReducer(i){this.removeReducers([i])}removeReducers(i){i.forEach(r=>{this.reducers=zb(this.reducers,r)}),this.updateReducers(i)}updateReducers(i){this.next(this.reducerFactory(this.reducers,this.initialState)),this.dispatcher.next({type:Hb,features:i})}ngOnDestroy(){this.complete()}};e.\u0275fac=function(r){return new(r||e)(w(Hs),w(Uc),w(Xf),w(Jf))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),qb=[qs,{provide:nr,useExisting:qs},{provide:Hs,useExisting:Wn}],ir=(()=>{let e=class e extends fe{ngOnDestroy(){this.complete()}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=ct(e)))(s||e)}})(),e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Kb=[ir],Ks=class extends je{},zf=(()=>{let e=class e extends pe{constructor(i,r,s,o){super(o);let l=i.pipe(zu(Wu)).pipe(id(r)),c={state:o},u=l.pipe(jr(Yb,c));this.stateSubscription=u.subscribe(({state:d,action:h})=>{this.next(d),s.next(h)}),this.state=Nc(this,{manualCleanup:!0,requireSync:!0})}ngOnDestroy(){this.stateSubscription.unsubscribe(),this.complete()}};e.INIT=Yf,e.\u0275fac=function(r){return new(r||e)(w(Wn),w(nr),w(ir),w(Uc))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})();function Yb(t={state:void 0},[e,n]){let{state:i}=t;return{state:n(i,e),action:e}}var Qb=[zf,{provide:Ks,useExisting:zf}],gt=(()=>{let e=class e extends je{constructor(i,r,s){super(),this.actionsObserver=r,this.reducerManager=s,this.source=i,this.state=i.state}select(i,...r){return Xb.call(null,i,...r)(this)}selectSignal(i,r){return dt(()=>i(this.state()),r)}lift(i){let r=new e(this,this.actionsObserver,this.reducerManager);return r.operator=i,r}dispatch(i){this.actionsObserver.next(i)}next(i){this.actionsObserver.next(i)}error(i){this.actionsObserver.error(i)}complete(){this.actionsObserver.complete()}addReducer(i,r){this.reducerManager.addReducer(i,r)}removeReducer(i){this.reducerManager.removeReducer(i)}};e.\u0275fac=function(r){return new(r||e)(w(Ks),w(Wn),w(qs))},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),Jb=[gt];function Xb(t,e,...n){return function(r){let s;if(typeof t=="string"){let o=[e,...n].filter(Boolean);s=r.pipe(td(t,...o))}else if(typeof t=="function")s=r.pipe(A(o=>t(o,e)));else throw new TypeError(`Unexpected type '${typeof t}' in select operator, expected 'string' or 'function'`);return s.pipe(Xu())}}var Wc="https://ngrx.io/guide/store/configuration/runtime-checks";function Gf(t){return t===void 0}function Hf(t){return t===null}function ip(t){return Array.isArray(t)}function Zb(t){return typeof t=="string"}function e0(t){return typeof t=="boolean"}function t0(t){return typeof t=="number"}function rp(t){return typeof t=="object"&&t!==null}function n0(t){return rp(t)&&!ip(t)}function i0(t){if(!n0(t))return!1;let e=Object.getPrototypeOf(t);return e===Object.prototype||e===null}function Lc(t){return typeof t=="function"}function r0(t){return Lc(t)&&t.hasOwnProperty("\u0275cmp")}function s0(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var o0=!1;function a0(){return o0}function qf(t,e){return t===e}function c0(t,e,n){for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!0;return!1}function sp(t,e=qf,n=qf){let i=null,r=null,s;function o(){i=null,r=null}function a(u=void 0){s={result:u}}function l(){s=void 0}function c(){if(s!==void 0)return s.result;if(!i)return r=t.apply(null,arguments),i=arguments,r;if(!c0(arguments,i,e))return r;let u=t.apply(null,arguments);return i=arguments,n(r,u)?r:(r=u,u)}return{memoized:c,reset:o,setResult:a,clearResult:l}}function zc(...t){return u0(sp)(...t)}function l0(t,e,n,i){if(n===void 0){let s=e.map(o=>o(t));return i.memoized.apply(null,s)}let r=e.map(s=>s(t,n));return i.memoized.apply(null,[...r,n])}function u0(t,e={stateFn:l0}){return function(...n){let i=n;if(Array.isArray(i[0])){let[u,...d]=i;i=[...u,...d]}else i.length===1&&d0(i[0])&&(i=h0(i[0]));let r=i.slice(0,i.length-1),s=i[i.length-1],o=r.filter(u=>u.release&&typeof u.release=="function"),a=t(function(...u){return s.apply(null,u)}),l=sp(function(u,d){return e.stateFn.apply(null,[u,r,d,a])});function c(){l.reset(),a.reset(),o.forEach(u=>u.release())}return Object.assign(l.memoized,{release:c,projector:a.memoized,setResult:l.setResult,clearResult:l.clearResult})}}function op(t){return zc(e=>{let n=e[t];return!a0()&&ca()&&!(t in e)&&console.warn(`@ngrx/store: The feature name "${t}" does not exist in the state, therefore createFeatureSelector cannot access it.  Be sure it is imported in a loaded module using StoreModule.forRoot('${t}', ...) or StoreModule.forFeature('${t}', ...).  If the default state is intended to be undefined, as is the case with router state, this development-only warning message can be ignored.`),n},e=>e)}function d0(t){return!!t&&typeof t=="object"&&Object.values(t).every(e=>typeof e=="function")}function h0(t){let e=Object.values(t),n=Object.keys(t),i=(...r)=>n.reduce((s,o,a)=>P(m({},s),{[o]:r[a]}),{});return[...e,i]}function f0(t){return t instanceof y?_(t):t}function p0(t,e){return e.map((n,i)=>{if(t[i]instanceof y){let r=_(t[i]);return{key:n.key,reducerFactory:r.reducerFactory?r.reducerFactory:$c,metaReducers:r.metaReducers?r.metaReducers:[],initialState:r.initialState}}return n})}function m0(t){return t.map(e=>e instanceof y?_(e):e)}function ap(t){return typeof t=="function"?t():t}function g0(t,e){return t.concat(e)}function _0(){if(_(gt,{optional:!0,skipSelf:!0}))throw new TypeError("The root Store has been provided more than once. Feature modules should provide feature states instead.");return"guarded"}function v0(t,e){return function(n,i){let r=e.action(i)?jc(i):i,s=t(n,r);return e.state()?jc(s):s}}function jc(t){Object.freeze(t);let e=Lc(t);return Object.getOwnPropertyNames(t).forEach(n=>{if(!n.startsWith("\u0275")&&s0(t,n)&&(!e||n!=="caller"&&n!=="callee"&&n!=="arguments")){let i=t[n];(rp(i)||Lc(i))&&!Object.isFrozen(i)&&jc(i)}}),t}function y0(t,e){return function(n,i){if(e.action(i)){let s=Vc(i);Kf(s,"action")}let r=t(n,i);if(e.state()){let s=Vc(r);Kf(s,"state")}return r}}function Vc(t,e=[]){return(Gf(t)||Hf(t))&&e.length===0?{path:["root"],value:t}:Object.keys(t).reduce((i,r)=>{if(i)return i;let s=t[r];return r0(s)?i:Gf(s)||Hf(s)||t0(s)||e0(s)||Zb(s)||ip(s)?!1:i0(s)?Vc(s,[...e,r]):{path:[...e,r],value:s}},!1)}function Kf(t,e){if(t===!1)return;let n=t.path.join("."),i=new Error(`Detected unserializable ${e} at "${n}". ${Wc}#strict${e}serializability`);throw i.value=t.value,i.unserializablePath=n,i}function b0(t,e){return function(n,i){if(e.action(i)&&!ue.isInAngularZone())throw new Error(`Action '${i.type}' running outside NgZone. ${Wc}#strictactionwithinngzone`);return t(n,i)}}function w0(t){return ca()?m({strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!0,strictActionImmutability:!0,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1},t):{strictStateSerializability:!1,strictActionSerializability:!1,strictStateImmutability:!1,strictActionImmutability:!1,strictActionWithinNgZone:!1,strictActionTypeUniqueness:!1}}function E0({strictActionSerializability:t,strictStateSerializability:e}){return n=>t||e?y0(n,{action:i=>t&&!Gc(i),state:()=>e}):n}function C0({strictActionImmutability:t,strictStateImmutability:e}){return n=>t||e?v0(n,{action:i=>t&&!Gc(i),state:()=>e}):n}function Gc(t){return t.type.startsWith("@ngrx")}function I0({strictActionWithinNgZone:t}){return e=>t?b0(e,{action:n=>t&&!Gc(n)}):e}function S0(t){return[{provide:Wf,useValue:t},{provide:$f,useFactory:T0,deps:[Wf]},{provide:er,deps:[$f],useFactory:w0},{provide:zs,multi:!0,deps:[er],useFactory:C0},{provide:zs,multi:!0,deps:[er],useFactory:E0},{provide:zs,multi:!0,deps:[er],useFactory:I0}]}function cp(){return[{provide:Bc,multi:!0,deps:[er],useFactory:A0}]}function T0(t){return t}function A0(t){if(!t.strictActionTypeUniqueness)return;let e=Object.entries(Fc).filter(([,n])=>n>1).map(([n])=>n);if(e.length)throw new Error(`Action types are registered more than once, ${e.map(n=>`"${n}"`).join(", ")}. ${Wc}#strictactiontypeuniqueness`)}function lp(t,e,n={}){return Oe([...O0(t,e,n),N0])}function R0(t={},e={}){return[{provide:Qf,useFactory:_0},{provide:kf,useValue:e.initialState},{provide:Uc,useFactory:ap,deps:[kf]},{provide:kc,useValue:t},{provide:Lf,useExisting:t instanceof y?t:kc},{provide:Xf,deps:[kc,[new Zo(Lf)]],useFactory:f0},{provide:Uf,useValue:e.metaReducers?e.metaReducers:[]},{provide:Bf,deps:[zs,Uf],useFactory:g0},{provide:Pf,useValue:e.reducerFactory?e.reducerFactory:$c},{provide:Jf,deps:[Pf,Bf],useFactory:np},Wb,qb,Kb,Qb,Jb,S0(e.runtimeChecks),cp()]}function D0(){_(Wn),_(nr),_(ir),_(gt),_(Qf,{optional:!0}),_(Bc,{optional:!0})}var x0=[{provide:tr,useFactory:D0},{provide:Wt,multi:!0,useFactory(){return()=>_(tr)}}];function up(t,e){return Oe([...R0(t,e),x0])}function M0(){_(tr);let t=_(Zf),e=_(ep),n=_(qs);_(Bc,{optional:!0});let i=t.map((r,s)=>{let a=e.shift()[s];return P(m({},r),{reducers:a,initialState:ap(r.initialState)})});n.addFeatures(i)}var N0=[{provide:Gs,useFactory:M0},{provide:Wt,multi:!0,useFactory(){return()=>_(Gs)}}];function O0(t,e,n={}){return[{provide:jf,multi:!0,useValue:t instanceof Object?{}:n},{provide:Ff,multi:!0,useValue:{key:t instanceof Object?t.name:t,reducerFactory:!(n instanceof y)&&n.reducerFactory?n.reducerFactory:$c,metaReducers:!(n instanceof y)&&n.metaReducers?n.metaReducers:[],initialState:!(n instanceof y)&&n.initialState?n.initialState:void 0}},{provide:Zf,deps:[jf,Ff],useFactory:p0},{provide:Pc,multi:!0,useValue:t instanceof Object?t.reducer:e},{provide:Vf,multi:!0,useExisting:e instanceof y?e:Pc},{provide:ep,multi:!0,deps:[Pc,[new Zo(Vf)]],useFactory:m0},cp()]}function Qs(...t){let e=t.pop(),n=t.map(i=>i.type);return{reducer:e,types:n}}function dp(t,...e){let n=new Map;for(let i of e)for(let r of i.types){let s=n.get(r);if(s){let o=(a,l)=>i.reducer(s(a,l),l);n.set(r,o)}else n.set(r,i.reducer)}return function(i=t,r){let s=n.get(r.type);return s?s(i,r):i}}var k0="[Signup Component] signup",Hc="[Login Component] login",P0="[Auth API] login",F0="[Auth API] error",DR=an(k0,Ys()),Js=an(Hc,Ys()),Xs=an(P0,Ys()),Zs=an(F0);var L0=op("auth"),fp=zc(L0,t=>t);var Ee=(()=>{class t{http;constructor(n){this.http=n}signUp(n,i,r,s){this.http.post("https://brainyclub-eu.backendless.app/api/users/register",{email:n.getEmail(),password:i,firstName:n.getFirstName(),lastName:n.getLastName(),sex:n.getSex(),provider:r},{headers:new oe({"Content-Type":"application/json"})}).subscribe(o=>{console.log(o),o!==null&&s()})}login(n,i){return this.http.post("https://brainyclub-eu.backendless.app/api/users/login",{login:n,password:i},{headers:new oe({"Content-Type":"application/json"})})}verifyIfTokenValid(n,i){this.http.get(`https://brainyclub-eu.backendless.app/api/users/isvalidusertoken/${n}`).subscribe(r=>{i(r)})}logout(){this.http.get("https://brainyclub-eu.backendless.app/api/users/logout",{headers:new oe({"user-token":localStorage.getItem("userToken")})})}findUsersByName(n,i,r){this.http.get(`https://brainyclub-eu.backendless.app/api/data/Users?where=firstName%20%3D%20'${n}'`,{headers:new oe({"Content-Type":"application/json","user-token":localStorage.getItem("userToken")})}).subscribe(s=>{r(s)})}findUsersByObjectId(n,i){this.http.get(`https://brainyclub-eu.backendless.app/api/data/Users/${n}`,{headers:new oe({"Content-Type":"application/json","user-token":localStorage.getItem("userToken")})}).subscribe(r=>{i(r)})}findUserByEmail(n,i){this.http.get(`https://eu-api.backendless.com/EC90E79D-4443-4858-8D5E-02E90D0C63B1/58C3266A-8C33-4D5C-854B-66704F41CFB6/data/Users?where=email%3D'${n}'&property=%60provider%60&property=%60email%60&property=%60firstName%60&property=%60lastName%60`,{headers:new oe({"Content-Type":"application/json"})}).subscribe(r=>{i(r[0])})}getFullName(n,i){this.http.get(`https://brainyclub-eu.backendless.app/api/data/Users/${n}?property=%60firstName%60&property=%60lastName%60`,{headers:new oe({"Content-Type":"application/json","user-token":localStorage.getItem("userToken")})}).subscribe(r=>{i(r)})}updateInfos(n,i,r,s,o,a){this.http.put(`https://brainyclub-eu.backendless.app/api/data/users/${n}`,{firstName:i,lastName:r,email:s,password:o},{headers:new oe({"Content-Type":"application/json","user-token":localStorage.getItem("userToken")})}).subscribe(l=>{a(l)})}static \u0275fac=function(i){return new(i||t)(w(_a))};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function j0(t,e){t&1&&(v(0,"p",19),D(1,"Enter a valid email !"),b())}function V0(t,e){t&1&&(v(0,"p",19),D(1," Password must be at least 8 characters ! "),b())}var pp=(()=>{class t{authService;router;store;constructor(n,i,r){this.authService=n,this.router=i,this.store=r}changed=0;ngOnInit(){google.accounts.id.initialize({client_id:"205706621989-pken44sei0ti29vd95ukk3o2ja4e4gh1.apps.googleusercontent.com",callback:this.handleCredential.bind(this)}),this.store.select(fp).subscribe(n=>{n.state==="failed"||n.state==="success"&&this.saveDataLocally(n.email,n.userToken,n.objectId)})}isPasswordVisible=!1;isEmailValid=!0;isPasswordValid=!0;loginGroup=new Nt({email:new _e("",[he.required,he.email]),password:new _e("",[he.required,he.minLength(8)])});onSubmitLogin(){this.loginGroup.valid?(this.isEmailValid=this.loginGroup.valid,this.isPasswordValid=this.loginGroup.valid,this.store.dispatch(Js({email:this.loginGroup.value.email,password:this.loginGroup.value.password}))):(this.isEmailValid=this.loginGroup.controls.email.valid,this.isPasswordValid=this.loginGroup.controls.password.valid)}login(){google.accounts.id.prompt()}handleCredential(n){let i=Mc(n.credential);this.authService.findUserByEmail(i.email,r=>{typeof r<"u"?r.provider==="backendless"?alert("Try to login using email !"):r.provider:this.authService.signUp(new Xe(i.given_name,i.family_name,i.email,"","","google"),i.sub,"google",()=>{})})}makePasswordVisible(){this.isPasswordVisible=!this.isPasswordVisible}saveDataLocally(n,i,r){localStorage.setItem("email",n),localStorage.setItem("userToken",i),localStorage.setItem("objectId",r),localStorage.getItem("email")!==null&&localStorage.getItem("userToken")!==null&&localStorage.getItem("objectId")!==null&&this.router.navigate(["/home"])}change(){this.changed<2?this.changed+=1:this.changed=0}static \u0275fac=function(i){return new(i||t)(E(Ee),E(Ye),E(gt))};static \u0275cmp=Z({type:t,selectors:[["app-login"]],standalone:!0,features:[ee],decls:44,vars:5,consts:[[1,"h-full","w-full","select-none","bg-white"],[1,"header","flex","justify-between","items-center","p-6"],[1,"flex","items-center"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#16a34a","height","72px","width","72px","version","1.1","id","Capa_1","viewBox","0 0 60 60",0,"xml","space","preserve"],["d","M30,1.5c-16.542,0-30,12.112-30,27c0,5.205,1.647,10.246,4.768,14.604c-0.591,6.537-2.175,11.39-4.475,13.689  c-0.304,0.304-0.38,0.769-0.188,1.153C0.276,58.289,0.625,58.5,1,58.5c0.046,0,0.093-0.003,0.14-0.01  c0.405-0.057,9.813-1.412,16.617-5.338C21.622,54.711,25.738,55.5,30,55.5c16.542,0,30-12.112,30-27S46.542,1.5,30,1.5z"],[1,"text-3xl","ml-2"],[1,"create-account","flex","items-center"],[1,"create-account-text","mr-2"],["routerLink","/signup","routerLinkActive","active",1,"border","border-gray-300","rounded-md","px-2","py-1"],[1,"login-div","w-96","h-1/2","flex","flex-col","justify-evenly","ml-auto","mr-auto","absolute","left-1/2","top-1/2","-translate-x-1/2","-translate-y-1/2"],[1,"h-9","border","rounded-md","flex","items-center","justify-center","py-2",3,"click"],["src","./assets/google-icon.png",1,"w-7","h-7"],[1,"flex","justify-between","items-center"],[1,"w-[45%]"],[1,"select-none"],[1,"h-3/6","flex","flex-col","justify-between",3,"formGroup"],[1,"flex","flex-col"],[1,"text-xl","font-bold"],["placeholder","Email","formControlName","email",1,"text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],[1,"text-red-600"],["for","dd",1,"text-xl","font-bold"],[1,"relative"],["placeholder","Password","formControlName","password","id","dd",1,"w-full","text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600",3,"type"],[1,"absolute","h-full","-right-0","-top-0","mr-2",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#000000","version","1.1","id","Capa_1","width","25px","height","25px","viewBox","0 0 442.04 442.04",0,"xml","space","preserve"],["d","M221.02,341.304c-49.708,0-103.206-19.44-154.71-56.22C27.808,257.59,4.044,230.351,3.051,229.203    c-4.068-4.697-4.068-11.669,0-16.367c0.993-1.146,24.756-28.387,63.259-55.881c51.505-36.777,105.003-56.219,154.71-56.219    c49.708,0,103.207,19.441,154.71,56.219c38.502,27.494,62.266,54.734,63.259,55.881c4.068,4.697,4.068,11.669,0,16.367    c-0.993,1.146-24.756,28.387-63.259,55.881C324.227,321.863,270.729,341.304,221.02,341.304z M29.638,221.021    c9.61,9.799,27.747,27.03,51.694,44.071c32.83,23.361,83.714,51.212,139.688,51.212s106.859-27.851,139.688-51.212    c23.944-17.038,42.082-34.271,51.694-44.071c-9.609-9.799-27.747-27.03-51.694-44.071    c-32.829-23.362-83.714-51.212-139.688-51.212s-106.858,27.85-139.688,51.212C57.388,193.988,39.25,211.219,29.638,221.021z"],["d","M221.02,298.521c-42.734,0-77.5-34.767-77.5-77.5c0-42.733,34.766-77.5,77.5-77.5c18.794,0,36.924,6.814,51.048,19.188    c5.193,4.549,5.715,12.446,1.166,17.639c-4.549,5.193-12.447,5.714-17.639,1.166c-9.564-8.379-21.844-12.993-34.576-12.993    c-28.949,0-52.5,23.552-52.5,52.5s23.551,52.5,52.5,52.5c28.95,0,52.5-23.552,52.5-52.5c0-6.903,5.597-12.5,12.5-12.5    s12.5,5.597,12.5,12.5C298.521,263.754,263.754,298.521,221.02,298.521z"],["d","M221.02,246.021c-13.785,0-25-11.215-25-25s11.215-25,25-25c13.786,0,25,11.215,25,25S234.806,246.021,221.02,246.021z"],[1,"bg-green-600","text-white","h-9","text-xl","font-light","rounded-md",3,"click"]],template:function(i,r){i&1&&(v(0,"div",0)(1,"div",1)(2,"div",2),at(),v(3,"svg",3),N(4,"path",4),b(),zt(),v(5,"p",5),D(6,"Chat"),b()(),v(7,"div",6)(8,"p",7),D(9,"New to Chat?"),b(),v(10,"button",8),D(11," Create an account "),b()()(),v(12,"div",9)(13,"button",10),U("click",function(){return r.login()}),N(14,"img",11),D(15,"\xA0Sign in using Google "),b(),v(16,"div",12),N(17,"mat-divider",13),v(18,"p",14),D(19,"Or"),b(),N(20,"mat-divider",13),b(),v(21,"form",15)(22,"div",16)(23,"label",17),D(24,"Email"),b(),N(25,"input",18),Ae(26,j0,2,0,"p",19),b(),v(27,"div",16)(28,"label",20),D(29,"Password"),b(),v(30,"div",21),N(31,"input",22),v(32,"button",23),U("click",function(){return r.makePasswordVisible()}),at(),v(33,"svg",24)(34,"g")(35,"g"),N(36,"path",25),b(),v(37,"g"),N(38,"path",26),b(),v(39,"g"),N(40,"path",27),b()()()()(),Ae(41,V0,2,0,"p",19),b(),zt(),v(42,"button",28),U("click",function(){return r.onSubmitLogin()}),D(43," Login "),b()()()()),i&2&&(G("@appear",void 0),L(21),G("formGroup",r.loginGroup),L(5),ge(r.isEmailValid?-1:26),L(5),G("type",r.isPasswordVisible?"text":"password"),L(10),ge(r.isPasswordValid?-1:41))},dependencies:[Fn,Rs,$n,Bn,Pe,Qe,Un,nn,rn,Ue,Mf,xf],styles:["@media only screen and (max-width: 500px){.header[_ngcontent-%COMP%]{flex-direction:column}.login-div[_ngcontent-%COMP%]{width:90%}.create-account[_ngcontent-%COMP%]{margin-top:2em}.create-account[_ngcontent-%COMP%]   .create-account-text[_ngcontent-%COMP%]{display:none}}"],data:{animation:[]}})}return t})();function U0(t,e){t&1&&(v(0,"p",13),D(1,"Enter a valid email !"),b())}function B0(t,e){t&1&&(v(0,"p",13),D(1,"Password must be at least 8 characters !"),b())}var mp=(()=>{class t{authService;router;constructor(n,i){this.authService=n,this.router=i}show=!0;isEmailValid=!0;isPasswordValid=!0;signUpForm=new Nt({firstName:new _e(""),lastName:new _e(""),sex:new _e("Sex"),email:new _e("",[he.required,he.email]),password:new _e("",[he.required,he.minLength(8)])});onSubmit(){this.signUpForm.valid?this.authService.signUp(new Xe(this.signUpForm.value.firstName,this.signUpForm.value.lastName,this.signUpForm.value.email,this.signUpForm.value.sex,"",""),this.signUpForm.value.password,"backendless",()=>{this.router.navigate(["/login"])}):(this.isEmailValid=this.signUpForm.controls.email.valid,this.isPasswordValid=this.signUpForm.controls.password.valid)}static \u0275fac=function(i){return new(i||t)(E(Ee),E(Ye))};static \u0275cmp=Z({type:t,selectors:[["app-signup"]],standalone:!0,features:[ee],decls:29,vars:4,consts:[[1,"h-full","w-full","select-none","bg-white"],[1,"signup-div","h-1/2","flex","flex-col","justify-evenly","items-center","absolute","left-1/2","top-1/2","-translate-x-1/2","-translate-y-1/2"],[1,"flex","justify-center","items-center","w-full"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#16a34a","height","72px","width","72px","version","1.1","id","Capa_1","viewBox","0 0 60 60",0,"xml","space","preserve"],["d","M30,1.5c-16.542,0-30,12.112-30,27c0,5.205,1.647,10.246,4.768,14.604c-0.591,6.537-2.175,11.39-4.475,13.689  c-0.304,0.304-0.38,0.769-0.188,1.153C0.276,58.289,0.625,58.5,1,58.5c0.046,0,0.093-0.003,0.14-0.01  c0.405-0.057,9.813-1.412,16.617-5.338C21.622,54.711,25.738,55.5,30,55.5c16.542,0,30-12.112,30-27S46.542,1.5,30,1.5z"],[1,"text-3xl","ml-2"],[1,"text-3xl"],[1,"flex","flex-col",3,"ngSubmit","formGroup"],[1,"flex","justify-between"],["placeholder","First Name","formControlName","firstName",1,"text-xl","font-light","w-full","h-9","px-2","mr-1","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],["placeholder","Last Name","formControlName","lastName",1,"text-xl","font-light","w-full","h-9","px-2","ml-1","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],["formControlName","sex",1,"text-xl","font-light","mt-4","px-2","outline-none","focus:border-blue-600","border-gray-300","border","rounded-md","h-9"],["placeholder","Email","type","email","formControlName","email",1,"text-xl","font-light","h-9","mt-4","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],[1,"text-red-600"],["placeholder","Password","type","password","formControlName","password",1,"text-xl","font-light","h-9","mt-4","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],[1,"bg-green-600","mt-8","text-white","h-9","text-xl","font-light","rounded-md"],[1,"flex","mt-1"],["routerLink","/login","routerLinkActive","active",1,"ml-1","text-blue-600","underline"]],template:function(i,r){i&1&&(v(0,"div",0)(1,"div",1)(2,"div",2),at(),v(3,"svg",3),N(4,"path",4),b(),zt(),v(5,"p",5),D(6,"Chat"),b()(),v(7,"p",6),D(8,"Create an account"),b(),v(9,"form",7),U("ngSubmit",function(){return r.onSubmit()}),v(10,"div",8),N(11,"input",9)(12,"input",10),b(),v(13,"select",11)(14,"option"),D(15,"Male"),b(),v(16,"option"),D(17,"Female"),b()(),N(18,"input",12),Ae(19,U0,2,0,"p",13),N(20,"input",14),Ae(21,B0,2,0,"p",13),v(22,"button",15),D(23," Signup "),b(),v(24,"div",16)(25,"p"),D(26,"Alreay have an account?"),b(),v(27,"a",17),D(28,"Login"),b()()()()()),i&2&&(G("@ani",void 0),L(9),G("formGroup",r.signUpForm),L(10),ge(r.isEmailValid?-1:19),L(2),ge(r.isPasswordValid?-1:21))},dependencies:[Fn,Rs,$n,Bn,lf,df,Pe,Us,Qe,Un,nn,rn,Ue],styles:["@media only screen and (max-width: 600px){.signup-div[_ngcontent-%COMP%]{width:90%;background-color:red}}"],data:{animation:[]}})}return t})();var qc={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var g=function(t,e){if(!t)throw un(e)},un=function(t){return new Error("Firebase Database ("+qc.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var _p=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},$0=function(t){let e=[],n=0,i=0;for(;n<t.length;){let r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},to={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){let s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,c=l?t[r+2]:0,u=s>>2,d=(s&3)<<4|a>>4,h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),i.push(n[u],n[d],n[h],n[f])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(_p(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):$0(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){let s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;let c=r<t.length?n[t.charAt(r)]:64;++r;let d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||c==null||d==null)throw new Kc;let h=s<<2|a>>4;if(i.push(h),c!==64){let f=a<<4&240|c>>2;if(i.push(f),d!==64){let p=c<<6&192|d;i.push(p)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Kc=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Qc=function(t){let e=_p(t);return to.encodeByteArray(e,!0)},rr=function(t){return Qc(t).replace(/\./g,"")},Yc=function(t){try{return to.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function vp(t){return yp(void 0,t)}function yp(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!W0(n)||(t[n]=yp(t[n],e[n]));return t}function W0(t){return t!=="__proto__"}function z0(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var G0=()=>z0().__FIREBASE_DEFAULTS__,H0=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},q0=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Yc(t[1]);return e&&JSON.parse(e)},bp=()=>{try{return G0()||H0()||q0()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},K0=t=>{var e,n;return(n=(e=bp())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wp=t=>{let e=K0(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},Jc=()=>{var t;return(t=bp())===null||t===void 0?void 0:t.config};var Ot=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}};function Ep(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rr(JSON.stringify(n)),rr(JSON.stringify(o)),""].join(".")}function Y0(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Xc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Y0())}function Cp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ze(){return qc.NODE_CLIENT===!0||qc.NODE_ADMIN===!0}function Ip(){try{return typeof indexedDB=="object"}catch{return!1}}function Sp(){return new Promise((t,e)=>{try{let n=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var Q0="FirebaseError",ln=class t extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=Q0,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sr.prototype.create)}},sr=class{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){let i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?J0(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ln(r,a,i)}};function J0(t,e){return t.replace(X0,(n,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var X0=/\{\$([^}]+)}/g;function zn(t){return JSON.parse(t)}function J(t){return JSON.stringify(t)}var Tp=function(t){let e={},n={},i={},r="";try{let s=t.split(".");e=zn(Yc(s[0])||""),n=zn(Yc(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:r}};var Ap=function(t){let e=Tp(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Rp=function(t){let e=Tp(t).claims;return typeof e=="object"&&e.admin===!0};function et(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dn(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Zc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function or(t,e,n){let i={};for(let r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}function no(t,e){if(t===e)return!0;let n=Object.keys(t),i=Object.keys(e);for(let r of n){if(!i.includes(r))return!1;let s=t[r],o=e[r];if(gp(s)&&gp(o)){if(!no(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!n.includes(r))return!1;return!0}function gp(t){return t!==null&&typeof t=="object"}function Dp(t){let e=[];for(let[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}var eo=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let i=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)i[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)i[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){let h=i[d-3]^i[d-8]^i[d-14]^i[d-16];i[d]=(h<<1|h>>>31)&4294967295}let r=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],c,u;for(let d=0;d<80;d++){d<40?d<20?(c=a^s&(o^a),u=1518500249):(c=s^o^a,u=1859775393):d<60?(c=s&o|a&(s|o),u=2400959708):(c=s^o^a,u=3395469782);let h=(r<<5|r>>>27)+c+l+u+i[d]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=r,r=h}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let i=n-this.blockSize,r=0,s=this.buf_,o=this.inbuf_;for(;r<n;){if(o===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<n;)if(s[o]=e.charCodeAt(r),++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}else for(;r<n;)if(s[o]=e[r],++o,++r,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let s=24;s>=0;s-=8)e[i]=this.chain_[r]>>s&255,++i;return e}};function io(t,e){return`${t} failed: ${e} argument `}var xp=function(t){let e=[],n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);if(r>=55296&&r<=56319){let s=r-55296;i++,g(i<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(i)-56320;r=65536+(s<<10)+o}r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):r<65536?(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},ar=function(t){let e=0;for(let n=0;n<t.length;n++){let i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};var KR=4*60*60*1e3;function hn(t){return t&&t._delegate?t._delegate:t}var _t=class{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fn="[DEFAULT]";var ro=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let i=new Ot;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ew(e))try{this.getOrInitializeService({instanceIdentifier:fn})}catch{}for(let[n,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=fn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return Q(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=fn){return this.instances.has(e)}getOptions(e=fn){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;let r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let i=this.onInitCallbacks.get(n);if(i)for(let r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Z0(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=fn){return this.component?this.component.multipleInstances?e:fn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Z0(t){return t===fn?void 0:t}function ew(t){return t.instantiationMode==="EAGER"}var cr=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new ro(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var tw=[],W=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(W||{}),nw={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},iw=W.INFO,rw={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},sw=(t,e,...n)=>{if(e<t.logLevel)return;let i=new Date().toISOString(),r=rw[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Gn=class{constructor(e){this.name=e,this._logLevel=iw,this._logHandler=sw,this._userLogHandler=null,tw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}};var ow=(t,e)=>e.some(n=>t instanceof n),Mp,Np;function aw(){return Mp||(Mp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cw(){return Np||(Np=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Op=new WeakMap,tl=new WeakMap,kp=new WeakMap,el=new WeakMap,il=new WeakMap;function lw(t){let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tt(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Op.set(n,t)}).catch(()=>{}),il.set(e,t),e}function uw(t){if(tl.has(t))return;let e=new Promise((n,i)=>{let r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});tl.set(t,e)}var nl={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return tl.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kp.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Pp(t){nl=t(nl)}function dw(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let i=t.call(so(this),e,...n);return kp.set(i,e.sort?e.sort():[e]),tt(i)}:cw().includes(t)?function(...e){return t.apply(so(this),e),tt(Op.get(this))}:function(...e){return tt(t.apply(so(this),e))}}function hw(t){return typeof t=="function"?dw(t):(t instanceof IDBTransaction&&uw(t),ow(t,aw())?new Proxy(t,nl):t)}function tt(t){if(t instanceof IDBRequest)return lw(t);if(el.has(t))return el.get(t);let e=hw(t);return e!==t&&(el.set(t,e),il.set(e,t)),e}var so=t=>il.get(t);function Lp(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(t,e),a=tt(o);return i&&o.addEventListener("upgradeneeded",l=>{i(tt(o.result),l.oldVersion,l.newVersion,tt(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var fw=["get","getKey","getAll","getAllKeys","count"],pw=["put","add","delete","clear"],rl=new Map;function Fp(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(rl.get(e))return rl.get(e);let n=e.replace(/FromIndex$/,""),i=e!==n,r=pw.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||fw.includes(n)))return;let s=function(o,...a){return Q(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),c=l.store;return i&&(c=c.index(a.shift())),(yield Promise.all([c[n](...a),r&&l.done]))[0]})};return rl.set(e,s),s}Pp(t=>P(m({},t),{get:(e,n,i)=>Fp(e,n)||t.get(e,n,i),has:(e,n)=>!!Fp(e,n)||t.has(e,n)}));var ol=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mw(n)){let i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}};function mw(t){let e=t.getComponent();return e?.type==="VERSION"}var al="@firebase/app",jp="0.10.7";var pn=new Gn("@firebase/app"),gw="@firebase/app-compat",_w="@firebase/analytics-compat",vw="@firebase/analytics",yw="@firebase/app-check-compat",bw="@firebase/app-check",ww="@firebase/auth",Ew="@firebase/auth-compat",Cw="@firebase/database",Iw="@firebase/database-compat",Sw="@firebase/functions",Tw="@firebase/functions-compat",Aw="@firebase/installations",Rw="@firebase/installations-compat",Dw="@firebase/messaging",xw="@firebase/messaging-compat",Mw="@firebase/performance",Nw="@firebase/performance-compat",Ow="@firebase/remote-config",kw="@firebase/remote-config-compat",Pw="@firebase/storage",Fw="@firebase/storage-compat",Lw="@firebase/firestore",jw="@firebase/vertexai-preview",Vw="@firebase/firestore-compat",Uw="firebase",Bw="10.12.4";var cl="[DEFAULT]",$w={[al]:"fire-core",[gw]:"fire-core-compat",[vw]:"fire-analytics",[_w]:"fire-analytics-compat",[bw]:"fire-app-check",[yw]:"fire-app-check-compat",[ww]:"fire-auth",[Ew]:"fire-auth-compat",[Cw]:"fire-rtdb",[Iw]:"fire-rtdb-compat",[Sw]:"fire-fn",[Tw]:"fire-fn-compat",[Aw]:"fire-iid",[Rw]:"fire-iid-compat",[Dw]:"fire-fcm",[xw]:"fire-fcm-compat",[Mw]:"fire-perf",[Nw]:"fire-perf-compat",[Ow]:"fire-rc",[kw]:"fire-rc-compat",[Pw]:"fire-gcs",[Fw]:"fire-gcs-compat",[Lw]:"fire-fst",[Vw]:"fire-fst-compat",[jw]:"fire-vertex","fire-js":"fire-js",[Uw]:"fire-js-all"};var oo=new Map,Ww=new Map,ll=new Map;function Vp(t,e){try{t.container.addComponent(e)}catch(n){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function lr(t){let e=t.name;if(ll.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;ll.set(e,t);for(let n of oo.values())Vp(n,t);for(let n of Ww.values())Vp(n,t);return!0}function Wp(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}var zw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},kt=new sr("app","Firebase",zw);var ul=class{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw kt.create("app-deleted",{appName:this._name})}};var zp=Bw;function fl(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let i=Object.assign({name:cl,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw kt.create("bad-app-name",{appName:String(r)});if(n||(n=Jc()),!n)throw kt.create("no-options");let s=oo.get(r);if(s){if(no(n,s.options)&&no(i,s.config))return s;throw kt.create("duplicate-app",{appName:r})}let o=new cr(r);for(let l of ll.values())o.addComponent(l);let a=new ul(n,i,o);return oo.set(r,a),a}function Gp(t=cl){let e=oo.get(t);if(!e&&t===cl&&Jc())return fl();if(!e)throw kt.create("no-app",{appName:t});return e}function Pt(t,e,n){var i;let r=(i=$w[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(a.join(" "));return}lr(new _t(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var Gw="firebase-heartbeat-database",Hw=1,ur="firebase-heartbeat-store",sl=null;function Hp(){return sl||(sl=Lp(Gw,Hw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ur)}catch(n){console.warn(n)}}}}).catch(t=>{throw kt.create("idb-open",{originalErrorMessage:t.message})})),sl}function qw(t){return Q(this,null,function*(){try{let n=(yield Hp()).transaction(ur),i=yield n.objectStore(ur).get(qp(t));return yield n.done,i}catch(e){if(e instanceof ln)pn.warn(e.message);else{let n=kt.create("idb-get",{originalErrorMessage:e?.message});pn.warn(n.message)}}})}function Up(t,e){return Q(this,null,function*(){try{let i=(yield Hp()).transaction(ur,"readwrite");yield i.objectStore(ur).put(e,qp(t)),yield i.done}catch(n){if(n instanceof ln)pn.warn(n.message);else{let i=kt.create("idb-set",{originalErrorMessage:n?.message});pn.warn(i.message)}}})}function qp(t){return`${t.name}!${t.options.appId}`}var Kw=1024,Yw=30*24*60*60*1e3,dl=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new hl(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return Q(this,null,function*(){var e,n;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Bp();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=Yw}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return Q(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=Bp(),{heartbeatsToSend:i,unsentEntries:r}=Qw(this._heartbeatsCache.heartbeats),s=rr(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Bp(){return new Date().toISOString().substring(0,10)}function Qw(t,e=Kw){let n=[],i=t.slice();for(let r of t){let s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),$p(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),$p(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}var hl=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return Q(this,null,function*(){return Ip()?Sp().then(()=>!0).catch(()=>!1):!1})}read(){return Q(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield qw(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return Q(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return Q(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Up(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function $p(t){return rr(JSON.stringify({version:2,heartbeats:t})).length}function Jw(t){lr(new _t("platform-logger",e=>new ol(e),"PRIVATE")),lr(new _t("heartbeat",e=>new dl(e),"PRIVATE")),Pt(al,jp,t),Pt(al,jp,"esm2017"),Pt("fire-js","")}Jw("");var Kp="@firebase/database",Yp="1.0.6";var pu="";function Xw(t){pu=t}var wl=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),J(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:zn(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var El=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return et(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Am=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new wl(e)}}catch{}return new El},gn=Am("localStorage"),Cl=Am("sessionStorage");var Kn=new Gn("@firebase/database"),Zw=function(){let t=1;return function(){return t++}}(),Rm=function(t){let e=xp(t),n=new eo;n.update(e);let i=n.digest();return to.encodeByteArray(i)},Rr=function(...t){let e="";for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Rr.apply(null,i):typeof i=="object"?e+=J(i):e+=i,e+=" "}return e},vn=null,Qp=!0,eE=function(t,e){g(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(Kn.logLevel=W.VERBOSE,vn=Kn.log.bind(Kn),e&&Cl.set("logging_enabled",!0)):typeof t=="function"?vn=t:(vn=null,Cl.remove("logging_enabled"))},ve=function(...t){if(Qp===!0&&(Qp=!1,vn===null&&Cl.get("logging_enabled")===!0&&eE(!0)),vn){let e=Rr.apply(null,t);vn(e)}},Dr=function(t){return function(...e){ve(t,...e)}},Il=function(...t){let e="FIREBASE INTERNAL ERROR: "+Rr(...t);Kn.error(e)},vt=function(...t){let e=`FIREBASE FATAL ERROR: ${Rr(...t)}`;throw Kn.error(e),new Error(e)},Ce=function(...t){let e="FIREBASE WARNING: "+Rr(...t);Kn.warn(e)},tE=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ce("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dm=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},nE=function(t){if(Ze()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Qn="[MIN_NAME]",yn="[MAX_NAME]",ii=function(t,e){if(t===e)return 0;if(t===Qn||e===yn)return-1;if(e===Qn||t===yn)return 1;{let n=Jp(t),i=Jp(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},iE=function(t,e){return t===e?0:t<e?-1:1},dr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+J(e))},mu=function(t){if(typeof t!="object"||t===null)return J(t);let e=[];for(let i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=J(e[i]),n+=":",n+=mu(t[e[i]]);return n+="}",n},xm=function(t,e){let n=t.length;if(n<=e)return[t];let i=[];for(let r=0;r<n;r+=e)r+e>n?i.push(t.substring(r,n)):i.push(t.substring(r,r+e));return i};function Ie(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Mm=function(t){g(!Dm(t),"Invalid JSON number");let e=11,n=52,i=(1<<e-1)-1,r,s,o,a,l;t===0?(s=0,o=0,r=1/t===-1/0?1:0):(r=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),i),s=a+i,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-i-n))));let c=[];for(l=n;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let u=c.join(""),d="";for(l=0;l<64;l+=8){let h=parseInt(u.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),d=d+h}return d.toLowerCase()},rE=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},sE=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function oE(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}var aE=new RegExp("^-?(0*)\\d{1,10}$"),cE=-2147483648,lE=2147483647,Jp=function(t){if(aE.test(t)){let e=Number(t);if(e>=cE&&e<=lE)return e}return null},ri=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw Ce("Exception was thrown by user callback.",n),e},Math.floor(0))}},uE=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},gr=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var Sl=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Ce(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var Tl=class{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ve("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ce(e)}},_r=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),co="5",Nm="v",Om="s",km="r",Pm="f",Fm=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Lm="ls",jm="p",Al="ac",Vm="websocket",Um="long_polling";var lo=class{constructor(e,n,i,r,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=gn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&gn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function dE(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function Bm(t,e,n){g(typeof e=="string","typeof type must == string"),g(typeof n=="object","typeof params must == object");let i;if(e===Vm)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Um)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);dE(t)&&(n.ns=t.namespace);let r=[];return Ie(n,(s,o)=>{r.push(s+"="+o)}),i+r.join("&")}var Rl=class{constructor(){this.counters_={}}incrementCounter(e,n=1){et(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return vp(this.counters_)}};var pl={},ml={};function gu(t){let e=t.toString();return pl[e]||(pl[e]=new Rl),pl[e]}function hE(t,e){let n=t.toString();return ml[n]||(ml[n]=e()),ml[n]}var Dl=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&ri(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var Xp="start",fE="close",pE="pLPCommand",mE="pRTLPCB",$m="id",Wm="pw",zm="ser",gE="cb",_E="seg",vE="ts",yE="d",bE="dframe",Gm=1870,Hm=30,wE=Gm-Hm,EE=25e3,CE=3e4,xl=class t{constructor(e,n,i,r,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Dr(e),this.stats_=gu(n),this.urlFn=l=>(this.appCheckToken&&(l[Al]=this.appCheckToken),Bm(n,Um,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Dl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(CE)),nE(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ml((...s)=>{let[o,a,l,c,u]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Xp)this.id=a,this.password=l;else if(o===fE)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let i={};i[Xp]="t",i[zm]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[gE]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Nm]=co,this.transportSessionId&&(i[Om]=this.transportSessionId),this.lastSessionId&&(i[Lm]=this.lastSessionId),this.applicationId&&(i[jm]=this.applicationId),this.appCheckToken&&(i[Al]=this.appCheckToken),typeof location<"u"&&location.hostname&&Fm.test(location.hostname)&&(i[km]=Pm);let r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Ze()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!rE()&&!sE()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=J(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let i=Qc(n),r=xm(i,wE);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Ze())return;this.myDisconnFrame=document.createElement("iframe");let i={};i[bE]="t",i[$m]=e,i[Wm]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=J(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},Ml=class t{constructor(e,n,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Ze())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=Zw(),window[pE+this.uniqueCallbackIdentifier]=e,window[mE+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ve("frame writing exception"),a.stack&&ve(a.stack),ve(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ve("No IE domain setting required")}catch{let i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[$m]=this.myID,e[Wm]=this.myPW,e[zm]=this.currentSerial;let n=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+Hm+i.length<=Gm;){let o=this.pendingSegs.shift();i=i+"&"+_E+r+"="+o.seg+"&"+vE+r+"="+o.ts+"&"+yE+r+"="+o.d,r++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(i,Math.floor(EE)),s=()=>{clearTimeout(r),i()};this.addTag(e,s)}addTag(e,n){Ze()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){let r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{ve("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}};var IE=16384,SE=45e3,uo=null;typeof MozWebSocket<"u"?uo=MozWebSocket:typeof WebSocket<"u"&&(uo=WebSocket);var hr=(()=>{class t{constructor(n,i,r,s,o,a,l){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Dr(this.connId),this.stats_=gu(i),this.connURL=t.connectionURL_(i,a,l,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(n,i,r,s,o){let a={};return a[Nm]=co,!Ze()&&typeof location<"u"&&location.hostname&&Fm.test(location.hostname)&&(a[km]=Pm),i&&(a[Om]=i),r&&(a[Lm]=r),s&&(a[Al]=s),o&&(a[jm]=o),Bm(n,Vm,a)}open(n,i){this.onDisconnect=i,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,gn.set("previous_websocket_failure",!0);try{let r;if(Ze()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${co}/${pu}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new uo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let i=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(i);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&uo!==null&&!t.forceDisallow_}static previouslyFailed(){return gn.isInMemoryStorage||gn.get("previous_websocket_failure")===!0}markConnectionHealthy(){gn.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let i=this.frames.join("");this.frames=null;let r=zn(i);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(g(this.frames===null,"We already have a frame buffer"),n.length<=6){let i=Number(n);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let i=n.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(i);else{let r=this.extractFrameCount_(i);r!==null&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();let i=J(n);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);let r=xm(i,IE);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(SE))}sendString_(n){try{this.mySock.send(n)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),TE=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[xl,hr]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let i=hr&&hr.isAvailable(),r=i&&!hr.previouslyFailed();if(n.webSocketOnly&&(i||Ce("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hr];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),AE=6e4,RE=5e3,DE=10*1024,xE=100*1024,gl="t",Zp="d",ME="s",em="r",NE="e",tm="o",nm="a",im="n",rm="p",OE="h",Nl=class{constructor(e,n,i,r,s,o,a,l,c,u){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Dr("c:"+this.id+":"),this.transportManager_=new TE(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));let r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=gr(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>xE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>DE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(gl in e){let n=e[gl];n===nm?this.upgradeIfSecondaryHealthy_():n===em?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===tm&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=dr("t",e),i=dr("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rm,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:nm,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:im,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=dr("t",e),i=dr("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=dr(gl,e);if(Zp in e){let i=e[Zp];if(n===OE){let r=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(n===im){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ME?this.onConnectionShutdown_(i):n===em?this.onReset_(i):n===NE?Il("Server Error: "+i):n===tm?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Il("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),co!==i&&Ce("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),gr(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(AE))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):gr(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(RE))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rm,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(gn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var ho=class{put(e,n,i,r){}merge(e,n,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}};var fo=class{constructor(e){this.allowedEvents_=e,this.listeners_={},g(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});let r=this.getInitialEvent(e);r&&n.apply(i,r)}off(e,n,i){this.validateEventType_(e);let r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!i||i===r[s].context)){r.splice(s,1);return}}validateEventType_(e){g(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var po=class t extends fo{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Xc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return g(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var sm=32,om=768,B=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function j(){return new B("")}function O(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function jt(t){return t.pieces_.length-t.pieceNum_}function z(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new B(t.pieces_,e)}function qm(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function kE(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Km(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Ym(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new B(e,0)}function ne(t,e){let n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof B)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{let i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new B(n,0)}function F(t){return t.pieceNum_>=t.pieces_.length}function be(t,e){let n=O(t),i=O(e);if(n===null)return e;if(n===i)return be(z(t),z(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function _u(t,e){if(jt(t)!==jt(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function We(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(jt(t)>jt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}var Ol=class{constructor(e,n){this.errorPrefix_=n,this.parts_=Km(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=ar(this.parts_[i]);Qm(this)}};function PE(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=ar(e),Qm(t)}function FE(t){let e=t.parts_.pop();t.byteLength_-=ar(e),t.parts_.length>0&&(t.byteLength_-=1)}function Qm(t){if(t.byteLength_>om)throw new Error(t.errorPrefix_+"has a key path longer than "+om+" bytes ("+t.byteLength_+").");if(t.parts_.length>sm)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+sm+") or object contains a cycle "+mn(t))}function mn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var kl=class t extends fo{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new t}getInitialEvent(e){return g(e==="visible","Unknown event type: "+e),[this.visible_]}};var fr=1e3,LE=60*5*1e3,am=30*1e3,jE=1.3,VE=3e4,UE="server_kill",cm=3,vu=(()=>{class t extends ho{constructor(n,i,r,s,o,a,l,c){if(super(),this.repoInfo_=n,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=t.nextPersistentConnectionId_++,this.log_=Dr("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=fr,this.maxReconnectDelay_=LE,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!Ze())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kl.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&po.getInstance().on("online",this.onOnline_,this)}sendRequest(n,i,r){let s=++this.requestNumber_,o={r:s,a:n,b:i};this.log_(J(o)),g(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();let i=new Ot,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?i.resolve(l):i.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),i.promise}listen(n,i,r,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),g(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:i,query:n,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let i=this.outstandingGets_[n];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(n){let i=n.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";n.tag&&(o.q=i._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,u=l.s;t.warnOnListenWarnings_(c,i),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,s),n.onComplete&&n.onComplete(u,c))})}static warnOnListenWarnings_(n,i){if(n&&typeof n=="object"&&et(n,"w")){let r=dn(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',o=i._path.toString();Ce(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||Rp(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=am)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,i=Ap(n)?"auth":"gauth",r={cred:n};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let i=n.s,r=n.d||"error";i==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(n,i){let r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),g(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,i)}sendUnlisten_(n,i,r,s){this.log_("Unlisten on "+n+" for "+i);let o={p:n},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:i,onComplete:r})}onDisconnectMerge(n,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,i,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:i,onComplete:r})}onDisconnectCancel(n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(n,i,r,s){let o={p:i,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,i,r,s){this.putInternal("p",n,i,r,s)}merge(n,i,r,s){this.putInternal("m",n,i,r,s)}putInternal(n,i,r,s,o){this.initConnection_();let a={p:i,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+i)}sendPut_(n){let i=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(i,r,o=>{this.log_(i+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let i={c:n};this.log_("reportStats",i),this.sendRequest("s",i,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+J(n));let i=n.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,i){this.log_("handleServerMessage",n,i),n==="d"?this.onDataUpdate_(i.p,i.d,!1,i.t):n==="m"?this.onDataUpdate_(i.p,i.d,!0,i.t):n==="c"?this.onListenRevoked_(i.p,i.q):n==="ac"?this.onAuthRevoked_(i.s,i.d):n==="apc"?this.onAppCheckRevoked_(i.s,i.d):n==="sd"?this.onSecurityDebugPacket_(i):Il("Unrecognized action received from server: "+J(n)+`
Are you using the latest client?`)}onReady_(n,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){g(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=fr,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=fr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>VE&&(this.reconnectDelay_=fr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,i=Math.max(0,this.reconnectDelay_-n);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*jE)}this.onConnectStatus_(!1)}establishConnection_(){return Q(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),i=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},u=function(h){g(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:u};let d=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,f]=yield Promise.all([this.authTokenProvider_.getToken(d),this.appCheckTokenProvider_.getToken(d)]);a?ve("getToken() completed but was canceled"):(ve("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=f&&f.token,l=new Nl(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,i,r,p=>{Ce(p+" ("+this.repoInfo_.toString()+")"),this.interrupt(UE)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ce(h),c())}}})}interrupt(n){ve("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ve("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Zc(this.interruptReasons_)&&(this.reconnectDelay_=fr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let i=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let i=this.outstandingPuts_[n];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,i){let r;i?r=i.map(o=>mu(o)).join("$"):r="default";let s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,i){let r=new B(n).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(i),o.delete(i),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,i){ve("Auth token revoked: "+n+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=cm&&(this.reconnectDelay_=am,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,i){ve("App check token revoked: "+n+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=cm&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let i of n.values())this.sendListen_(i);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},i="js";Ze()&&(this.repoInfo_.nodeAdmin?i="admin_node":i="node"),n["sdk."+i+"."+pu.replace(/\./g,"-")]=1,Xc()?n["framework.cordova"]=1:Cp()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=po.getInstance().currentlyOnline();return Zc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),k=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Jn=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let i=new k(Qn,e),r=new k(Qn,n);return this.compare(i,r)!==0}minPost(){return k.MIN}};var ao,mo=class extends Jn{static get __EMPTY_NODE(){return ao}static set __EMPTY_NODE(e){ao=e}compare(e,n){return ii(e.name,n.name)}isDefinedOn(e){throw un("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return k.MIN}maxPost(){return new k(yn,ao)}makePost(e,n){return g(typeof e=="string","KeyIndex indexValue must always be a string."),new k(e,ao)}toString(){return".key"}},Yn=new mo;var qn=class{constructor(e,n,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?i(e.key,n):1,r&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},$e=(()=>{class t{constructor(n,i,r,s,o){this.key=n,this.value=i,this.color=r??t.RED,this.left=s??Le.EMPTY_NODE,this.right=o??Le.EMPTY_NODE}copy(n,i,r,s,o){return new t(n??this.key,i??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,i,r){let s=this,o=r(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,i,r),null):o===0?s=s.copy(null,i,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Le.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,i){let r,s;if(r=this,i(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),i(n,r.key)===0){if(r.right.isEmpty())return Le.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,i)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),Pl=class{copy(e,n,i,r,s){return this}insert(e,n,i){return new $e(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},Le=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,$e.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,$e.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,r=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new qn(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new qn(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new qn(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new qn(this.root_,null,this.comparator_,!0,e)}};Le.EMPTY_NODE=new Pl;function BE(t,e){return ii(t.name,e.name)}function yu(t,e){return ii(t,e)}var Fl;function $E(t){Fl=t}var Jm=function(t){return typeof t=="number"?"number:"+Mm(t):"string:"+t},Xm=function(t){if(t.isLeafNode()){let e=t.val();g(typeof e=="string"||typeof e=="number"||typeof e=="object"&&et(e,".sv"),"Priority must be a string or number.")}else g(t===Fl||t.isEmpty(),"priority of unexpected type.");g(t===Fl||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var lm,Xn=(()=>{class t{constructor(n,i=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=i,this.lazyHash_=null,g(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Xm(this.priorityNode_)}static set __childrenNodeConstructor(n){lm=n}static get __childrenNodeConstructor(){return lm}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return F(n)?this:O(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,i){return null}updateImmediateChild(n,i){return n===".priority"?this.updatePriority(i):i.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,i).updatePriority(this.priorityNode_)}updateChild(n,i){let r=O(n);return r===null?i:i.isEmpty()&&r!==".priority"?this:(g(r!==".priority"||jt(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(z(n),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,i){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+Jm(this.priorityNode_.val())+":");let i=typeof this.value_;n+=i+":",i==="number"?n+=Mm(this.value_):n+=this.value_,this.lazyHash_=Rm(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(g(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let i=typeof n.value_,r=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(i),o=t.VALUE_TYPE_ORDER.indexOf(r);return g(s>=0,"Unknown leaf type: "+i),g(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let i=n;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Zm,eg;function WE(t){Zm=t}function zE(t){eg=t}var Ll=class extends Jn{compare(e,n){let i=e.node.getPriority(),r=n.node.getPriority(),s=i.compareTo(r);return s===0?ii(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return k.MIN}maxPost(){return new k(yn,new Xn("[PRIORITY-POST]",eg))}makePost(e,n){let i=Zm(e);return new k(n,new Xn("[PRIORITY-POST]",i))}toString(){return".priority"}},q=new Ll;var GE=Math.log(2),jl=class{constructor(e){let n=s=>parseInt(Math.log(s)/GE,10),i=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},go=function(t,e,n,i){t.sort(e);let r=function(l,c){let u=c-l,d,h;if(u===0)return null;if(u===1)return d=t[l],h=n?n(d):d,new $e(h,d.node,$e.BLACK,null,null);{let f=parseInt(u/2,10)+l,p=r(l,f),S=r(f+1,c);return d=t[f],h=n?n(d):d,new $e(h,d.node,$e.BLACK,p,S)}},s=function(l){let c=null,u=null,d=t.length,h=function(p,S){let C=d-p,M=d;d-=p;let K=r(C+1,M),ie=t[C],X=n?n(ie):ie;f(new $e(X,ie.node,S,null,K))},f=function(p){c?(c.left=p,c=p):(u=p,c=p)};for(let p=0;p<l.count;++p){let S=l.nextBitIsOne(),C=Math.pow(2,l.count-(p+1));S?h(C,$e.BLACK):(h(C,$e.BLACK),h(C,$e.RED))}return u},o=new jl(t.length),a=s(o);return new Le(i||e,a)};var _l,Hn={},Zn=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return g(Hn&&q,"ChildrenNode.ts has not been loaded"),_l=_l||new t({".priority":Hn},{".priority":q}),_l}get(e){let n=dn(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Le?n:null}hasIndex(e){return et(this.indexSet_,e.toString())}addIndex(e,n){g(e!==Yn,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let i=[],r=!1,s=n.getIterator(k.Wrap),o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),i.push(o),o=s.getNext();let a;r?a=go(i,e.getCompare()):a=Hn;let l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;let u=Object.assign({},this.indexes_);return u[l]=a,new t(u,c)}addToIndexes(e,n){let i=or(this.indexes_,(r,s)=>{let o=dn(this.indexSet_,s);if(g(o,"Missing index implementation for "+s),r===Hn)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(k.Wrap),c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),go(a,o.getCompare())}else return Hn;else{let a=n.get(e.name),l=r;return a&&(l=l.remove(new k(e.name,a))),l.insert(e,e.node)}});return new t(i,this.indexSet_)}removeFromIndexes(e,n){let i=or(this.indexes_,r=>{if(r===Hn)return r;{let s=n.get(e.name);return s?r.remove(new k(e.name,s)):r}});return new t(i,this.indexSet_)}};var pr,R=(()=>{class t{constructor(n,i,r){this.children_=n,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Xm(this.priorityNode_),this.children_.isEmpty()&&g(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pr||(pr=new t(new Le(yu),null,Zn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pr}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let i=this.children_.get(n);return i===null?pr:i}}getChild(n){let i=O(n);return i===null?this:this.getImmediateChild(i).getChild(z(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,i){if(g(i,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(i);{let r=new k(n,i),s,o;i.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,i),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?pr:this.priorityNode_;return new t(s,a,o)}}updateChild(n,i){let r=O(n);if(r===null)return i;{g(O(n)!==".priority"||jt(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(z(n),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let i={},r=0,s=0,o=!0;if(this.forEachChild(q,(a,l)=>{i[a]=l.val(n),r++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*r){let a=[];for(let l in i)a[l]=i[l];return a}else return n&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+Jm(this.getPriority().val())+":"),this.forEachChild(q,(i,r)=>{let s=r.hash();s!==""&&(n+=":"+i+":"+s)}),this.lazyHash_=n===""?"":Rm(n)}return this.lazyHash_}getPredecessorChildName(n,i,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new k(n,i));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(n){let i=this.getFirstChildName(n);return i?new k(i,this.children_.get(i)):null}getLastChildName(n){let i=this.resolveIndex_(n);if(i){let r=i.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(n){let i=this.getLastChildName(n);return i?new k(i,this.children_.get(i)):null}forEachChild(n,i){let r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,i){let r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,k.Wrap),o=s.peek();for(;o!=null&&i.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===xr?-1:0}withIndex(n){if(n===Yn||this.indexMap_.hasIndex(n))return this;{let i=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,i)}}isIndexed(n){return n===Yn||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let i=n;if(this.getPriority().equals(i.getPriority()))if(this.children_.count()===i.children_.count()){let r=this.getIterator(q),s=i.getIterator(q),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===Yn?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),Vl=class extends R{constructor(){super(new Le(yu),R.EMPTY_NODE,Zn.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return R.EMPTY_NODE}isEmpty(){return!1}},xr=new Vl;Object.defineProperties(k,{MIN:{value:new k(Qn,R.EMPTY_NODE)},MAX:{value:new k(yn,xr)}});mo.__EMPTY_NODE=R.EMPTY_NODE;Xn.__childrenNodeConstructor=R;$E(xr);zE(xr);var HE=!0;function ae(t,e=null){if(t===null)return R.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),g(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Xn(n,ae(e))}if(!(t instanceof Array)&&HE){let n=[],i=!1;if(Ie(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=ae(a);l.isEmpty()||(i=i||!l.getPriority().isEmpty(),n.push(new k(o,l)))}}),n.length===0)return R.EMPTY_NODE;let s=go(n,BE,o=>o.name,yu);if(i){let o=go(n,q.getCompare());return new R(s,ae(e),new Zn({".priority":o},{".priority":q}))}else return new R(s,ae(e),Zn.Default)}else{let n=R.EMPTY_NODE;return Ie(t,(i,r)=>{if(et(t,i)&&i.substring(0,1)!=="."){let s=ae(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(i,s))}}),n.updatePriority(ae(e))}}WE(ae);var Ul=class extends Jn{constructor(e){super(),this.indexPath_=e,g(!F(e)&&O(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let i=this.extractChild(e.node),r=this.extractChild(n.node),s=i.compareTo(r);return s===0?ii(e.name,n.name):s}makePost(e,n){let i=ae(e),r=R.EMPTY_NODE.updateChild(this.indexPath_,i);return new k(n,r)}maxPost(){let e=R.EMPTY_NODE.updateChild(this.indexPath_,xr);return new k(yn,e)}toString(){return Km(this.indexPath_,0).join("/")}};var Bl=class extends Jn{compare(e,n){let i=e.node.compareTo(n.node);return i===0?ii(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return k.MIN}maxPost(){return k.MAX}makePost(e,n){let i=ae(e);return new k(n,i)}toString(){return".value"}},qE=new Bl;function tg(t){return{type:"value",snapshotNode:t}}function ei(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function wr(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Er(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function KE(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var Cr=class{constructor(e){this.index_=e}updateChild(e,n,i,r,s,o){g(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(r).equals(i.getChild(r))&&a.isEmpty()===i.isEmpty()||(o!=null&&(i.isEmpty()?e.hasChild(n)?o.trackChildChange(wr(n,a)):g(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ei(n,i)):o.trackChildChange(Er(n,i,a))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(q,(r,s)=>{n.hasChild(r)||i.trackChildChange(wr(r,s))}),n.isLeafNode()||n.forEachChild(q,(r,s)=>{if(e.hasChild(r)){let o=e.getImmediateChild(r);o.equals(s)||i.trackChildChange(Er(r,s,o))}else i.trackChildChange(ei(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?R.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var _o=class t{constructor(e){this.indexedFilter_=new Cr(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,r,s,o){return this.matches(new k(n,i))||(i=R.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,r,s,o)}updateFullNode(e,n,i){n.isLeafNode()&&(n=R.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(R.EMPTY_NODE);let s=this;return n.forEachChild(q,(o,a)=>{s.matches(new k(o,a))||(r=r.updateImmediateChild(o,R.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var $l=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{let i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new _o(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,r,s,o){return this.rangedFilter_.matches(new k(n,i))||(i=R.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,r,s,o):this.fullLimitUpdateChild_(e,n,i,s,o)}updateFullNode(e,n,i){let r;if(n.isLeafNode()||n.isEmpty())r=R.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){r=R.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=n.withIndex(this.index_),r=r.updatePriority(R.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,R.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,r,s){let o;if(this.reverse_){let d=this.index_.getCompare();o=(h,f)=>d(f,h)}else o=this.index_.getCompare();let a=e;g(a.numChildren()===this.limit_,"");let l=new k(n,i),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(l);if(a.hasChild(n)){let d=a.getImmediateChild(n),h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===n||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let f=h==null?1:o(h,l);if(u&&!i.isEmpty()&&f>=0)return s?.trackChildChange(Er(n,i,d)),a.updateImmediateChild(n,i);{s?.trackChildChange(wr(n,d));let S=a.updateImmediateChild(n,R.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(ei(h.name,h.node)),S.updateImmediateChild(h.name,h.node)):S}}else return i.isEmpty()?e:u&&o(c,l)>=0?(s!=null&&(s.trackChildChange(wr(c.name,c.node)),s.trackChildChange(ei(n,i))),a.updateImmediateChild(n,i).updateImmediateChild(c.name,R.EMPTY_NODE)):e}};var Wl=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=q}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return g(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return g(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qn}hasEnd(){return this.endSet_}getIndexEndValue(){return g(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return g(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yn}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return g(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===q}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function YE(t){return t.loadsAllData()?new Cr(t.getIndex()):t.hasLimit()?new $l(t):new _o(t)}function um(t){let e={};if(t.isDefault())return e;let n;if(t.index_===q?n="$priority":t.index_===qE?n="$value":t.index_===Yn?n="$key":(g(t.index_ instanceof Ul,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=J(n),t.startSet_){let i=t.startAfterSet_?"startAfter":"startAt";e[i]=J(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+J(t.indexStartName_))}if(t.endSet_){let i=t.endBeforeSet_?"endBefore":"endAt";e[i]=J(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+J(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function dm(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==q&&(e.i=t.index_.toString()),e}var zl=class t extends ho{constructor(e,n,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Dr("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(g(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,r){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,i),a={};this.listens_[o]=a;let l=um(e._queryParams);this.restRequest_(s+".json",l,(c,u)=>{let d=u;if(c===404&&(d=null,c=null),c===null&&this.onDataUpdate_(s,d,!1,i),dn(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(e,n){let i=t.getListenId_(e,n);delete this.listens_[i]}get(e){let n=um(e._queryParams),i=e._path.toString(),r=new Ot;return this.restRequest_(i+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(i,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Dp(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(i&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=zn(a.responseText)}catch{Ce("Failed to parse JSON response for "+o+": "+a.responseText)}i(null,l)}else a.status!==401&&a.status!==404&&Ce("Got unsuccessful REST response for "+o+" Status: "+a.status),i(a.status);i=null}},a.open("GET",o,!0),a.send()})}};var Gl=class{constructor(){this.rootNode_=R.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function vo(){return{value:null,children:new Map}}function ng(t,e,n){if(F(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let i=O(e);t.children.has(i)||t.children.set(i,vo());let r=t.children.get(i);e=z(e),ng(r,e,n)}}function Hl(t,e,n){t.value!==null?n(e,t.value):QE(t,(i,r)=>{let s=new B(e.toString()+"/"+i);Hl(r,s,n)})}function QE(t,e){t.children.forEach((n,i)=>{e(i,n)})}var ql=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ie(this.last_,(i,r)=>{n[i]=n[i]-r}),this.last_=e,n}};var hm=10*1e3,JE=30*1e3,XE=5*60*1e3,Kl=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ql(e);let i=hm+(JE-hm)*Math.random();gr(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){let e=this.statsListener_.get(),n={},i=!1;Ie(e,(r,s)=>{s>0&&et(this.statsToReport_,r)&&(n[r]=s,i=!0)}),i&&this.server_.reportStats(n),gr(this.reportStats_.bind(this),Math.floor(Math.random()*2*XE))}};var nt=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(nt||{});function ig(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bu(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function wu(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Yl=class t{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=nt.ACK_USER_WRITE,this.source=ig()}operationForChild(e){if(F(this.path)){if(this.affectedTree.value!=null)return g(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new B(e));return new t(j(),n,this.revert)}}else return g(O(this.path)===e,"operationForChild called for unrelated child."),new t(z(this.path),this.affectedTree,this.revert)}};var yo=class t{constructor(e,n){this.source=e,this.path=n,this.type=nt.LISTEN_COMPLETE}operationForChild(e){return F(this.path)?new t(this.source,j()):new t(this.source,z(this.path))}};var ti=class t{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=nt.OVERWRITE}operationForChild(e){return F(this.path)?new t(this.source,j(),this.snap.getImmediateChild(e)):new t(this.source,z(this.path),this.snap)}};var bo=class t{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=nt.MERGE}operationForChild(e){if(F(this.path)){let n=this.children.subtree(new B(e));return n.isEmpty()?null:n.value?new ti(this.source,j(),n.value):new t(this.source,j(),n)}else return g(O(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,z(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var it=class{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(F(e))return this.isFullyInitialized()&&!this.filtered_;let n=O(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var Ql=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function ZE(t,e,n,i){let r=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(KE(o.childName,o.snapshotNode))}),mr(t,r,"child_removed",e,i,n),mr(t,r,"child_added",e,i,n),mr(t,r,"child_moved",s,i,n),mr(t,r,"child_changed",e,i,n),mr(t,r,"value",e,i,n),r}function mr(t,e,n,i,r,s){let o=i.filter(a=>a.type===n);o.sort((a,l)=>tC(t,a,l)),o.forEach(a=>{let l=eC(t,a,s);r.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,t.query_))})})}function eC(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function tC(t,e,n){if(e.childName==null||n.childName==null)throw un("Should only compare child_ events.");let i=new k(e.childName,e.snapshotNode),r=new k(n.childName,n.snapshotNode);return t.index_.compare(i,r)}function Po(t,e){return{eventCache:t,serverCache:e}}function vr(t,e,n,i){return Po(new it(e,n,i),t.serverCache)}function rg(t,e,n,i){return Po(t.eventCache,new it(e,n,i))}function wo(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function bn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var vl,nC=()=>(vl||(vl=new Le(iE)),vl),Se=class t{constructor(e,n=nC()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return Ie(e,(i,r)=>{n=n.set(new B(i),r)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:j(),value:this.value};if(F(e))return null;{let i=O(e),r=this.children.get(i);if(r!==null){let s=r.findRootMostMatchingPathAndValue(z(e),n);return s!=null?{path:ne(new B(i),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(F(e))return this;{let n=O(e),i=this.children.get(n);return i!==null?i.subtree(z(e)):new t(null)}}set(e,n){if(F(e))return new t(n,this.children);{let i=O(e),s=(this.children.get(i)||new t(null)).set(z(e),n),o=this.children.insert(i,s);return new t(this.value,o)}}remove(e){if(F(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=O(e),i=this.children.get(n);if(i){let r=i.remove(z(e)),s;return r.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,r),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(F(e))return this.value;{let n=O(e),i=this.children.get(n);return i?i.get(z(e)):null}}setTree(e,n){if(F(e))return n;{let i=O(e),s=(this.children.get(i)||new t(null)).setTree(z(e),n),o;return s.isEmpty()?o=this.children.remove(i):o=this.children.insert(i,s),new t(this.value,o)}}fold(e){return this.fold_(j(),e)}fold_(e,n){let i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(ne(e,r),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,j(),n)}findOnPath_(e,n,i){let r=this.value?i(n,this.value):!1;if(r)return r;if(F(e))return null;{let s=O(e),o=this.children.get(s);return o?o.findOnPath_(z(e),ne(n,s),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,j(),n)}foreachOnPath_(e,n,i){if(F(e))return this;{this.value&&i(n,this.value);let r=O(e),s=this.children.get(r);return s?s.foreachOnPath_(z(e),ne(n,r),i):new t(null)}}foreach(e){this.foreach_(j(),e)}foreach_(e,n){this.children.inorderTraversal((i,r)=>{r.foreach_(ne(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}};var ze=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new Se(null))}};function yr(t,e,n){if(F(e))return new ze(new Se(n));{let i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){let r=i.path,s=i.value,o=be(r,e);return s=s.updateChild(o,n),new ze(t.writeTree_.set(r,s))}else{let r=new Se(n),s=t.writeTree_.setTree(e,r);return new ze(s)}}}function fm(t,e,n){let i=t;return Ie(n,(r,s)=>{i=yr(i,ne(e,r),s)}),i}function pm(t,e){if(F(e))return ze.empty();{let n=t.writeTree_.setTree(e,new Se(null));return new ze(n)}}function Jl(t,e){return wn(t,e)!=null}function wn(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(be(n.path,e)):null}function mm(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(q,(i,r)=>{e.push(new k(i,r))}):t.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new k(i,r.value))}),e}function Ft(t,e){if(F(e))return t;{let n=wn(t,e);return n!=null?new ze(new Se(n)):new ze(t.writeTree_.subtree(e))}}function Xl(t){return t.writeTree_.isEmpty()}function ni(t,e){return sg(j(),t.writeTree_,e)}function sg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{r===".priority"?(g(s.value!==null,"Priority writes must always be leaf nodes"),i=s.value):n=sg(ne(t,r),s,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(ne(t,".priority"),i)),n}}function Fo(t,e){return lg(e,t)}function iC(t,e,n,i,r){g(i>t.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:r}),r&&(t.visibleWrites=yr(t.visibleWrites,e,n)),t.lastWriteId=i}function rC(t,e){for(let n=0;n<t.allWrites.length;n++){let i=t.allWrites[n];if(i.writeId===e)return i}return null}function sC(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);g(n>=0,"removeWrite called with nonexistent writeId.");let i=t.allWrites[n];t.allWrites.splice(n,1);let r=i.visible,s=!1,o=t.allWrites.length-1;for(;r&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&oC(a,i.path)?r=!1:We(i.path,a.path)&&(s=!0)),o--}if(r){if(s)return aC(t),!0;if(i.snap)t.visibleWrites=pm(t.visibleWrites,i.path);else{let a=i.children;Ie(a,l=>{t.visibleWrites=pm(t.visibleWrites,ne(i.path,l))})}return!0}else return!1}function oC(t,e){if(t.snap)return We(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&We(ne(t.path,n),e))return!0;return!1}function aC(t){t.visibleWrites=og(t.allWrites,cC,j()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function cC(t){return t.visible}function og(t,e,n){let i=ze.empty();for(let r=0;r<t.length;++r){let s=t[r];if(e(s)){let o=s.path,a;if(s.snap)We(n,o)?(a=be(n,o),i=yr(i,a,s.snap)):We(o,n)&&(a=be(o,n),i=yr(i,j(),s.snap.getChild(a)));else if(s.children){if(We(n,o))a=be(n,o),i=fm(i,a,s.children);else if(We(o,n))if(a=be(o,n),F(a))i=fm(i,j(),s.children);else{let l=dn(s.children,O(a));if(l){let c=l.getChild(z(a));i=yr(i,j(),c)}}}else throw un("WriteRecord should have .snap or .children")}}return i}function ag(t,e,n,i,r){if(!i&&!r){let s=wn(t.visibleWrites,e);if(s!=null)return s;{let o=Ft(t.visibleWrites,e);if(Xl(o))return n;if(n==null&&!Jl(o,j()))return null;{let a=n||R.EMPTY_NODE;return ni(o,a)}}}else{let s=Ft(t.visibleWrites,e);if(!r&&Xl(s))return n;if(!r&&n==null&&!Jl(s,j()))return null;{let o=function(c){return(c.visible||r)&&(!i||!~i.indexOf(c.writeId))&&(We(c.path,e)||We(e,c.path))},a=og(t.allWrites,o,e),l=n||R.EMPTY_NODE;return ni(a,l)}}}function lC(t,e,n){let i=R.EMPTY_NODE,r=wn(t.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(q,(s,o)=>{i=i.updateImmediateChild(s,o)}),i;if(n){let s=Ft(t.visibleWrites,e);return n.forEachChild(q,(o,a)=>{let l=ni(Ft(s,new B(o)),a);i=i.updateImmediateChild(o,l)}),mm(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}else{let s=Ft(t.visibleWrites,e);return mm(s).forEach(o=>{i=i.updateImmediateChild(o.name,o.node)}),i}}function uC(t,e,n,i,r){g(i||r,"Either existingEventSnap or existingServerSnap must exist");let s=ne(e,n);if(Jl(t.visibleWrites,s))return null;{let o=Ft(t.visibleWrites,s);return Xl(o)?r.getChild(n):ni(o,r.getChild(n))}}function dC(t,e,n,i){let r=ne(e,n),s=wn(t.visibleWrites,r);if(s!=null)return s;if(i.isCompleteForChild(n)){let o=Ft(t.visibleWrites,r);return ni(o,i.getNode().getImmediateChild(n))}else return null}function hC(t,e){return wn(t.visibleWrites,e)}function fC(t,e,n,i,r,s,o){let a,l=Ft(t.visibleWrites,e),c=wn(l,j());if(c!=null)a=c;else if(n!=null)a=ni(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let u=[],d=o.getCompare(),h=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o),f=h.getNext();for(;f&&u.length<r;)d(f,i)!==0&&u.push(f),f=h.getNext();return u}else return[]}function pC(){return{visibleWrites:ze.empty(),allWrites:[],lastWriteId:-1}}function Eo(t,e,n,i){return ag(t.writeTree,t.treePath,e,n,i)}function Eu(t,e){return lC(t.writeTree,t.treePath,e)}function gm(t,e,n,i){return uC(t.writeTree,t.treePath,e,n,i)}function Co(t,e){return hC(t.writeTree,ne(t.treePath,e))}function mC(t,e,n,i,r,s){return fC(t.writeTree,t.treePath,e,n,i,r,s)}function Cu(t,e,n){return dC(t.writeTree,t.treePath,e,n)}function cg(t,e){return lg(ne(t.treePath,e),t.writeTree)}function lg(t,e){return{treePath:t,writeTree:e}}var Zl=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,i=e.childName;g(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),g(i!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(i);if(r){let s=r.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(i,Er(i,e.snapshotNode,r.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(i,wr(i,r.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(i,ei(i,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(i,Er(i,e.snapshotNode,r.oldSnap));else throw un("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}};var eu=class{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}},ug=new eu,Ir=class{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let i=this.optCompleteServerCache_!=null?new it(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cu(this.writes_,e,i)}}getChildAfterChild(e,n,i){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:bn(this.viewCache_),s=mC(this.writes_,r,n,1,i,e);return s.length===0?null:s[0]}};function gC(t){return{filter:t}}function _C(t,e){g(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),g(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function vC(t,e,n,i,r){let s=new Zl,o,a;if(n.type===nt.OVERWRITE){let c=n;c.source.fromUser?o=tu(t,e,c.path,c.snap,i,r,s):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!F(c.path),o=Io(t,e,c.path,c.snap,i,r,a,s))}else if(n.type===nt.MERGE){let c=n;c.source.fromUser?o=bC(t,e,c.path,c.children,i,r,s):(g(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=nu(t,e,c.path,c.children,i,r,a,s))}else if(n.type===nt.ACK_USER_WRITE){let c=n;c.revert?o=CC(t,e,c.path,i,r,s):o=wC(t,e,c.path,c.affectedTree,i,r,s)}else if(n.type===nt.LISTEN_COMPLETE)o=EC(t,e,n.path,i,s);else throw un("Unknown operation type: "+n.type);let l=s.getChanges();return yC(e,o,l),{viewCache:o,changes:l}}function yC(t,e,n){let i=e.eventCache;if(i.isFullyInitialized()){let r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=wo(t);(n.length>0||!t.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(tg(wo(e)))}}function dg(t,e,n,i,r,s){let o=e.eventCache;if(Co(i,n)!=null)return e;{let a,l;if(F(n))if(g(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let c=bn(e),u=c instanceof R?c:R.EMPTY_NODE,d=Eu(i,u);a=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{let c=Eo(i,bn(e));a=t.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{let c=O(n);if(c===".priority"){g(jt(n)===1,"Can't have a priority with additional path components");let u=o.getNode();l=e.serverCache.getNode();let d=gm(i,n,u,l);d!=null?a=t.filter.updatePriority(u,d):a=o.getNode()}else{let u=z(n),d;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();let h=gm(i,n,o.getNode(),l);h!=null?d=o.getNode().getImmediateChild(c).updateChild(u,h):d=o.getNode().getImmediateChild(c)}else d=Cu(i,c,e.serverCache);d!=null?a=t.filter.updateChild(o.getNode(),c,d,u,r,s):a=o.getNode()}}return vr(e,a,o.isFullyInitialized()||F(n),t.filter.filtersNodes())}}function Io(t,e,n,i,r,s,o,a){let l=e.serverCache,c,u=o?t.filter:t.filter.getIndexedFilter();if(F(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){let f=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),f,null)}else{let f=O(n);if(!l.isCompleteForPath(n)&&jt(n)>1)return e;let p=z(n),C=l.getNode().getImmediateChild(f).updateChild(p,i);f===".priority"?c=u.updatePriority(l.getNode(),C):c=u.updateChild(l.getNode(),f,C,p,ug,null)}let d=rg(e,c,l.isFullyInitialized()||F(n),u.filtersNodes()),h=new Ir(r,d,s);return dg(t,d,n,r,h,a)}function tu(t,e,n,i,r,s,o){let a=e.eventCache,l,c,u=new Ir(r,e,s);if(F(n))c=t.filter.updateFullNode(e.eventCache.getNode(),i,o),l=vr(e,c,!0,t.filter.filtersNodes());else{let d=O(n);if(d===".priority")c=t.filter.updatePriority(e.eventCache.getNode(),i),l=vr(e,c,a.isFullyInitialized(),a.isFiltered());else{let h=z(n),f=a.getNode().getImmediateChild(d),p;if(F(h))p=i;else{let S=u.getCompleteChild(d);S!=null?qm(h)===".priority"&&S.getChild(Ym(h)).isEmpty()?p=S:p=S.updateChild(h,i):p=R.EMPTY_NODE}if(f.equals(p))l=e;else{let S=t.filter.updateChild(a.getNode(),d,p,h,u,o);l=vr(e,S,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function _m(t,e){return t.eventCache.isCompleteForChild(e)}function bC(t,e,n,i,r,s,o){let a=e;return i.foreach((l,c)=>{let u=ne(n,l);_m(e,O(u))&&(a=tu(t,a,u,c,r,s,o))}),i.foreach((l,c)=>{let u=ne(n,l);_m(e,O(u))||(a=tu(t,a,u,c,r,s,o))}),a}function vm(t,e,n){return n.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function nu(t,e,n,i,r,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,c;F(n)?c=i:c=new Se(null).setTree(n,i);let u=e.serverCache.getNode();return c.children.inorderTraversal((d,h)=>{if(u.hasChild(d)){let f=e.serverCache.getNode().getImmediateChild(d),p=vm(t,f,h);l=Io(t,l,new B(d),p,r,s,o,a)}}),c.children.inorderTraversal((d,h)=>{let f=!e.serverCache.isCompleteForChild(d)&&h.value===null;if(!u.hasChild(d)&&!f){let p=e.serverCache.getNode().getImmediateChild(d),S=vm(t,p,h);l=Io(t,l,new B(d),S,r,s,o,a)}}),l}function wC(t,e,n,i,r,s,o){if(Co(r,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(i.value!=null){if(F(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Io(t,e,n,l.getNode().getChild(n),r,s,a,o);if(F(n)){let c=new Se(null);return l.getNode().forEachChild(Yn,(u,d)=>{c=c.set(new B(u),d)}),nu(t,e,n,c,r,s,a,o)}else return e}else{let c=new Se(null);return i.foreach((u,d)=>{let h=ne(n,u);l.isCompleteForPath(h)&&(c=c.set(u,l.getNode().getChild(h)))}),nu(t,e,n,c,r,s,a,o)}}function EC(t,e,n,i,r){let s=e.serverCache,o=rg(e,s.getNode(),s.isFullyInitialized()||F(n),s.isFiltered());return dg(t,o,n,i,ug,r)}function CC(t,e,n,i,r,s){let o;if(Co(i,n)!=null)return e;{let a=new Ir(i,e,r),l=e.eventCache.getNode(),c;if(F(n)||O(n)===".priority"){let u;if(e.serverCache.isFullyInitialized())u=Eo(i,bn(e));else{let d=e.serverCache.getNode();g(d instanceof R,"serverChildren would be complete if leaf node"),u=Eu(i,d)}u=u,c=t.filter.updateFullNode(l,u,s)}else{let u=O(n),d=Cu(i,u,e.serverCache);d==null&&e.serverCache.isCompleteForChild(u)&&(d=l.getImmediateChild(u)),d!=null?c=t.filter.updateChild(l,u,d,z(n),a,s):e.eventCache.getNode().hasChild(u)?c=t.filter.updateChild(l,u,R.EMPTY_NODE,z(n),a,s):c=l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Eo(i,bn(e)),o.isLeafNode()&&(c=t.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||Co(i,j())!=null,vr(e,c,o,t.filter.filtersNodes())}}var iu=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let i=this.query_._queryParams,r=new Cr(i.getIndex()),s=YE(i);this.processor_=gC(s);let o=n.serverCache,a=n.eventCache,l=r.updateFullNode(R.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(R.EMPTY_NODE,a.getNode(),null),u=new it(l,o.isFullyInitialized(),r.filtersNodes()),d=new it(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Po(d,u),this.eventGenerator_=new Ql(this.query_)}get query(){return this.query_}};function IC(t){return t.viewCache_.serverCache.getNode()}function SC(t){return wo(t.viewCache_)}function TC(t,e){let n=bn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!F(e)&&!n.getImmediateChild(O(e)).isEmpty())?n.getChild(e):null}function ym(t){return t.eventRegistrations_.length===0}function AC(t,e){t.eventRegistrations_.push(e)}function bm(t,e,n){let i=[];if(n){g(e==null,"A cancel should cancel all event registrations.");let r=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,r);o&&i.push(o)})}if(e){let r=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))r.push(o);else if(e.hasAnyCallback()){r=r.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=r}else t.eventRegistrations_=[];return i}function wm(t,e,n,i){e.type===nt.MERGE&&e.source.queryId!==null&&(g(bn(t.viewCache_),"We should always have a full cache before handling merges"),g(wo(t.viewCache_),"Missing event cache, even though we have a server cache"));let r=t.viewCache_,s=vC(t.processor_,r,e,n,i);return _C(t.processor_,s.viewCache),g(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,hg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function RC(t,e){let n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(q,(s,o)=>{i.push(ei(s,o))}),n.isFullyInitialized()&&i.push(tg(n.getNode())),hg(t,i,n.getNode(),e)}function hg(t,e,n,i){let r=i?[i]:t.eventRegistrations_;return ZE(t.eventGenerator_,e,n,r)}var So,To=class{constructor(){this.views=new Map}};function DC(t){g(!So,"__referenceConstructor has already been defined"),So=t}function xC(){return g(So,"Reference.ts has not been loaded"),So}function MC(t){return t.views.size===0}function Iu(t,e,n,i){let r=e.source.queryId;if(r!==null){let s=t.views.get(r);return g(s!=null,"SyncTree gave us an op for an invalid query."),wm(s,e,n,i)}else{let s=[];for(let o of t.views.values())s=s.concat(wm(o,e,n,i));return s}}function fg(t,e,n,i,r){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=Eo(n,r?i:null),l=!1;a?l=!0:i instanceof R?(a=Eu(n,i),l=!1):(a=R.EMPTY_NODE,l=!1);let c=Po(new it(a,l,!1),new it(i,r,!1));return new iu(e,c)}return o}function NC(t,e,n,i,r,s){let o=fg(t,e,i,r,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),AC(o,n),RC(o,n)}function OC(t,e,n,i){let r=e._queryIdentifier,s=[],o=[],a=Vt(t);if(r==="default")for(let[l,c]of t.views.entries())o=o.concat(bm(c,n,i)),ym(c)&&(t.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=t.views.get(r);l&&(o=o.concat(bm(l,n,i)),ym(l)&&(t.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Vt(t)&&s.push(new(xC())(e._repo,e._path)),{removed:s,events:o}}function pg(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Lt(t,e){let n=null;for(let i of t.views.values())n=n||TC(i,e);return n}function mg(t,e){if(e._queryParams.loadsAllData())return Lo(t);{let i=e._queryIdentifier;return t.views.get(i)}}function gg(t,e){return mg(t,e)!=null}function Vt(t){return Lo(t)!=null}function Lo(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var Ao;function kC(t){g(!Ao,"__referenceConstructor has already been defined"),Ao=t}function PC(){return g(Ao,"Reference.ts has not been loaded"),Ao}var FC=1,Ro=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Se(null),this.pendingWriteTree_=pC(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function _g(t,e,n,i,r){return iC(t.pendingWriteTree_,e,n,i,r),r?Nr(t,new ti(ig(),e,n)):[]}function _n(t,e,n=!1){let i=rC(t.pendingWriteTree_,e);if(sC(t.pendingWriteTree_,e)){let s=new Se(null);return i.snap!=null?s=s.set(j(),!0):Ie(i.children,o=>{s=s.set(new B(o),!0)}),Nr(t,new Yl(i.path,s,n))}else return[]}function Mr(t,e,n){return Nr(t,new ti(bu(),e,n))}function LC(t,e,n){let i=Se.fromObject(n);return Nr(t,new bo(bu(),e,i))}function jC(t,e){return Nr(t,new yo(bu(),e))}function VC(t,e,n){let i=Tu(t,n);if(i){let r=Au(i),s=r.path,o=r.queryId,a=be(s,e),l=new yo(wu(o),a);return Ru(t,s,l)}else return[]}function Do(t,e,n,i,r=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||gg(o,e))){let l=OC(o,e,n,i);MC(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let u=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(h,f)=>Vt(f));if(u&&!d){let h=t.syncPointTree_.subtree(s);if(!h.isEmpty()){let f=$C(h);for(let p=0;p<f.length;++p){let S=f[p],C=S.query,M=wg(t,S);t.listenProvider_.startListening(br(C),Sr(t,C),M.hashFn,M.onComplete)}}}!d&&c.length>0&&!i&&(u?t.listenProvider_.stopListening(br(e),null):c.forEach(h=>{let f=t.queryToTagMap.get(jo(h));t.listenProvider_.stopListening(br(h),f)}))}WC(t,c)}return a}function vg(t,e,n,i){let r=Tu(t,i);if(r!=null){let s=Au(r),o=s.path,a=s.queryId,l=be(o,e),c=new ti(wu(a),l,n);return Ru(t,o,c)}else return[]}function UC(t,e,n,i){let r=Tu(t,i);if(r){let s=Au(r),o=s.path,a=s.queryId,l=be(o,e),c=Se.fromObject(n),u=new bo(wu(a),l,c);return Ru(t,o,u)}else return[]}function ru(t,e,n,i=!1){let r=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(r,(h,f)=>{let p=be(h,r);s=s||Lt(f,p),o=o||Vt(f)});let a=t.syncPointTree_.get(r);a?(o=o||Vt(a),s=s||Lt(a,j())):(a=new To,t.syncPointTree_=t.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=R.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((f,p)=>{let S=Lt(p,j());S&&(s=s.updateImmediateChild(f,S))}));let c=gg(a,e);if(!c&&!e._queryParams.loadsAllData()){let h=jo(e);g(!t.queryToTagMap.has(h),"View does not exist, but we have a tag");let f=zC();t.queryToTagMap.set(h,f),t.tagToQueryMap.set(f,h)}let u=Fo(t.pendingWriteTree_,r),d=NC(a,e,n,u,s,l);if(!c&&!o&&!i){let h=mg(a,e);d=d.concat(GC(t,e,h))}return d}function Su(t,e,n){let r=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=be(o,e),c=Lt(a,l);if(c)return c});return ag(r,e,s,n,!0)}function BC(t,e){let n=e._path,i=null;t.syncPointTree_.foreachOnPath(n,(c,u)=>{let d=be(c,n);i=i||Lt(u,d)});let r=t.syncPointTree_.get(n);r?i=i||Lt(r,j()):(r=new To,t.syncPointTree_=t.syncPointTree_.set(n,r));let s=i!=null,o=s?new it(i,!0,!1):null,a=Fo(t.pendingWriteTree_,e._path),l=fg(r,e,a,s?o.getNode():R.EMPTY_NODE,s);return SC(l)}function Nr(t,e){return yg(e,t.syncPointTree_,null,Fo(t.pendingWriteTree_,j()))}function yg(t,e,n,i){if(F(t.path))return bg(t,e,n,i);{let r=e.get(j());n==null&&r!=null&&(n=Lt(r,j()));let s=[],o=O(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let c=n?n.getImmediateChild(o):null,u=cg(i,o);s=s.concat(yg(a,l,c,u))}return r&&(s=s.concat(Iu(r,t,i,n))),s}}function bg(t,e,n,i){let r=e.get(j());n==null&&r!=null&&(n=Lt(r,j()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,c=cg(i,o),u=t.operationForChild(o);u&&(s=s.concat(bg(u,a,l,c)))}),r&&(s=s.concat(Iu(r,t,i,n))),s}function wg(t,e){let n=e.query,i=Sr(t,n);return{hashFn:()=>(IC(e)||R.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?VC(t,n._path,i):jC(t,n._path);{let s=oE(r,n);return Do(t,n,null,s)}}}}function Sr(t,e){let n=jo(e);return t.queryToTagMap.get(n)}function jo(t){return t._path.toString()+"$"+t._queryIdentifier}function Tu(t,e){return t.tagToQueryMap.get(e)}function Au(t){let e=t.indexOf("$");return g(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new B(t.substr(0,e))}}function Ru(t,e,n){let i=t.syncPointTree_.get(e);g(i,"Missing sync point for query tag that we're tracking");let r=Fo(t.pendingWriteTree_,e);return Iu(i,n,r,null)}function $C(t){return t.fold((e,n,i)=>{if(n&&Vt(n))return[Lo(n)];{let r=[];return n&&(r=pg(n)),Ie(i,(s,o)=>{r=r.concat(o)}),r}})}function br(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(PC())(t._repo,t._path):t}function WC(t,e){for(let n=0;n<e.length;++n){let i=e[n];if(!i._queryParams.loadsAllData()){let r=jo(i),s=t.queryToTagMap.get(r);t.queryToTagMap.delete(r),t.tagToQueryMap.delete(s)}}}function zC(){return FC++}function GC(t,e,n){let i=e._path,r=Sr(t,e),s=wg(t,n),o=t.listenProvider_.startListening(br(e),r,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(i);if(r)g(!Vt(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,u,d)=>{if(!F(c)&&u&&Vt(u))return[Lo(u).query];{let h=[];return u&&(h=h.concat(pg(u).map(f=>f.query))),Ie(d,(f,p)=>{h=h.concat(p)}),h}});for(let c=0;c<l.length;++c){let u=l[c];t.listenProvider_.stopListening(br(u),Sr(t,u))}}return o}var su=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},ou=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=ne(this.path_,e);return new t(this.syncTree_,n)}node(){return Su(this.syncTree_,this.path_)}},HC=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Em=function(t,e,n){if(!t||typeof t!="object")return t;if(g(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return qC(t[".sv"],e,n);if(typeof t[".sv"]=="object")return KC(t[".sv"],e);g(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},qC=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:g(!1,"Unexpected server value: "+t)}},KC=function(t,e,n){t.hasOwnProperty("increment")||g(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let i=t.increment;typeof i!="number"&&g(!1,"Unexpected increment value: "+i);let r=e.node();if(g(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;let o=r.getValue();return typeof o!="number"?i:o+i},YC=function(t,e,n,i){return Du(e,new ou(n,t),i)},Eg=function(t,e,n){return Du(t,new su(e),n)};function Du(t,e,n){let i=t.getPriority().val(),r=Em(i,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=Em(o.getValue(),e,n);return a!==o.getValue()||r!==o.getPriority().val()?new Xn(a,ae(r)):t}else{let o=t;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new Xn(r))),o.forEachChild(q,(a,l)=>{let c=Du(l,e.getImmediateChild(a),n);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var Tr=class{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}};function xu(t,e){let n=e instanceof B?e:new B(e),i=t,r=O(n);for(;r!==null;){let s=dn(i.node.children,r)||{children:{},childCount:0};i=new Tr(r,i,s),n=z(n),r=O(n)}return i}function si(t){return t.node.value}function Cg(t,e){t.node.value=e,au(t)}function Ig(t){return t.node.childCount>0}function QC(t){return si(t)===void 0&&!Ig(t)}function Vo(t,e){Ie(t.node.children,(n,i)=>{e(new Tr(n,t,i))})}function Sg(t,e,n,i){n&&!i&&e(t),Vo(t,r=>{Sg(r,e,!0,i)}),n&&i&&e(t)}function JC(t,e,n){let i=n?t:t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Or(t){return new B(t.parent===null?t.name:Or(t.parent)+"/"+t.name)}function au(t){t.parent!==null&&XC(t.parent,t.name,t)}function XC(t,e,n){let i=QC(n),r=et(t.node.children,e);i&&r?(delete t.node.children[e],t.node.childCount--,au(t)):!i&&!r&&(t.node.children[e]=n.node,t.node.childCount++,au(t))}var ZC=/[\[\].#$\/\u0000-\u001F\u007F]/,eI=/[\[\].#$\u0000-\u001F\u007F]/,yl=10*1024*1024,Tg=function(t){return typeof t=="string"&&t.length!==0&&!ZC.test(t)},Ag=function(t){return typeof t=="string"&&t.length!==0&&!eI.test(t)},tI=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ag(t)};var nI=function(t,e,n,i){i&&e===void 0||Mu(io(t,"value"),e,n)},Mu=function(t,e,n){let i=n instanceof B?new Ol(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+mn(i));if(typeof e=="function")throw new Error(t+"contains a function "+mn(i)+" with contents = "+e.toString());if(Dm(e))throw new Error(t+"contains "+e.toString()+" "+mn(i));if(typeof e=="string"&&e.length>yl/3&&ar(e)>yl)throw new Error(t+"contains a string greater than "+yl+" utf8 bytes "+mn(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,s=!1;if(Ie(e,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Tg(o)))throw new Error(t+" contains an invalid key ("+o+") "+mn(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);PE(i,o),Mu(t,a,i),FE(i)}),r&&s)throw new Error(t+' contains ".value" child '+mn(i)+" in addition to actual children.")}};var Rg=function(t,e,n,i){if(!(i&&n===void 0)&&!Ag(n))throw new Error(io(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},iI=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Rg(t,e,n,i)},rI=function(t,e){if(O(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},sI=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Tg(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!tI(n))throw new Error(io(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var cu=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Nu(t,e){let n=null;for(let i=0;i<e.length;i++){let r=e[i],s=r.getPath();n!==null&&!_u(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(r)}n&&t.eventLists_.push(n)}function Dg(t,e,n){Nu(t,n),xg(t,i=>_u(i,e))}function rt(t,e,n){Nu(t,n),xg(t,i=>We(i,e)||We(e,i))}function xg(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){let r=t.eventLists_[i];if(r){let s=r.path;e(s)?(oI(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function oI(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let i=n.getEventRunner();vn&&ve("event: "+n.toString()),ri(i)}}}var aI="repo_interrupt",cI=25,lu=class{constructor(e,n,i,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new cu,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=vo(),this.transactionQueueTree_=new Tr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function lI(t,e,n){if(t.stats_=gu(t.repoInfo_),t.forceRestClient_||uE())t.server_=new zl(t.repoInfo_,(i,r,s,o)=>{Cm(t,i,r,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Im(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{J(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new vu(t.repoInfo_,e,(i,r,s,o)=>{Cm(t,i,r,s,o)},i=>{Im(t,i)},i=>{dI(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=hE(t.repoInfo_,()=>new Kl(t.stats_,t.server_)),t.infoData_=new Gl,t.infoSyncTree_=new Ro({startListening:(i,r,s,o)=>{let a=[],l=t.infoData_.getNode(i._path);return l.isEmpty()||(a=Mr(t.infoSyncTree_,i._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ku(t,"connected",!1),t.serverSyncTree_=new Ro({startListening:(i,r,s,o)=>(t.server_.listen(i,s,r,(a,l)=>{let c=o(a,l);rt(t.eventQueue_,i._path,c)}),[]),stopListening:(i,r)=>{t.server_.unlisten(i,r)}})}function uI(t){let n=t.infoData_.getNode(new B(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Ou(t){return HC({timestamp:uI(t)})}function Cm(t,e,n,i,r){t.dataUpdateCount++;let s=new B(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(i){let l=or(n,c=>ae(c));o=UC(t.serverSyncTree_,s,l,r)}else{let l=ae(n);o=vg(t.serverSyncTree_,s,l,r)}else if(i){let l=or(n,c=>ae(c));o=LC(t.serverSyncTree_,s,l)}else{let l=ae(n);o=Mr(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Bo(t,s)),rt(t.eventQueue_,a,o)}function Im(t,e){ku(t,"connected",e),e===!1&&pI(t)}function dI(t,e){Ie(e,(n,i)=>{ku(t,n,i)})}function ku(t,e,n){let i=new B("/.info/"+e),r=ae(n);t.infoData_.updateSnapshot(i,r);let s=Mr(t.infoSyncTree_,i,r);rt(t.eventQueue_,i,s)}function Mg(t){return t.nextWriteId_++}function hI(t,e,n){let i=BC(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(r=>{let s=ae(r).withIndex(e._queryParams.getIndex());ru(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=Mr(t.serverSyncTree_,e._path,s);else{let a=Sr(t.serverSyncTree_,e);o=vg(t.serverSyncTree_,e._path,s,a)}return rt(t.eventQueue_,e._path,o),Do(t.serverSyncTree_,e,n,null,!0),s},r=>(Uo(t,"get for query "+J(e)+" failed: "+r),Promise.reject(new Error(r))))}function fI(t,e,n,i,r){Uo(t,"set",{path:e.toString(),value:n,priority:i});let s=Ou(t),o=ae(n,i),a=Su(t.serverSyncTree_,e),l=Eg(o,a,s),c=Mg(t),u=_g(t.serverSyncTree_,e,l,c,!0);Nu(t.eventQueue_,u),t.server_.put(e.toString(),o.val(!0),(h,f)=>{let p=h==="ok";p||Ce("set at "+e+" failed: "+h);let S=_n(t.serverSyncTree_,c,!p);rt(t.eventQueue_,e,S),_I(t,r,h,f)});let d=Fg(t,e);Bo(t,d),rt(t.eventQueue_,d,[])}function pI(t){Uo(t,"onDisconnectEvents");let e=Ou(t),n=vo();Hl(t.onDisconnect_,j(),(r,s)=>{let o=YC(r,s,t.serverSyncTree_,e);ng(n,r,o)});let i=[];Hl(n,j(),(r,s)=>{i=i.concat(Mr(t.serverSyncTree_,r,s));let o=Fg(t,r);Bo(t,o)}),t.onDisconnect_=vo(),rt(t.eventQueue_,j(),i)}function mI(t,e,n){let i;O(e._path)===".info"?i=ru(t.infoSyncTree_,e,n):i=ru(t.serverSyncTree_,e,n),Dg(t.eventQueue_,e._path,i)}function Sm(t,e,n){let i;O(e._path)===".info"?i=Do(t.infoSyncTree_,e,n):i=Do(t.serverSyncTree_,e,n),Dg(t.eventQueue_,e._path,i)}function gI(t){t.persistentConnection_&&t.persistentConnection_.interrupt(aI)}function Uo(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ve(n,...e)}function _I(t,e,n,i){e&&ri(()=>{if(n==="ok")e(null);else{let r=(n||"error").toUpperCase(),s=r;i&&(s+=": "+i);let o=new Error(s);o.code=r,e(o)}})}function Ng(t,e,n){return Su(t.serverSyncTree_,e,n)||R.EMPTY_NODE}function Pu(t,e=t.transactionQueueTree_){if(e||$o(t,e),si(e)){let n=kg(t,e);g(n.length>0,"Sending zero length transaction queue"),n.every(r=>r.status===0)&&vI(t,Or(e),n)}else Ig(e)&&Vo(e,n=>{Pu(t,n)})}function vI(t,e,n){let i=n.map(c=>c.currentWriteId),r=Ng(t,e,i),s=r,o=r.hash();for(let c=0;c<n.length;c++){let u=n[c];g(u.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;let d=be(e,u.path);s=s.updateChild(d,u.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,c=>{Uo(t,"transaction put response",{path:l.toString(),status:c});let u=[];if(c==="ok"){let d=[];for(let h=0;h<n.length;h++)n[h].status=2,u=u.concat(_n(t.serverSyncTree_,n[h].currentWriteId)),n[h].onComplete&&d.push(()=>n[h].onComplete(null,!0,n[h].currentOutputSnapshotResolved)),n[h].unwatcher();$o(t,xu(t.transactionQueueTree_,e)),Pu(t,t.transactionQueueTree_),rt(t.eventQueue_,e,u);for(let h=0;h<d.length;h++)ri(d[h])}else{if(c==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Ce("transaction at "+l.toString()+" failed: "+c);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=c}Bo(t,e)}},o)}function Bo(t,e){let n=Og(t,e),i=Or(n),r=kg(t,n);return yI(t,r,i),i}function yI(t,e,n){if(e.length===0)return;let i=[],r=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],c=be(n,l.path),u=!1,d;if(g(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)u=!0,d=l.abortReason,r=r.concat(_n(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=cI)u=!0,d="maxretry",r=r.concat(_n(t.serverSyncTree_,l.currentWriteId,!0));else{let h=Ng(t,l.path,o);l.currentInputSnapshot=h;let f=e[a].update(h.val());if(f!==void 0){Mu("transaction failed: Data returned ",f,l.path);let p=ae(f);typeof f=="object"&&f!=null&&et(f,".priority")||(p=p.updatePriority(h.getPriority()));let C=l.currentWriteId,M=Ou(t),K=Eg(p,h,M);l.currentOutputSnapshotRaw=p,l.currentOutputSnapshotResolved=K,l.currentWriteId=Mg(t),o.splice(o.indexOf(C),1),r=r.concat(_g(t.serverSyncTree_,l.path,K,l.currentWriteId,l.applyLocally)),r=r.concat(_n(t.serverSyncTree_,C,!0))}else u=!0,d="nodata",r=r.concat(_n(t.serverSyncTree_,l.currentWriteId,!0))}rt(t.eventQueue_,n,r),r=[],u&&(e[a].status=2,function(h){setTimeout(h,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(d==="nodata"?i.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):i.push(()=>e[a].onComplete(new Error(d),!1,null))))}$o(t,t.transactionQueueTree_);for(let a=0;a<i.length;a++)ri(i[a]);Pu(t,t.transactionQueueTree_)}function Og(t,e){let n,i=t.transactionQueueTree_;for(n=O(e);n!==null&&si(i)===void 0;)i=xu(i,n),e=z(e),n=O(e);return i}function kg(t,e){let n=[];return Pg(t,e,n),n.sort((i,r)=>i.order-r.order),n}function Pg(t,e,n){let i=si(e);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Vo(e,r=>{Pg(t,r,n)})}function $o(t,e){let n=si(e);if(n){let i=0;for(let r=0;r<n.length;r++)n[r].status!==2&&(n[i]=n[r],i++);n.length=i,Cg(e,n.length>0?n:void 0)}Vo(e,i=>{$o(t,i)})}function Fg(t,e){let n=Or(Og(t,e)),i=xu(t.transactionQueueTree_,e);return JC(i,r=>{bl(t,r)}),bl(t,i),Sg(i,r=>{bl(t,r)}),n}function bl(t,e){let n=si(e);if(n){let i=[],r=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(g(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(g(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(_n(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&i.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Cg(e,void 0):n.length=s+1,rt(t.eventQueue_,Or(e),r);for(let o=0;o<i.length;o++)ri(i[o])}}function bI(t){let e="",n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let r=n[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function wI(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Ce(`Invalid query segment '${n}' in query '${t}'`)}return e}var Tm=function(t,e){let n=EI(t),i=n.namespace;n.domain==="firebase.com"&&vt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&vt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||tE();let r=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new lo(n.host,n.secure,i,r,e,"",i!==n.subdomain),path:new B(n.pathString)}},EI=function(t){let e="",n="",i="",r="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let c=t.indexOf("//");c>=0&&(a=t.substring(0,c-1),t=t.substring(c+2));let u=t.indexOf("/");u===-1&&(u=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(u,d)),u<d&&(r=bI(t.substring(u,d)));let h=wI(t.substring(Math.min(t.length,d)));c=e.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(c+1),10)):c=e.length;let f=e.slice(0,c);if(f.toLowerCase()==="localhost")n="localhost";else if(f.split(".").length<=2)n=f;else{let p=e.indexOf(".");i=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=i}"ns"in h&&(s=h.ns)}return{host:e,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}};var xo=class{constructor(e,n,i,r){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=r}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+J(this.snapshot.exportVal())}},Mo=class{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var No=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return g(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var uu=class t{constructor(e,n,i,r){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=r}get key(){return F(this._path)?null:qm(this._path)}get ref(){return new st(this._repo,this._path)}get _queryIdentifier(){let e=dm(this._queryParams),n=mu(e);return n==="{}"?"default":n}get _queryObject(){return dm(this._queryParams)}isEqual(e){if(e=hn(e),!(e instanceof t))return!1;let n=this._repo===e._repo,i=_u(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return n&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+kE(this._path)}};var st=class t extends uu{constructor(e,n){super(e,n,new Wl,!1)}get parent(){let e=Ym(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},Ar=class t{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new B(e),i=Oo(this.ref,e);return new t(this._node.getChild(n),i,q)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new t(r,Oo(this.ref,i),q)))}hasChild(e){let n=new B(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function kr(t,e){return t=hn(t),t._checkNotDeleted("ref"),e!==void 0?Oo(t._root,e):t._root}function Oo(t,e){return t=hn(t),O(t._path)===null?iI("child","path",e,!1):Rg("child","path",e,!1),new st(t._repo,ne(t._path,e))}function Fu(t,e){t=hn(t),rI("set",t._path),nI("set",e,t._path,!1);let n=new Ot;return fI(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function Lg(t){t=hn(t);let e=new No(()=>{}),n=new ko(e);return hI(t._repo,t,n).then(i=>new Ar(i,new st(t._repo,t._path),t._queryParams.getIndex()))}var ko=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let i=n._queryParams.getIndex();return new xo("value",this,new Ar(e.snapshotNode,new st(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mo(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},du=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Mo(this,e,n):null}createEvent(e,n){g(e.childName!=null,"Child events should have a childName.");let i=Oo(new st(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new xo(e.type,this,new Ar(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function CI(t,e,n,i,r){let s;if(typeof i=="object"&&(s=void 0,r=i),typeof i=="function"&&(s=i),r&&r.onlyOnce){let l=n,c=(u,d)=>{Sm(t._repo,t,a),l(u,d)};c.userCallback=n.userCallback,c.context=n.context,n=c}let o=new No(n,s||void 0),a=e==="value"?new ko(o):new du(e,o);return mI(t._repo,t,a),()=>Sm(t._repo,t,a)}function jg(t,e,n,i){return CI(t,"value",e,n,i)}DC(st);kC(st);var II="FIREBASE_DATABASE_EMULATOR_HOST",hu={},SI=!1;function TI(t,e,n,i){t.repoInfo_=new lo(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function AI(t,e,n,i,r){let s=i||t.options.databaseURL;s===void 0&&(t.options.projectId||vt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ve("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=Tm(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[II]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=Tm(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let u=r&&l?new _r(_r.OWNER):new Tl(t.name,t.options,e);sI("Invalid Firebase Database URL",o),F(o.path)||vt("Database URL must point to the root of a Firebase Database (not including a child path).");let d=DI(a,t,u,new Sl(t.name,n));return new fu(d,t)}function RI(t,e){let n=hu[e];(!n||n[t.key]!==t)&&vt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),gI(t),delete n[t.key]}function DI(t,e,n,i){let r=hu[e.name];r||(r={},hu[e.name]=r);let s=r[t.toURLString()];return s&&vt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new lu(t,SI,n,i),r[t.toURLString()]=s,s}var fu=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(lI(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new st(this._repo,j())),this._rootInternal}_delete(){return this._rootInternal!==null&&(RI(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vt("Cannot call "+e+" on a deleted database.")}};function Vg(t=Gp(),e){let n=Wp(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let i=wp("database");i&&xI(n,...i)}return n}function xI(t,e,n,i={}){t=hn(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&vt("Cannot call useEmulator() after instance has already been initialized.");let r=t._repoInternal,s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&vt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new _r(_r.OWNER);else if(i.mockUserToken){let o=typeof i.mockUserToken=="string"?i.mockUserToken:Ep(i.mockUserToken,t.app.options.projectId);s=new _r(o)}TI(r,e,n,s)}function MI(t){Xw(zp),lr(new _t("database",(e,{instanceIdentifier:n})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return AI(i,r,s,n)},"PUBLIC").setMultipleInstances(!0)),Pt(Kp,Yp,t),Pt(Kp,Yp,"esm2017")}vu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};vu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};MI();var oi=(()=>{class t{openChat=new le;usersYouTalkedWith=new le;receiverObjectId="";db=Vg();openChatWindow(n){this.receiverObjectId=n,this.openChat.emit(!0)}closeChatWindow(){this.openChat.emit(!1)}sendMessage(n){let i=kr(this.db,"chats/"+n.senderId+"/"+n.receiverId+"/"+n.timestamp),r=kr(this.db,"chats/"+n.receiverId+"/"+n.senderId+"/"+n.timestamp);Fu(i,{messageText:n.messageText,senderId:n.senderId,receiverId:n.receiverId,timestamp:n.timestamp}),Fu(r,{messageText:n.messageText,senderId:n.senderId,receiverId:n.receiverId,timestamp:n.timestamp})}listenForMessages(n){let i=kr(this.db,"chats/"+localStorage.getItem("objectId")+"/"+this.receiverObjectId),r=[];jg(i,s=>{r=[],s.forEach(o=>{r.push(o.val())}),n(r)})}getUsers(){let n=kr(this.db,"chats/"+localStorage.getItem("objectId"));Lg(n).then(i=>{let r=[];i.forEach(s=>{r.push(s.key)}),this.usersYouTalkedWith.emit(r)})}static \u0275fac=function(i){return new(i||t)};static \u0275prov=I({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var NI=(t,e)=>e.email;function OI(t,e){if(t&1){let n=gi();v(0,"li",5),U("click",function(){let r=Cn(n),s=r.$implicit,o=r.$index,a=we();return In(a.openChatWindow(s.objectId,o))}),v(1,"div",6)(2,"div",7),N(3,"img",8),b(),v(4,"div",9)(5,"div",10)(6,"p"),D(7),b()()()()()}if(t&2){let n=e.$implicit;G("@aniOne",void 0),L(7),Tn("",n.firstName," ",n.lastName,"")}}function kI(t,e){}var Ug=(()=>{class t{authService;messagingService;constructor(n,i){this.authService=n,this.messagingService=i}searchInput="";users=[];p=[new Xe("Abdelillah","Tamoussat","","","",""),new Xe("Abdelillah","Tamoussat","","","",""),new Xe("Abdelillah","Tamoussat","","","","")];ngOnInit(){this.messagingService.getUsers(),this.messagingService.usersYouTalkedWith.subscribe(n=>{n.forEach(i=>{this.authService.findUsersByObjectId(i,r=>{this.users.push(r),this.openChatWindow(this.users[0].objectId,0)})})})}findUsers(){if(this.searchInput.length!==0){let n=localStorage.getItem("userToken");this.authService.findUsersByName(this.searchInput,n,i=>{this.users=i})}else this.messagingService.getUsers()}openChatWindow(n,i){this.messagingService.closeChatWindow(),this.messagingService.openChatWindow(n),document.querySelectorAll(".users-list").forEach((s,o)=>{let a=s.querySelector(".name-class");o!==i?(s.classList.remove("bg-green-600"),a?.classList.remove("text-white"),a?.classList.add("text-gray-700")):(s.classList.add("bg-green-600"),s.classList.add("text-gray-600"),a?.classList.add("text-white"),a?.classList.remove("text-gray-700"))})}static \u0275fac=function(i){return new(i||t)(E(Ee),E(oi))};static \u0275cmp=Z({type:t,selectors:[["app-users"]],standalone:!0,features:[ee],decls:7,vars:4,consts:[[1,"h-full","px-5","pt-3","bg-[#EEF2F1]"],[1,"w-full"],["placeholder","Search for a user",1,"basis-[95%]","w-full","px-2","text-xl","font-light","border","outline-none","rounded-md","border-gray-300","focus:border-blue-600",3,"ngModelChange","ngModel"],[1,"basis-[94%]"],[1,"users-list","flex","flex-col-reverse","p-5","mt-5","rounded-md","cursor-pointer"],[1,"users-list","flex","flex-col-reverse","p-5","mt-5","rounded-md","cursor-pointer",3,"click"],[1,"flex"],[1,"h-11","w-11","rounded-full"],["src","./assets/user.jpg",1,"rounded-full"],[1,"name-class","w-full","flex","flex-col","justify-center","pl-3","text-gray-700"],[1,"w-full","flex","items-center","text-xl"]],template:function(i,r){i&1&&(v(0,"div",0)(1,"div",1)(2,"input",2),Qr("ngModelChange",function(o){return Yr(r.searchInput,o)||(r.searchInput=o),o}),U("ngModelChange",function(){return r.findUsers()}),b()(),v(3,"ul",3),Gr(4,OI,8,3,"li",4,NI,!1,kI,0,0),b()()),i&2&&(G("@opc",void 0),L(2),Kr("ngModel",r.searchInput),L(),G("@animateListOfUsers",r.users.length),L(),Hr(r.users))},dependencies:[Ue,Bs,Pe,Qe,Yi],data:{animation:[qt("opc",[St(":enter",[Re({opacity:0}),Kt("10s",Re({opacity:1}))])]),qt("animateListOfUsers",[St("* => *",[xd("li",Md(300,Dd()))])]),qt("aniOne",[St(":enter",[Re({transform:"translateX(-100%)"}),Kt("0.6s",Re({transform:"translateX(0)"}))])])]}})}return t})();var Wo=class{messageText;senderId;receiverId;timestamp;constructor(e,n,i,r){this.messageText=e,this.senderId=n,this.receiverId=i,this.timestamp=r}};var PI=(t,e)=>e.timestamp;function FI(t,e){t&1&&(v(0,"p",1),D(1,"No messages here"),b())}function LI(t,e){t&1&&N(0,"img",12)}function jI(t,e){if(t&1&&(v(0,"p"),D(1),b()),t&2){let n=we().$implicit,i=we();L(),Tn(" ",n.senderId===(i.senderUser==null?null:i.senderUser.objectId)?i.senderUser==null?null:i.senderUser.firstName:i.receiverUser==null?null:i.receiverUser.firstName," ",n.senderId===(i.senderUser==null?null:i.senderUser.objectId)?i.senderUser==null?null:i.senderUser.lastName:i.receiverUser==null?null:i.receiverUser.lastName," ")}}function VI(t,e){if(t&1&&(v(0,"ul",3)(1,"li",11),Ae(2,LI,1,0,"img",12),b(),v(3,"li",13)(4,"div",14),Ae(5,jI,2,2,"p"),b(),v(6,"div",15)(7,"p",16),D(8),b(),v(9,"p",17),D(10),vd(11,"date"),b()()()()),t&2){let n=e.$implicit,i=e.$index,r=e.$index,s=we();G("ngClass",n.senderId===s.getCurrentObjectId()?"justify-end flex-row-reverse":"justify-start flex-row"),L(2),ge(r===0||s.messages[i].senderId!==s.messages[i-1].senderId?2:-1),L(2),G("ngClass",n.senderId===s.getCurrentObjectId()?"justify-end pr-2":"justify-start pl-2"),L(),ge(r===0||s.messages[i].senderId!==s.messages[i-1].senderId?5:-1),L(),G("ngClass",n.senderId===s.getCurrentObjectId()?"pr-2 flex-row-reverse":"flex-row pl-2"),L(2),qr(" ",n.messageText," "),L(2),qr(" ",yd(11,7,n.timestamp,"hh:mm aa")," ")}}function UI(t,e){}var Bg=(()=>{class t{messagingService;authService;messages=[];senderUser;receiverUser;text="";constructor(n,i){this.messagingService=n,this.authService=i,this.messagingService.listenForMessages(r=>{this.messages=r}),this.messagingService.openChat.subscribe(r=>{r&&this.messagingService.listenForMessages(s=>{this.messages=s})}),this.authService.getFullName(localStorage.getItem("objectId"),r=>{this.senderUser=r}),this.authService.getFullName(this.messagingService.receiverObjectId,r=>{this.receiverUser=r})}sendMessage(){if(this.text!==""){let n=new Wo(this.text,localStorage.getItem("objectId"),this.messagingService.receiverObjectId,Date.now().toString());this.text="",this.messagingService.sendMessage(n)}}getCurrentObjectId(){return localStorage.getItem("objectId")}static \u0275fac=function(i){return new(i||t)(E(oi),E(Ee))};static \u0275cmp=Z({type:t,selectors:[["app-chat"]],standalone:!0,features:[ee],decls:13,vars:3,consts:[[1,"h-full","w-full","flex","flex-col","pt-3","px-3","bg-[#F6EFEE]"],[1,"w-full","text-center","bg-gray-500","text-white"],[1,"basis-[94%]","flex","flex-col","mb-3","py-3","bg-white","rounded-md","overflow-y-auto"],[1,"flex","px-5",3,"ngClass"],[1,"basis-[6%]","flex","mb-3"],["placeholder","Type a message",1,"basis-[95%]","w-full","h-full","px-2","text-xl","border-gray-300","outline-none","border","rounded-md","focus:border-blue-600","font-lightborder",3,"ngModelChange","keydown.enter","ngModel"],[1,"basis-[5%]","p-2"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#16a34a","height","32px","width","32px","version","1.1","id","Capa_1","viewBox","0 0 495.003 495.003",0,"xml","space","preserve",1,"cursor-pointer",3,"click"],["id","XMLID_51_"],["id","XMLID_53_","d","M164.711,456.687c0,2.966,1.647,5.686,4.266,7.072c2.617,1.385,5.799,1.207,8.245-0.468l55.09-37.616   l-67.6-32.22V456.687z"],["id","XMLID_52_","d","M492.431,32.443c-1.513-1.395-3.466-2.125-5.44-2.125c-1.19,0-2.377,0.264-3.5,0.816L7.905,264.422   c-4.861,2.389-7.937,7.353-7.904,12.783c0.033,5.423,3.161,10.353,8.057,12.689l125.342,59.724l250.62-205.99L164.455,364.414   l156.145,74.4c1.918,0.919,4.012,1.376,6.084,1.376c1.768,0,3.519-0.322,5.186-0.977c3.637-1.438,6.527-4.318,7.97-7.956   L494.436,41.257C495.66,38.188,494.862,34.679,492.431,32.443z"],[1,"w-11","rounded-full"],["src","./assets/user.jpg",1,"rounded-full"],[1,"w-full","flex","flex-col"],[1,"w-full","flex","text-xl",3,"ngClass"],[1,"flex","items-center","select-text",3,"ngClass"],[1,"text-lg","font-light"],[1,"ml-2","font-light","text-xs","px-2"]],template:function(i,r){i&1&&(v(0,"div",0),Ae(1,FI,2,0,"p",1),v(2,"div",2),Gr(3,VI,12,10,"ul",3,PI,!1,UI,0,0),b(),v(6,"div",4)(7,"input",5),Qr("ngModelChange",function(o){return Yr(r.text,o)||(r.text=o),o}),U("keydown.enter",function(){return r.sendMessage()}),b(),v(8,"div",6),at(),v(9,"svg",7),U("click",function(){return r.sendMessage()}),v(10,"g",8),N(11,"path",9)(12,"path",10),b()()()()()),i&2&&(L(),ge(r.messages.length===0?1:-1),L(2),Hr(r.messages),L(4),Kr("ngModel",r.text))},dependencies:[Ue,ns,Sd,Bs,Pe,Qe,Yi]})}return t})();var $g=(()=>{class t{authService;currentUser;hiddenSettings=cd();constructor(n){this.authService=n}ngOnInit(){this.authService.findUserByEmail(localStorage.getItem("email"),n=>{this.currentUser=n,this.infoGroup.controls.firstName.setValue(this.currentUser.firstName),this.infoGroup.controls.lastName.setValue(this.currentUser.lastName),this.infoGroup.controls.email.setValue(this.currentUser.email),this.currentUser.provider==="google"&&(this.infoGroup.controls.email.disable(),this.infoGroup.controls.password.disable())})}infoGroup=new Nt({firstName:new _e("",[he.required]),lastName:new _e("",[he.required]),email:new _e("",[he.required,he.email]),password:new _e("")});updateInfos(){this.infoGroup.valid&&this.currentUser.provider!=="google"?this.authService.updateInfos(localStorage.getItem("objectId"),this.infoGroup.value.firstName,this.infoGroup.value.lastName,this.infoGroup.value.email,this.infoGroup.value.password.length>=8?this.infoGroup.value.password:void 0,n=>{localStorage.setItem("email",n.email)}):this.infoGroup.valid&&this.authService.updateInfos(localStorage.getItem("objectId"),this.infoGroup.value.firstName,this.infoGroup.value.lastName,void 0,void 0,n=>{})}hideSettings(){this.hiddenSettings.emit(!0)}static \u0275fac=function(i){return new(i||t)(E(Ee))};static \u0275cmp=Z({type:t,selectors:[["app-settings"]],outputs:{hiddenSettings:"hiddenSettings"},standalone:!0,features:[ee],decls:27,vars:1,consts:[[1,"h-full","w-full","border-t"],[1,"w-full","p-8"],[1,"flex","items-center","cursor-pointer",3,"click"],[1,"h-8","w-8"],["src","./assets/back.png"],[1,"ml-2","font-bold"],[1,"w-full","h-3/6","flex","justify-center"],[1,"settings-form","w-1/3","flex","flex-col","justify-between",3,"formGroup"],[1,"text-xl","font-bold"],["placeholder","First name","formControlName","firstName",1,"w-full","text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],["placeholder","Last name","formControlName","lastName",1,"w-full","text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],["type","email","placeholder","email","formControlName","email",1,"w-full","text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],["type","password","formControlName","password",1,"w-full","text-xl","font-light","h-9","px-2","border","border-gray-300","outline-none","rounded-md","focus:border-blue-600"],[1,"bg-green-600","text-white","h-9","text-xl","font-light","rounded-md",3,"click"]],template:function(i,r){i&1&&(v(0,"div",0)(1,"header",1)(2,"div",2),U("click",function(){return r.hideSettings()}),v(3,"div",3),N(4,"img",4),b(),v(5,"p",5),D(6,"Back"),b()()(),v(7,"div",6)(8,"form",7)(9,"div")(10,"label",8),D(11,"First name"),b(),N(12,"input",9),b(),v(13,"div")(14,"label",8),D(15,"Last name"),b(),N(16,"input",10),b(),v(17,"div")(18,"label",8),D(19,"Email"),b(),N(20,"input",11),b(),v(21,"div")(22,"label",8),D(23,"Password"),b(),N(24,"input",12),b(),v(25,"button",13),U("click",function(){return r.updateInfos()}),D(26," Save "),b()()()()),i&2&&(L(8),G("formGroup",r.infoGroup))},dependencies:[$n,Bn,Pe,Qe,Un,nn,rn],styles:["@media only screen and (max-width: 600px){.settings-form[_ngcontent-%COMP%]{width:90%}}"]})}return t})();var BI=t=>[t];function $I(t,e){if(t&1){let n=gi();v(0,"ul",13)(1,"li",17),U("click",function(){Cn(n);let r=we();return In(r.openSettings())}),v(2,"div",18),N(3,"img",19),b(),v(4,"p",11),D(5,"Settings"),b()(),v(6,"li",17),U("click",function(){Cn(n);let r=we();return In(r.logout())}),v(7,"div",18),N(8,"img",20),b(),v(9,"p",11),D(10,"Logout"),b()()()}t&2&&G("@appear",void 0)}function WI(t,e){if(t&1&&N(0,"app-users",14),t&2){let n=we();G("ngClass",_d(1,BI,n.openedChat?"basis-1/3":"basis-full"))}}function zI(t,e){if(t&1&&N(0,"app-chat",15),t&2){let n=we();G("@appear",void 0)("ngClass",n.openedChat?"basis-2/3":"basis-0")}}function GI(t,e){if(t&1){let n=gi();v(0,"app-settings",21),U("hiddenSettings",function(){Cn(n);let r=we();return In(r.closeSettings())}),b()}if(t&2){let n=we();G("@appear",void 0)("ngClass",n.openedSettings?"basis-full":"basis-0")}}var Wg=(()=>{class t{router;messagingService;authService;openedChat=!1;openedSettings=!1;openedPanel=!1;openedUsersPanelInMobile=!1;changed=!1;constructor(n,i,r){this.router=n,this.messagingService=i,this.authService=r,this.getFullName()}currentUser;ngOnInit(){localStorage.getItem("email")===null||localStorage.getItem("userToken")===null||localStorage.getItem("objectId")===null?this.router.navigate(["/login"]):this.authService.verifyIfTokenValid(localStorage.getItem("userToken"),n=>{n||this.router.navigate(["/login"])}),this.messagingService.openChat.subscribe(n=>{this.openedChat=n})}getFullName(){this.authService.getFullName(localStorage.getItem("objectId"),n=>{this.currentUser=n})}openPanel(){this.openedPanel=!this.openedPanel}openSettings(){this.openedPanel=!1,this.openedChat=!1,this.openedSettings=!0}closeSettings(){this.openedSettings=!1}logout(){this.authService.logout(),localStorage.removeItem("email"),localStorage.removeItem("userToken"),localStorage.removeItem("objectId"),this.router.navigate(["/login"])}showMenu(){this.openedUsersPanelInMobile=!this.openedUsersPanelInMobile}change(){this.changed=!this.changed}static \u0275fac=function(i){return new(i||t)(E(Ye),E(oi),E(Ee))};static \u0275cmp=Z({type:t,selectors:[["app-home"]],standalone:!0,features:[ee],decls:19,vars:6,consts:[[1,"home","h-screen","w-full","flex","flex-col","select-none"],[1,"h-[10%]","flex","items-center","justify-between","px-7","mb:px-3","bg-white"],[1,"h-full","flex","items-center"],[1,"h-full","w-6","justify-center","hidden","mb:flex","mb:items-center",3,"click"],["src","./assets/menu.png"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","fill","#16a34a","height","48px","width","48px","version","1.1","id","Capa_1","viewBox","0 0 60 60",0,"xml","space","preserve",1,"ml-4"],["d","M30,1.5c-16.542,0-30,12.112-30,27c0,5.205,1.647,10.246,4.768,14.604c-0.591,6.537-2.175,11.39-4.475,13.689  c-0.304,0.304-0.38,0.769-0.188,1.153C0.276,58.289,0.625,58.5,1,58.5c0.046,0,0.093-0.003,0.14-0.01  c0.405-0.057,9.813-1.412,16.617-5.338C21.622,54.711,25.738,55.5,30,55.5c16.542,0,30-12.112,30-27S46.542,1.5,30,1.5z"],[1,"text-3xl","ml-2"],[1,"w-44","flex","justify-end","items-center","relative",3,"click"],[1,"h-9","w-9"],["src","./assets/user.jpg"],[1,"cursor-pointer"],[1,"h-[90%]","flex","flex-1","relative"],[1,"w-24","flex","flex-col","bg-white","border-b","border-r","border-l","absolute","right-0","mx-7","mb:mx-3"],[1,"mb:absolute","mb:h-full",3,"ngClass"],[1,"mb:basis-full",3,"ngClass"],[3,"ngClass"],[1,"flex","my-3","items-center",3,"click"],[1,"h-9","w-9","p-1","pl-2","content-center"],["src","./assets/settings.png"],["src","./assets/logout.png"],[3,"hiddenSettings","ngClass"]],template:function(i,r){i&1&&(v(0,"div",0)(1,"header",1)(2,"div",2)(3,"div",3),U("click",function(){return r.showMenu()}),N(4,"img",4),b(),at(),v(5,"svg",5),N(6,"path",6),b(),zt(),v(7,"p",7),D(8,"Chat"),b()(),v(9,"div",8),U("click",function(){return r.openPanel()}),v(10,"div",9),N(11,"img",10),b(),v(12,"p",11),D(13),b()()(),v(14,"div",12),Ae(15,$I,11,1,"ul",13)(16,WI,1,3,"app-users",14)(17,zI,1,2,"app-chat",15)(18,GI,1,2,"app-settings",16),b()()),i&2&&(L(13),Tn(" ",r.currentUser==null?null:r.currentUser.firstName," ",r.currentUser==null?null:r.currentUser.lastName," "),L(2),ge(r.openedPanel?15:-1),L(),ge(r.openedSettings?-1:16),L(),ge(r.openedChat?17:-1),L(),ge(r.openedSettings?18:-1))},dependencies:[Ue,ns,Ug,Bg,$g],data:{animation:[qt("openUsersPanel",[ua("opened",Re({left:"0px"})),ua("closed",Re({left:"-100%"})),St("opened <=> closed",[Kt("0.5s")])]),qt("appear",[St(":enter",[Re({opacity:0}),Kt("500ms",Rd([Re({opacity:0,offset:0}),Re({opacity:1,offset:1})]))]),St(":leave",[Re({opacity:1}),Kt("50ms",Re({opacity:0}))])])]}})}return t})();var zg=[{title:"Home",path:"home",component:Wg},{title:"Login",path:"login",component:pp,data:{animation:"Login"}},{title:"Signup",path:"signup",component:mp,data:{animation:"Signup"}},{path:"",redirectTo:"/home",pathMatch:"full"}];var HI="@",qI=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=_(hd,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-EQ5ML6XV.js").then(r=>r)).catch(r=>{throw new $(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new ju(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(i,r);o.use(l),this.scheduler?.notify(9)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){na()},e.\u0275prov=I({token:e,factory:e.\u0275fac});let t=e;return t})(),ju=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(HI)}};function Gg(t="animations"){return ia("NgAsyncAnimations"),Oe([{provide:Wr,useFactory:(e,n,i)=>new qI(e,n,i,t),deps:[te,us,ue]},{provide:ta,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var KI={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},zo="__@ngrx/effects_create__";function Hg(t,e={}){let n=e.functional?t:t(),i=m(m({},KI),e);return Object.defineProperty(n,zo,{value:i}),n}function YI(t){return Object.getOwnPropertyNames(t).filter(i=>t[i]&&t[i].hasOwnProperty(zo)?t[i][zo].hasOwnProperty("dispatch"):!1).map(i=>{let r=t[i][zo];return m({propertyName:i},r)})}function QI(t){return YI(t)}function qg(t){return Object.getPrototypeOf(t)}function JI(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function Kg(t){return typeof t=="function"}function XI(t){return t.filter(Kg)}function ZI(t,e,n){let i=qg(t),s=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,o=QI(t).map(({propertyName:a,dispatch:l,useEffectsErrorHandler:c})=>{let u=typeof t[a]=="function"?t[a]():t[a],d=c?n(u,e):u;return l===!1?d.pipe(Yu()):d.pipe(ed()).pipe(A(f=>({effect:t[a],notification:f,propertyName:a,sourceName:s,sourceInstance:t})))});return Ko(...o)}var eS=10;function Yg(t,e,n=eS){return t.pipe(Ge(i=>(e&&e.handleError(i),n<=1?t:Yg(t,e,n-1))))}var Qg=(()=>{let e=class e extends je{constructor(i){super(),i&&(this.source=i)}lift(i){let r=new e;return r.source=this,r.operator=i,r}};e.\u0275fac=function(r){return new(r||e)(w(ir))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Jg(...t){return Me(e=>t.some(n=>typeof n=="string"?n===e.type:n.type===e.type))}var px=new y("@ngrx/effects Internal Root Guard"),mx=new y("@ngrx/effects User Provided Effects"),gx=new y("@ngrx/effects Internal Root Effects"),_x=new y("@ngrx/effects Internal Root Effects Instances"),vx=new y("@ngrx/effects Internal Feature Effects"),yx=new y("@ngrx/effects Internal Feature Effects Instance Groups"),tS=new y("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Yg}),nS="@ngrx/effects/init",iS=an(nS);function rS(t,e){if(t.notification.kind==="N"){let n=t.notification.value;!sS(n)&&e.handleError(new Error(`Effect ${oS(t)} dispatched an invalid action: ${aS(n)}`))}}function sS(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function oS({propertyName:t,sourceInstance:e,sourceName:n}){let i=typeof e[t]=="function";return!!n?`"${n}.${String(t)}${i?"()":""}"`:`"${String(t)}()"`}function aS(t){try{return JSON.stringify(t)}catch{return t}}var cS="ngrxOnIdentifyEffects";function lS(t){return Vu(t,cS)}var uS="ngrxOnRunEffects";function dS(t){return Vu(t,uS)}var hS="ngrxOnInitEffects";function fS(t){return Vu(t,hS)}function Vu(t,e){return t&&e in t&&typeof t[e]=="function"}var Xg=(()=>{let e=class e extends fe{constructor(i,r){super(),this.errorHandler=i,this.effectsErrorHandler=r}addEffects(i){this.next(i)}toActions(){return this.pipe(Qo(i=>JI(i)?qg(i):i),ye(i=>i.pipe(Qo(pS))),ye(i=>{let r=i.pipe(Lr(o=>mS(this.errorHandler,this.effectsErrorHandler)(o)),A(o=>(rS(o,this.errorHandler),o.notification)),Me(o=>o.kind==="N"&&o.value!=null),Ju()),s=i.pipe(He(1),Me(fS),A(o=>o.ngrxOnInitEffects()));return Ko(r,s)}))}};e.\u0275fac=function(r){return new(r||e)(w(fi),w(tS))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function pS(t){return lS(t)?t.ngrxOnIdentifyEffects():""}function mS(t,e){return n=>{let i=ZI(n,t,e);return dS(n)?n.ngrxOnRunEffects(i):i}}var gS=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(i,r){this.effectSources=i,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(w(Xg),w(gt))},e.\u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Zg(...t){let e=t.flat(),n=XI(e);return Oe([n,{provide:Wt,multi:!0,useValue:()=>{_(tr),_(Gs,{optional:!0});let i=_(gS),r=_(Xg),s=!i.isStarted;s&&i.start();for(let o of e){let a=Kg(o)?_(o):o;r.addEffects(a)}s&&_(gt).dispatch(iS())}}])}var vS={state:"none",objectId:"",email:"",userToken:""},e_=dp(vS,Qs(Js,t=>t),Qs(Xs,(t,e)=>P(m({},t),{state:"success",email:e.email,userToken:e["user-token"],objectId:e.objectId})),Qs(Zs,t=>P(m({},t),{state:"failed"})));var t_=(()=>{class t{action$;authService;login$;constructor(n,i){this.action$=n,this.authService=i,this.login$=Hg(()=>this.action$.pipe(Jg(Hc),Lr(r=>this.authService.login(r.email,r.password).pipe(A(s=>Xs({email:s.email,objectId:s.objectId,"user-token":s["user-token"]})),Ge(()=>T(Zs()))))))}static \u0275fac=function(i){return new(i||t)(w(Qg),w(Ee))};static \u0275prov=I({token:t,factory:t.\u0275fac})}return t})();var n_={providers:[bd({eventCoalescing:!0}),Mh(zg),{provide:_i,useClass:la},$d(),Gg(),up(),lp("auth",e_),Zg(t_)]};var i_=(()=>{class t{title="chat";constructor(){}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=Z({type:t,selectors:[["app-root"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(i,r){i&1&&N(0,"router-outlet")},dependencies:[rc]})}return t})();var yS="firebase",bS="10.12.4";Pt(yS,bS,"app");var wS={apiKey:"AIzaSyBaRYK1qyGrBi17GTypMzXGc5-vhC3HfBc",authDomain:"chat-e5d4f.firebaseapp.com",projectId:"chat-e5d4f",storageBucket:"chat-e5d4f.appspot.com",messagingSenderId:"841961552150",appId:"1:841961552150:web:d2639c5f872acf76e73837",databaseURL:"https://chat-e5d4f-default-rtdb.europe-west1.firebasedatabase.app"};fl(wS);Yd(i_,n_).catch(t=>console.error(t));
