<div class="h-full w-full flex flex-col pt-3 px-3 bg-[#F6EFEE]">
  @if(messages.length === 0){
  <p class="w-full text-center bg-gray-500 text-white">No messages here</p>
  }

  <div
    class="basis-[94%] flex flex-col mb-3 py-3 bg-white rounded-md overflow-y-auto"
  >
    @for(message of messages; track message.timestamp){
    <ul
      class="flex px-5"
      [ngClass]="
        message.senderId === getCurrentObjectId()
          ? 'justify-end flex-row-reverse'
          : 'justify-start flex-row'
      "
    >
      <li class="w-11 rounded-full">
        @if($first || messages[$index].senderId !==
        messages[$index-1].senderId){
        <img src="./assets/user.jpg" class="rounded-full" />
        }
      </li>
      <li class="w-full flex flex-col">
        <div
          class="w-full flex text-xl"
          [ngClass]="
            message.senderId === getCurrentObjectId()
              ? 'justify-end pr-2'
              : 'justify-start pl-2'
          "
        >
          @if($first || messages[$index].senderId !== messages[$index -
          1].senderId){
          <p>
            {{
              message.senderId === senderUser?.objectId
                ? senderUser?.firstName
                : receiverUser?.firstName
            }}
            {{
              message.senderId === senderUser?.objectId
                ? senderUser?.lastName
                : receiverUser?.lastName
            }}
          </p>
          }
        </div>
        <div
          class="flex items-center select-text"
          [ngClass]="
            message.senderId === getCurrentObjectId()
              ? 'pr-2 flex-row-reverse'
              : 'flex-row pl-2'
          "
        >
          <p class="text-lg font-light">
            {{ message.messageText }}
          </p>
          <p class="ml-2 font-light text-xs px-2">
            {{ message.timestamp | date : "hh:mm aa" }}
          </p>
        </div>
      </li>
    </ul>
    } @empty{ }
  </div>
  <div class="basis-[6%] flex mb-3">
    <input
      class="basis-[95%] w-full h-full px-2 text-xl border-gray-300 outline-none border rounded-md focus:border-blue-600 font-lightborder"
      placeholder="Type a message"
      [(ngModel)]="text"
      (keydown.enter)="sendMessage()"
    />
    <div class="basis-[5%] p-2">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        xmlns:xlink="http://www.w3.org/1999/xlink"
        fill="#16a34a"
        height="32px"
        width="32px"
        version="1.1"
        id="Capa_1"
        viewBox="0 0 495.003 495.003"
        xml:space="preserve"
        (click)="sendMessage()"
        class="cursor-pointer"
      >
        <g id="XMLID_51_">
          <path
            id="XMLID_53_"
            d="M164.711,456.687c0,2.966,1.647,5.686,4.266,7.072c2.617,1.385,5.799,1.207,8.245-0.468l55.09-37.616   l-67.6-32.22V456.687z"
          />
          <path
            id="XMLID_52_"
            d="M492.431,32.443c-1.513-1.395-3.466-2.125-5.44-2.125c-1.19,0-2.377,0.264-3.5,0.816L7.905,264.422   c-4.861,2.389-7.937,7.353-7.904,12.783c0.033,5.423,3.161,10.353,8.057,12.689l125.342,59.724l250.62-205.99L164.455,364.414   l156.145,74.4c1.918,0.919,4.012,1.376,6.084,1.376c1.768,0,3.519-0.322,5.186-0.977c3.637-1.438,6.527-4.318,7.97-7.956   L494.436,41.257C495.66,38.188,494.862,34.679,492.431,32.443z"
          />
        </g>
      </svg>
    </div>
  </div>
</div>
